diff -urN -x CVS kdesdk.orig/cervisia/ChangeLog kdesdk/cervisia/ChangeLog
--- kdesdk.orig/cervisia/ChangeLog	Thu Apr  1 21:36:05 2004
+++ kdesdk/cervisia/ChangeLog	Mon Apr 26 22:46:23 2004
@@ -1,3 +1,23 @@
+2004-04-26  Christian Loose  <christian.loose@kdemail.net>
+
+	* Fix BR #80291:
+	  Cervisia ignores the CVS_RSH=ssh setting during
+	  the checkout of a cvs module.
+
+2004-04-13  Christian Loose  <christian.loose@kdemail.net>
+
+	* Fix BR #46871:
+	  Preserve file content in resolve dialog:
+	   - don't remove characters
+	   - don't add or remove new line markers
+           - handle A+B/B+A cases with no new line marker at
+             the end of the first version correctly
+	* Fix BR #74903:
+	  Don't choke on conflict markers that are not on a
+	  separate line in the resolve dialog. This happens 
+	  when the file didn't end with a new line marker 
+	  before CVS encountered the conflict.
+
 2004-04-01  Christian Loose  <christian.loose@hamburg.de>
 
 	* Fix BR #7880:
diff -urN -x CVS kdesdk.orig/cervisia/Makefile.am kdesdk/cervisia/Makefile.am
--- kdesdk.orig/cervisia/Makefile.am	Wed Feb 11 12:44:38 2004
+++ kdesdk/cervisia/Makefile.am	Tue Apr 13 11:02:57 2004
@@ -8,7 +8,7 @@
 noinst_LTLIBRARIES = libcervisia.la
 
 libcervisia_la_SOURCES = annotatedlg.cpp cvsprogressdlg.cpp diffdlg.cpp logdlg.cpp \
-		   progressdlg.cpp progressdlg.skel resolvedlg.cpp annotateview.cpp        \
+		   progressdlg.cpp progressdlg.skel resolvedlg.cpp resolvedlg_p.cpp annotateview.cpp \
 		   diffview.cpp loglist.cpp logplainview.cpp logtree.cpp annotatectl.cpp   \
 		   globalconfig.cpp loginfo.cpp misc.cpp qttableview.cpp tiplabel.cpp      \
 		   configutils.cpp
diff -urN -x CVS kdesdk.orig/cervisia/cervisia.desktop kdesdk/cervisia/cervisia.desktop
--- kdesdk.orig/cervisia/cervisia.desktop	Sun Feb 29 16:52:11 2004
+++ kdesdk/cervisia/cervisia.desktop	Sun Apr  4 14:55:38 2004
@@ -27,7 +27,7 @@
 GenericName[lt]=CVS vartotojo sąsaja
 GenericName[lv]=CVS Frontends
 GenericName[ms]=Bahagian Depan CVS
-GenericName[nb]=CVS-program
+GenericName[nb]=CVS-grensesnitt
 GenericName[nl]=CVS-hulpprogramma
 GenericName[nn]=CVS-grensesnitt
 GenericName[pl]=Interfejs do CVS
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/cvsservice.cpp kdesdk/cervisia/cvsservice/cvsservice.cpp
--- kdesdk.orig/cervisia/cvsservice/cvsservice.cpp	Fri Oct  3 23:04:58 2003
+++ kdesdk/cervisia/cvsservice/cvsservice.cpp	Mon Apr 26 22:46:23 2004
@@ -64,7 +64,7 @@
     Repository*         repository;
 
     CvsJob* createCvsJob();
-    DCOPRef setupNonConcurrentJob();
+    DCOPRef setupNonConcurrentJob(Repository* repo = 0);
 
     bool hasWorkingCopy();
     bool hasRunningJob();
@@ -210,7 +210,7 @@
 
     *d->singleCvsJob << module;
 
-    return d->setupNonConcurrentJob();
+    return d->setupNonConcurrentJob(repo.get());
 }
 
 
@@ -446,7 +446,7 @@
 
     *d->singleCvsJob << module << vendorTag << releaseTag;
 
-    return d->setupNonConcurrentJob();
+    return d->setupNonConcurrentJob(repo.get());
 }
 
 
@@ -774,11 +774,15 @@
 }
 
 
-DCOPRef CvsService::Private::setupNonConcurrentJob()
+DCOPRef CvsService::Private::setupNonConcurrentJob(Repository* repo)
 {
-    singleCvsJob->setRSH(repository->rsh());
-    singleCvsJob->setServer(repository->server());
-    singleCvsJob->setDirectory(repository->workingCopy());
+    // no explicit repository provided?
+    if( !repo )
+        repo = repository;
+        
+    singleCvsJob->setRSH(repo->rsh());
+    singleCvsJob->setServer(repo->server());
+    singleCvsJob->setDirectory(repo->workingCopy());
 
     return singleJobRef;
 }
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/cvsservice.desktop kdesdk/cervisia/cvsservice/cvsservice.desktop
--- kdesdk.orig/cervisia/cvsservice/cvsservice.desktop	Sun Feb 29 16:52:13 2004
+++ kdesdk/cervisia/cvsservice/cvsservice.desktop	Sun Apr  4 14:55:41 2004
@@ -42,6 +42,7 @@
 Comment[is]=DCOP þjónusta sem er viðmót á cvs
 Comment[it]=Un servizio DCOP che provvede un'interfaccia a cvs
 Comment[ja]=CVS インターフェースを提供する DCOP サービス
+Comment[nb]=En DCOP-tjeneste som tilbyr et grensesnitt mot cvs
 Comment[nl]=Een DCOP-dienst die een interface naar cvs biedt
 Comment[pl]=Usługa DCOP pozwalająca na dostęp do CVS
 Comment[pt]=Um serviço de DCOP que oferece uma interface para o CVS
diff -urN -x CVS kdesdk.orig/cervisia/resolvedlg.cpp kdesdk/cervisia/resolvedlg.cpp
--- kdesdk.orig/cervisia/resolvedlg.cpp	Sun Aug  3 19:39:48 2003
+++ kdesdk/cervisia/resolvedlg.cpp	Tue Apr 13 11:02:58 2004
@@ -1,6 +1,7 @@
 /*
  *  Copyright (C) 1999-2002 Bernd Gehrmann
  *                          bernd@mail.berlios.de
+ *  Copyright (c) 2003-2004 Christian Loose <christian.loose@hamburg.de>
  *
  * This program may be distributed under the terms of the Q Public
  * License as defined by Trolltech AS of Norway and appearing in the
@@ -18,7 +19,6 @@
 #include <qkeycode.h>
 #include <qlabel.h>
 #include <qlayout.h>
-#include <qmultilineedit.h>
 #include <qpushbutton.h>
 #include <qtextcodec.h>
 #include <qtextstream.h>
@@ -29,11 +29,8 @@
 
 #include "diffview.h"
 #include "misc.h"
-
-#include <kdeversion.h>
-#if KDE_VERSION < KDE_MAKE_VERSION(3,1,90)
-#include "configutils.h"
-#endif
+#include "resolvedlg_p.h"
+using Cervisia::ResolveEditorDialog;
 
 
 // *UGLY HACK*
@@ -48,6 +45,51 @@
 }
 
 
+namespace
+{
+
+class LineSeparator
+{
+public:
+    LineSeparator(const QString& text)
+        : m_text(text)
+        , m_startPos(0)
+        , m_endPos(0)
+    {
+    }
+    
+    QString nextLine() const
+    {
+        // already reach end of text on previous call
+        if( m_endPos < 0 )
+        {
+            m_currentLine = QString::null;
+            return m_currentLine;
+        }
+        
+        m_endPos = m_text.find('\n', m_startPos);
+        
+        int length    = m_endPos - m_startPos + 1;
+        m_currentLine = m_text.mid(m_startPos, length);
+        m_startPos    = m_endPos + 1;
+        
+        return m_currentLine;
+    }
+    
+    bool atEnd() const
+    {
+        return (m_endPos < 0 && m_currentLine.isEmpty());
+    }
+    
+private:
+    const QString    m_text;
+    mutable QString  m_currentLine;
+    mutable int      m_startPos, m_endPos;
+};
+
+}
+
+
 ResolveDialog::ResolveDialog(KConfig& cfg, QWidget *parent, const char *name)
     : KDialogBase(parent, name, false, QString::null,
                   Close | Help | User1 | User2, Close, true,
@@ -77,9 +119,9 @@
     QBoxLayout *versionBlayout = new QVBoxLayout(versionBLayoutWidget, 5);
 
     QLabel *revlabel2 = new QLabel(i18n("Other version (B):"), versionBLayoutWidget);
-    versionBlayout->addWidget(revlabel2);       
+    versionBlayout->addWidget(revlabel2);
     diff2 = new DiffView(cfg, true, false, versionBLayoutWidget);
-    versionBlayout->addWidget(diff2, 10);       
+    versionBlayout->addWidget(diff2, 10);
 
     diff1->setPartner(diff2);
     diff2->setPartner(diff1);
@@ -97,7 +139,7 @@
 
     abutton = new QPushButton("&A", mainWidget);
     connect( abutton, SIGNAL(clicked()), SLOT(aClicked()) );
-    
+
     bbutton = new QPushButton("&B", mainWidget);
     connect( bbutton, SIGNAL(clicked()), SLOT(bClicked()) );
 
@@ -112,10 +154,10 @@
 
     nofnlabel = new QLabel(mainWidget);
     nofnlabel->setAlignment(AlignCenter);
-    
+
     backbutton = new QPushButton("&<<", mainWidget);
     connect( backbutton, SIGNAL(clicked()), SLOT(backClicked()) );
-    
+
     forwbutton = new QPushButton("&>>", mainWidget);
     connect( forwbutton, SIGNAL(clicked()), SLOT(forwClicked()) );
 
@@ -142,22 +184,14 @@
 
     setWFlags(Qt::WDestructiveClose | getWFlags());
 
-#if KDE_IS_VERSION(3,1,90)
     QSize size = configDialogSize(partConfig, "ResolveDialog");
-#else
-    QSize size = Cervisia::configDialogSize(this, partConfig, "ResolveDialog");
-#endif
     resize(size);
 }
 
 
 ResolveDialog::~ResolveDialog()
 {
-#if KDE_IS_VERSION(3,1,90)
     saveDialogSize(partConfig, "ResolveDialog");
-#else
-    Cervisia::saveDialogSize(this, partConfig, "ResolveDialog");
-#endif
 }
 
 
@@ -182,109 +216,172 @@
     int lineno1, lineno2;
     int advanced1, advanced2;
     enum { Normal, VersionA, VersionB } state;
-    
+
     setCaption(i18n("CVS Resolve: %1").arg(name));
 
     fname = name;
-
-    QFile f(name);
-    if (!f.open(IO_ReadOnly))
+  
+    QString fileContent = readFile();
+    if( fileContent.isNull() )
         return false;
-    QTextStream stream(&f);
-    QTextCodec *fcodec = DetectCodec(name);
-    stream.setCodec(fcodec);
+        
+    LineSeparator separator(fileContent);
 
     state = Normal;
     lineno1 = lineno2 = 0;
     advanced1 = advanced2 = 0;
-    while (!stream.atEnd())
-	{
-	    QString line = stream.readLine();
-	    if (line.left(7) == "<<<<<<<")
-		{
-		    state = VersionA;
-		    advanced1 = 0;
-		}
-	    else if (line.left(7) == "=======" && state == VersionA)
-		{
-		    state = VersionB;
-		    advanced2 = 0;
-		}
-	    else if (line.left(7) == ">>>>>>>")
-		{
-		    ResolveItem *item = new ResolveItem;
-		    item->linenoA = lineno1-advanced1+1;
-		    item->linecountA = advanced1;
-		    item->linenoB = lineno2-advanced2+1;
-		    item->linecountB = advanced2;
-		    item->offsetM = item->linenoA-1;
-		    item->chosen = ChA;
-                    item->linecountTotal = item->linecountA;
-		    items.append(item);
-		    for (; advanced1 < advanced2; advanced1++)
-			diff1->addLine("", DiffView::Neutral);
-		    for (; advanced2 < advanced1; advanced2++)
-			diff2->addLine("", DiffView::Neutral);
-		    state = Normal;
-		}
-	    else if (state == VersionA)
-		{
-		    lineno1++;
-		    advanced1++;
-		    diff1->addLine(line, DiffView::Change, lineno1);
-		    merge->addLine(line, DiffView::Change, lineno1);
-		}
-	    else if (state == VersionB)
-		{
-		    lineno2++;
-		    advanced2++;
-		    diff2->addLine(line, DiffView::Change, lineno2);
-		}
-	    else // state == Normal
-		{
-		    lineno1++;
-		    lineno2++;
-		    diff1->addLine(line, DiffView::Unchanged, lineno1);
-		    merge->addLine(line, DiffView::Unchanged, lineno1);
-		    diff2->addLine(line, DiffView::Unchanged, lineno2);
-		}
-	}
-    f.close();
-    updateNofN();
+    do
+    {
+        QString line = separator.nextLine();
+        
+        // reached end of file?
+        if( separator.atEnd() )
+            break;
+            
+        switch( state )
+        {
+            case Normal:
+                // check for start of conflict block
+                if( line.startsWith("<<<<<<<") )
+                {
+                    state     = VersionA;
+                    advanced1 = 0;
+                }
+                else
+                {
+                    addToMergeAndVersionA(line, lineno1);
+                    addToVersionB(line, lineno2);
+                }
+                break;
+            case VersionA:
+                {
+                    int separatorPos = line.findRev("=======");
+                    if( separatorPos < 0 )    // still in version A
+                    {
+                        advanced1++;
+                        addToMergeAndVersionA(line, lineno1);
+                    }
+                    else
+                    {
+                        if( separatorPos > 0 )    // content and conflict marker on same line
+                        {
+                            line.truncate(separatorPos);
+                            advanced1++;
+                            addToMergeAndVersionA(line, lineno1);
+                        }
+                        state     = VersionB;
+                        advanced2 = 0;
+                    }
+                }
+                break;
+            case VersionB:
+                {
+                    int separatorPos = line.findRev(">>>>>>>");
+                    if( separatorPos < 0 )    // still in version B
+                    {
+                        advanced2++;
+                        addToVersionB(line, lineno2);
+                    }
+                    else
+                    {
+                        if( separatorPos > 0 )    // content and conflict marker on same line
+                        {
+                            line.truncate(separatorPos);
+                            advanced2++;
+                            addToVersionB(line, lineno2);
+                        }
+                        
+                        // create an resolve item
+                        ResolveItem *item = new ResolveItem;
+                        item->linenoA        = lineno1-advanced1+1;
+                        item->linecountA     = advanced1;
+                        item->linenoB        = lineno2-advanced2+1;
+                        item->linecountB     = advanced2;
+                        item->offsetM        = item->linenoA-1;
+                        item->chosen         = ChA;
+                        item->linecountTotal = item->linecountA;
+                        items.append(item);
+                        
+                        for (; advanced1 < advanced2; advanced1++)
+                            diff1->addLine("", DiffView::Neutral);
+                        for (; advanced2 < advanced1; advanced2++)
+                            diff2->addLine("", DiffView::Neutral);
+                            
+                        state = Normal;
+                    }
+                }
+                break;
+        }
+    } 
+    while( !separator.atEnd() );
     
+    updateNofN();
+
     return true; // succesful
 }
 
 
+void ResolveDialog::addToMergeAndVersionA(const QString& line, int& lineNo)
+{
+    lineNo++;
+    diff1->addLine(line, DiffView::Change, lineNo);
+    merge->addLine(line, DiffView::Change, lineNo);
+    
+    m_contentVersionA      += line;
+    m_contentMergedVersion += line;
+}
+
+
+void ResolveDialog::addToVersionB(const QString& line, int& lineNo)
+{
+    lineNo++;
+    diff2->addLine(line, DiffView::Change, lineNo);
+    
+    m_contentVersionB += line;
+}
+
+
 void ResolveDialog::saveFile(const QString &name)
 {
     QFile f(name);
     if (!f.open(IO_WriteOnly))
-	{
-	    KMessageBox::sorry(this,
-			       i18n("Could not open file for writing."),
-			       "Cervisia");
-	    return;
-	}
+    {
+        KMessageBox::sorry(this,
+                           i18n("Could not open file for writing."),
+                           "Cervisia");
+        return;
+    }
     QTextStream stream(&f);
     QTextCodec *fcodec = DetectCodec(name);
     stream.setCodec(fcodec);
-        
-    int count = merge->count();
-    for (int i = 0; i < count; ++i)
-        stream << merge->stringAtOffset(i) << endl;
+       
+    stream << m_contentMergedVersion;
 
     f.close();
 }
+    
+
+QString ResolveDialog::readFile()
+{
+    QFile f(fname);
+    if( !f.open(IO_ReadOnly) )
+        return QString::null;
+
+    QTextStream stream(&f);
+    QTextCodec* codec = DetectCodec(fname);
+    stream.setCodec(codec);
+    
+    return stream.read();
+}
 
 
 void ResolveDialog::updateNofN()
 {
     QString str;
     if (markeditem >= 0)
-	str = i18n("%1 of %2").arg(markeditem+1).arg(items.count());
+        str = i18n("%1 of %2").arg(markeditem+1).arg(items.count());
     else
-	str = i18n("%1 conflicts").arg(items.count());
+        str = i18n("%1 conflicts").arg(items.count());
     nofnlabel->setText(str);
 
     backbutton->setEnabled(markeditem != -1);
@@ -302,27 +399,27 @@
 void ResolveDialog::updateHighlight(int newitem)
 {
     if (markeditem >= 0)
-	{
-	    ResolveItem *item = items.at(markeditem);
-	    for (int i = item->linenoA; i < item->linenoA+item->linecountA; ++i)
-		diff1->setInverted(i, false);
-	    for (int i = item->linenoB; i < item->linenoB+item->linecountB; ++i)
-		diff2->setInverted(i, false);
-	}
+    {
+        ResolveItem *item = items.at(markeditem);
+        for (int i = item->linenoA; i < item->linenoA+item->linecountA; ++i)
+            diff1->setInverted(i, false);
+        for (int i = item->linenoB; i < item->linenoB+item->linecountB; ++i)
+            diff2->setInverted(i, false);
+    }
 
     markeditem = newitem;
-    
+
     if (markeditem >= 0)
-	{
-	    ResolveItem *item = items.at(markeditem);
-	    for (int i = item->linenoA; i < item->linenoA+item->linecountA; ++i)
-		diff1->setInverted(i, true);
-	    for (int i = item->linenoB; i < item->linenoB+item->linecountB; ++i)
-		diff2->setInverted(i, true);
-	    diff1->setCenterLine(item->linenoA);
-	    diff2->setCenterLine(item->linenoB);
-            merge->setCenterOffset(item->offsetM);
-	}
+    {
+        ResolveItem *item = items.at(markeditem);
+        for (int i = item->linenoA; i < item->linenoA+item->linecountA; ++i)
+            diff1->setInverted(i, true);
+        for (int i = item->linenoB; i < item->linenoB+item->linecountB; ++i)
+            diff2->setInverted(i, true);
+        diff1->setCenterLine(item->linenoA);
+        diff2->setCenterLine(item->linenoB);
+        merge->setCenterOffset(item->offsetM);
+    }
     diff1->repaint();
     diff2->repaint();
     merge->repaint();
@@ -330,6 +427,36 @@
 }
 
 
+void ResolveDialog::updateMergedVersion(ResolveItem* item, 
+                                        ResolveDialog::ChooseType chosen)
+{
+    // Remove old variant
+    for (int i = 0; i < item->linecountTotal; ++i)
+        merge->removeAtOffset(item->offsetM);
+
+    // Insert new
+    int total = 0;
+    LineSeparator separator(m_contentMergedVersion);
+    QString line = separator.nextLine();
+    while( !separator.atEnd() )
+    {
+        merge->insertAtOffset(line, DiffView::Change, item->offsetM+total);
+        line = separator.nextLine();
+        ++total;
+    }
+
+    item->chosen = chosen;
+    item->linecountTotal = total;
+
+    // Adjust other items
+    int difference = total - item->linecountTotal;
+    while ( (item = items.next()) != 0 )
+        item->offsetM += difference;
+
+    merge->repaint();
+}
+
+
 void ResolveDialog::backClicked()
 {
     int newitem;
@@ -358,73 +485,32 @@
 
 void ResolveDialog::choose(ChooseType ch)
 {
-    DiffView *first=0, *second=0;
-    int firstno=0, secondno=0;
-    int firstcount=0, secondcount=0;
-  
     if (markeditem < 0)
-	return;
+        return;
 
     ResolveItem *item = items.at(markeditem);
     if (item->chosen == ch)
-	return;
+        return;
 
     switch (ch)
         {
         case ChA:
-            first = diff1; 
-            firstno = item->linenoA;
-            firstcount = item->linecountA;
+            m_contentMergedVersion = m_contentVersionA;
             break;
         case ChB:
-            first = diff2; 
-            firstno = item->linenoB;
-            firstcount = item->linecountB;
+            m_contentMergedVersion = m_contentVersionB;
             break;
         case ChAB:
-            first = diff1; 
-            firstno = item->linenoA;
-            firstcount = item->linecountA;
-            second = diff2; 
-            secondno = item->linenoB;
-            secondcount = item->linecountB;
+            m_contentMergedVersion = m_contentVersionA + m_contentVersionB;
             break;
         case ChBA:
-            first = diff2; 
-            firstno  = item->linenoB;
-            firstcount = item->linecountB;
-            second = diff1; 
-            secondno = item->linenoA;
-            secondcount = item->linecountA;
+            m_contentMergedVersion = m_contentVersionB + m_contentVersionA;
             break;
         default:
             kdDebug(8050) << "Internal error at switch" << endl;
         }
 
-    int total = firstcount + secondcount;
-    int difference = total - item->linecountTotal;
-    
-    // Remove old variant
-    for (int i = 0; i < item->linecountTotal; ++i)
-        merge->removeAtOffset(item->offsetM);
-
-    // Insert new
-    for (int i = 0; i < firstcount; ++i)
-        merge->insertAtOffset(first->stringAtLine(firstno+i), DiffView::Change, item->offsetM+i);
-    
-    if (second)
-        for (int i = 0; i < secondcount; ++i)
-            merge->insertAtOffset(second->stringAtLine(secondno+i), DiffView::Change, item->offsetM+firstcount+i);
-    
-    item->chosen = ch;
-    item->linecountTotal = total;
-    
-    // Adjust other items
-    while ( (item = items.next()) != 0 )
-        item->offsetM += difference;
-    
-    merge->repaint();
-    
+    updateMergedVersion(item, ch);
 }
 
 
@@ -456,39 +542,19 @@
 {
     if (markeditem < 0)
         return;
+    
     ResolveItem *item = items.at(markeditem);
 
-    QStringList oldContent;
-    for (int i = 0; i < item->linecountTotal; ++i)
-        oldContent << merge->stringAtOffset(item->offsetM+i);
-
     ResolveEditorDialog *dlg = new ResolveEditorDialog(partConfig, this, "edit");
-    dlg->setContent(oldContent);
-    
+    dlg->setContent(m_contentMergedVersion);
+
     if (dlg->exec())
-        {
-            QStringList newContent = dlg->content();
-            int total = newContent.count();
-            int difference = total - item->linecountTotal;
-            
-            // Remove old variant
-            for (int i = 0; i < item->linecountTotal; ++i)
-                merge->removeAtOffset(item->offsetM);
-            
-            // Insert new
-            for (int i = 0; i < total; ++i)
-                merge->insertAtOffset(newContent[i], DiffView::Change, item->offsetM+i);
-            
-            item->chosen = ChEdit;
-            item->linecountTotal = total;
-            
-            // Adjust other items
-            while ( (item = items.next()) != 0 )
-                item->offsetM += difference;
-            
-            merge->repaint();
-        }
-    
+    {
+        m_contentMergedVersion = dlg->content();
+
+        updateMergedVersion(item, ChEdit);
+    }
+
     delete dlg;
 }
 
@@ -502,7 +568,7 @@
 void ResolveDialog::saveAsClicked()
 {
     QString filename =
-	KFileDialog::getSaveFileName(0, 0, this, 0);
+        KFileDialog::getSaveFileName(0, 0, this, 0);
 
     if (!filename.isEmpty())
         saveFile(filename);
@@ -512,69 +578,19 @@
 void ResolveDialog::keyPressEvent(QKeyEvent *e)
 {
     switch (e->key())
-	{
-	case Key_A:    aClicked();    break;
-	case Key_B:    bClicked();    break;
-	case Key_Left: backClicked(); break;
-	case Key_Right:forwClicked(); break;
+    {
+        case Key_A:    aClicked();    break;
+        case Key_B:    bClicked();    break;
+        case Key_Left: backClicked(); break;
+        case Key_Right:forwClicked(); break;
         case Key_Up:   diff1->up();   break;
         case Key_Down: diff1->down(); break;
         default:
             KDialogBase::keyPressEvent(e);
-	}
-}
-
-
-ResolveEditorDialog::ResolveEditorDialog(KConfig& cfg, QWidget *parent, const char *name)
-    : KDialogBase(parent, name, true, QString::null,
-                  Ok | Cancel, Ok, true)
-    , partConfig(cfg)
-{
-    edit = new QMultiLineEdit(this);
-    edit->setFocus();
-
-    setMainWidget(edit);
-
-    QFontMetrics const fm(fontMetrics());
-    setMinimumSize(fm.width('0') * 120,
-                   fm.lineSpacing() * 40);
-
-#if KDE_IS_VERSION(3,1,90)
-    QSize size = configDialogSize(partConfig, "ResolveEditDialog");
-#else
-    QSize size = Cervisia::configDialogSize(this, partConfig, "ResolveEditDialog");
-#endif
-    resize(size);
-}
-
-
-ResolveEditorDialog::~ResolveEditorDialog()
-{
-#if KDE_IS_VERSION(3,1,90)
-    saveDialogSize(partConfig, "ResolveEditDialog");
-#else
-    Cervisia::saveDialogSize(this, partConfig, "ResolveEditDialog");
-#endif
+    }
 }
 
 
-void ResolveEditorDialog::setContent(const QStringList &l)
-{
-    QStringList::ConstIterator it;
-    for (it = l.begin(); it != l.end(); ++it)
-        edit->insertLine((*it).left((*it).length()-1));
-}
-
-
-QStringList ResolveEditorDialog::content() const
-{
-    QStringList l;
-    for (int i = 0; i < edit->numLines(); ++i)
-        l << (edit->textLine(i) + '\n');
-
-    return l;
-}
-
 #include "resolvedlg.moc"
 
 
diff -urN -x CVS kdesdk.orig/cervisia/resolvedlg.h kdesdk/cervisia/resolvedlg.h
--- kdesdk.orig/cervisia/resolvedlg.h	Wed Feb 12 20:25:53 2003
+++ kdesdk/cervisia/resolvedlg.h	Tue Apr 13 11:02:58 2004
@@ -1,6 +1,7 @@
 /* 
  *  Copyright (C) 1999-2002 Bernd Gehrmann
  *                          bernd@mail.berlios.de
+ *  Copyright (c) 2003-2004 Christian Loose <christian.loose@hamburg.de>
  *
  * This program may be distributed under the terms of the Q Public
  * License as defined by Trolltech AS of Norway and appearing in the
@@ -24,7 +25,6 @@
 class DiffView;
 
 class QLabel;
-class QMultiLineEdit;
 class QTextCodec;
 class KConfig;
 class ResolveItem;
@@ -38,7 +38,6 @@
     enum ChooseType { ChA, ChB, ChAB, ChBA, ChEdit };
 
     explicit ResolveDialog( KConfig& cfg, QWidget *parent=0, const char *name=0 );
-
     virtual ~ResolveDialog();
 
     bool parseFile(const QString &name);
@@ -63,6 +62,10 @@
     void choose(ChooseType ch);
     void chooseEdit();
     void saveFile(const QString &name);
+    QString readFile();
+    void addToMergeAndVersionA(const QString& line, int& lineNo);
+    void addToVersionB(const QString& line, int& lineNo);
+    void updateMergedVersion(ResolveItem* item, ChooseType chosen);
     
     QLabel *nofnlabel;
     QPushButton *backbutton, *forwbutton;
@@ -74,25 +77,13 @@
     QTextCodec *fcodec;
     int markeditem;
     KConfig& partConfig;
+    
+    QString    m_contentVersionA,
+               m_contentVersionB,
+               m_contentMergedVersion;
 };
 
 
-class ResolveEditorDialog : public KDialogBase
-{
-public:
-
-    explicit ResolveEditorDialog( KConfig& cfg, QWidget *parent=0, const char *name=0 );
-
-    virtual ~ResolveEditorDialog();
-
-    void setContent(const QStringList &l);
-    QStringList content() const;
-
-private:   
-    QMultiLineEdit *edit;
-    KConfig& partConfig;
-};  
-
 #endif
 
 
diff -urN -x CVS kdesdk.orig/cervisia/resolvedlg_p.cpp kdesdk/cervisia/resolvedlg_p.cpp
--- kdesdk.orig/cervisia/resolvedlg_p.cpp	Thu Jan  1 01:00:00 1970
+++ kdesdk/cervisia/resolvedlg_p.cpp	Tue Apr 13 11:02:57 2004
@@ -0,0 +1,41 @@
+#include "resolvedlg_p.h"
+using namespace Cervisia;
+
+#include <qmultilineedit.h>
+
+
+ResolveEditorDialog::ResolveEditorDialog(KConfig& cfg, QWidget *parent, const char *name)
+    : KDialogBase(parent, name, true, QString::null,
+                  Ok | Cancel, Ok, true)
+    , m_partConfig(cfg)
+{
+    m_edit = new QMultiLineEdit(this);
+    m_edit->setFocus();
+
+    setMainWidget(m_edit);
+
+    QFontMetrics const fm(fontMetrics());
+    setMinimumSize(fm.width('0') * 120,
+                   fm.lineSpacing() * 40);
+
+    QSize size = configDialogSize(m_partConfig, "ResolveEditDialog");
+    resize(size);
+}
+
+
+ResolveEditorDialog::~ResolveEditorDialog()
+{
+    saveDialogSize(m_partConfig, "ResolveEditDialog");
+}
+
+
+void ResolveEditorDialog::setContent(const QString& text)
+{
+    m_edit->setText(text);
+}
+
+
+QString ResolveEditorDialog::content() const
+{
+    return m_edit->text();
+}
diff -urN -x CVS kdesdk.orig/cervisia/resolvedlg_p.h kdesdk/cervisia/resolvedlg_p.h
--- kdesdk.orig/cervisia/resolvedlg_p.h	Thu Jan  1 01:00:00 1970
+++ kdesdk/cervisia/resolvedlg_p.h	Tue Apr 13 11:02:57 2004
@@ -0,0 +1,33 @@
+#ifndef CERVISIA_RESOLVEEDITORDIALOG_H
+#define CERVISIA_RESOLVEEDITORDIALOG_H
+
+#include <kdialogbase.h>
+
+class QMultiLineEdit;
+class QStringList;
+class KConfig;
+
+
+namespace Cervisia
+{
+
+
+class ResolveEditorDialog : public KDialogBase
+{
+public:
+    explicit ResolveEditorDialog(KConfig& cfg, QWidget* parent=0, const char* name=0);
+    virtual ~ResolveEditorDialog();
+
+    void setContent(const QString& text);
+    QString content() const;
+
+private:   
+    QMultiLineEdit* m_edit;
+    KConfig&        m_partConfig;
+};  
+
+
+}
+
+
+#endif
diff -urN -x CVS kdesdk.orig/debian/changelog kdesdk/debian/changelog
--- kdesdk.orig/debian/changelog	Mon Mar 15 23:23:57 2004
+++ kdesdk/debian/changelog	Mon Apr 26 15:33:52 2004
@@ -1,7 +1,9 @@
-kdesdk (4:3.2.1-2) unstable; urgency=low
+kdesdk (4:3.2.2-1) unstable; urgency=low
 
+  * New upstream bugfix release.
   * Add Conflicts/Replaces for umbrello-manual (closes: #237173).
   * Don't use Conflicts/Replaces elsewhere where we should just use Replaces.
+  * Have kcachegrind suggest graphviz (closes: #243883).
 
  -- Ben Burton <bab@debian.org>  Tue, 16 Mar 2004 09:15:01 +1100
 
diff -urN -x CVS kdesdk.orig/debian/control kdesdk/debian/control
--- kdesdk.orig/debian/control	Mon Mar 15 23:23:57 2004
+++ kdesdk/debian/control	Mon Apr 26 15:33:52 2004
@@ -116,7 +116,7 @@
 Section: devel
 Depends: ${shlibs:Depends}
 Recommends: valgrind-calltree
-Suggests: khelpcenter, kdesdk-doc-html
+Suggests: graphviz, khelpcenter, kdesdk-doc-html
 Description: visualisation tool for valgrind profiling output
  KCachegrind is a visualisation tool for the profiling data generated
  by calltree, a profiling skin for valgrind.  Applications can be
diff -urN -x CVS kdesdk.orig/kbabel/addons/kfile-plugins/kfile_po.desktop kdesdk/kbabel/addons/kfile-plugins/kfile_po.desktop
--- kdesdk.orig/kbabel/addons/kfile-plugins/kfile_po.desktop	Sun Feb 29 16:52:21 2004
+++ kdesdk/kbabel/addons/kfile-plugins/kfile_po.desktop	Sat Apr 17 14:48:03 2004
@@ -19,6 +19,7 @@
 Name[gl]=Información do Catálogo
 Name[he]=מידע קטלוג
 Name[hi]=केटलॉग जानकारी
+Name[hr]=Informacije o katalogu
 Name[hu]=Katalógusjellemzők
 Name[is]=Upplýsingar um þýðingaskrár
 Name[it]=Catalogo informazioni
diff -urN -x CVS kdesdk.orig/kbabel/catalogmanager/catalogmanagerview.cpp kdesdk/kbabel/catalogmanager/catalogmanagerview.cpp
--- kdesdk.orig/kbabel/catalogmanager/catalogmanagerview.cpp	Wed Feb 18 12:06:13 2004
+++ kdesdk/kbabel/catalogmanager/catalogmanagerview.cpp	Tue Apr 13 17:46:57 2004
@@ -71,7 +71,7 @@
 
 using namespace KBabel;
 
-QString columnNames[8] = { 
+QString columnNames[8] = {
     I18N_NOOP("Name"),
     I18N_NOOP("M"),
     I18N_NOOP("Fuzzy"),
@@ -109,7 +109,7 @@
    _pendingProcesses.setAutoDelete(true);
 
    validPORepository = validPOTRepository = false;
-   
+
    setSelectionMode(Single);
 
    _dictBox = new KBabelDictBox(this, "dictbox");
@@ -229,16 +229,16 @@
     saveMarker(config);
 
     config->writeEntry( "ValidateMarkAsFuzzy", _markAsFuzzy );
-    config->writeEntry( "ValidateIgnoreFuzzy", _ignoreFuzzy ); 
+    config->writeEntry( "ValidateIgnoreFuzzy", _ignoreFuzzy );
 }
 
 
 void CatalogManagerView::restoreView( KConfig *config)
 {
     readMarker(config);
-    
+
     _markAsFuzzy = config->readBoolEntry( "ValidateMarkAsFuzzy", false );
-    _ignoreFuzzy = config->readBoolEntry( "ValidateIgnoreFuzzy", false ); 
+    _ignoreFuzzy = config->readBoolEntry( "ValidateIgnoreFuzzy", false );
 }
 
 void CatalogManagerView::setRMBMenuFile( QPopupMenu *m )
@@ -362,7 +362,7 @@
          }
       }
    }
-   
+
    checkSelected();
 }
 
@@ -576,7 +576,7 @@
          ,i18n("The Catalog Manager is still updating information about the files!\n"
 "If you continue, it will try to update all necessary files, however this can take "
 "a long time and may lead to wrong results. Please wait until all files are updated."),i18n("Warning")
-         ,i18n("Continue")) == KMessageBox::Cancel)
+         ,KStdGuiItem::cont()) == KMessageBox::Cancel)
       {
         return;
       }
@@ -603,7 +603,7 @@
          ,i18n("The Catalog Manager is still updating information about the files!\n"
 "If you continue, it will try to update all necessary files, however this can take "
 "a long time and may lead to wrong results. Please wait until all files are updated."),i18n("Warning")
-         ,i18n("Continue")) == KMessageBox::Cancel)
+         ,KStdGuiItem::cont()) == KMessageBox::Cancel)
       {
         return;
       }
@@ -1004,7 +1004,7 @@
       if ( !cvsItems.isEmpty( ) )
         cvshandler->execCVSCommand(cmd, cvsItems, templates);
     } else {
-      if ( templates && item->hasPot( ) ) 
+      if ( templates && item->hasPot( ) )
         cvsItem = item->potFile( );
       else if ( !templates && item->hasPo( ) )
         cvsItem = item->poFile( );
@@ -1044,7 +1044,7 @@
    for( it = childrenList.begin(); it != childrenList.end(); ++it )
    {
 	 CatManListItem* item = _fileList[(*it)];
-	 
+
 	 if( !item )
 	 {
 	    kdWarning(KBABEL_CATMAN) << "The file information not found, skipping" << endl;
@@ -1169,9 +1169,9 @@
 {
    CatManListItem* item=(CatManListItem*)selectedItem();
    if(!item) return;
-      
-   uint actionValue = NEEDS_PO * item->hasPo( ) + NEEDS_POT * item->hasPot( ) + 
-                      NEEDS_MARK * item->marked( ) + NEEDS_DIR * item->isDir( ) + 
+
+   uint actionValue = NEEDS_PO * item->hasPo( ) + NEEDS_POT * item->hasPot( ) +
+                      NEEDS_MARK * item->marked( ) + NEEDS_DIR * item->isDir( ) +
                       NEEDS_PO_CVS * validPORepository + NEEDS_POT_CVS * validPOTRepository;
 
    emit selectedChanged(actionValue);
@@ -1251,7 +1251,7 @@
    if(item && item->isFile() && item->hasPo() && !item->hasPot())
    {
       QString msg=i18n("Do you really want to delete the file %1?").arg(item->poFile());
-      if(KMessageBox::warningContinueCancel(this,msg,i18n("Warning"),i18n("Delete"))== KMessageBox::Continue)
+      if(KMessageBox::warningContinueCancel(this,msg,i18n("Warning"),KGuiItem( i18n("Delete"), "editdelete"))== KMessageBox::Continue)
       {
          if(!QFile::remove(item->poFile()))
          {
@@ -1286,7 +1286,7 @@
          _markerList.append(item->package());
       }
    }
-    
+
     checkSelected();
 }
 
@@ -1319,7 +1319,7 @@
          }
       }
    }
-    
+
     checkSelected();
 }
 
@@ -1347,7 +1347,7 @@
          item->setMarked(false);
       }
    }
-    
+
     checkSelected();
 }
 
@@ -1563,7 +1563,7 @@
 	if( _updateNesting == 0 ) emit updateFinished();
 	return;
     }
-    
+
     updateMarkerList();
 
    int files=_fileList.count()+_dirList.count();
@@ -2199,7 +2199,7 @@
         connect( this, SIGNAL( updateFinished() ), this, SLOT(buildTree() ) );
       }
    }
-   
+
    toggleColumn( COL_MARKER, _settings.flagColumn );
    toggleColumn( COL_FUZZY, _settings.fuzzyColumn );
    toggleColumn( COL_UNTRANS, _settings.untranslatedColumn );
@@ -2663,7 +2663,7 @@
 	{
 	    directoryChanged(current->poFile() );
 	}
-	
+
 	// check, if the item didn't get lost by the update in directoryChanged()
 	CatManListItem *new_current = static_cast<CatManListItem *>(currentItem());
         if (new_current == current)
@@ -2716,9 +2716,9 @@
 void CatalogManagerView::validate_internal( const QStringList& files, const KDataToolInfo &tool, const QString& )
 {
     if( files.isEmpty() ) return;
-    
+
     KDataTool* t = tool.createTool();
-    
+
     if( !t )
     {
 	KMessageBox::error( this, i18n("Can't instantiate a validation tool.\n"
@@ -2734,32 +2734,32 @@
 	_validateOptions = new ValidationOptions(_validateOptionsDlg);
 	_validateOptionsDlg->setMainWidget( _validateOptions );
 	_validateOptions->resize( _validateOptions->sizeHint() );
-	
+
 	// setup stored values
 	_validateOptions->markAsFuzzy->setChecked( _markAsFuzzy );
 	_validateOptions->ignoreFuzzy->setChecked( _ignoreFuzzy );
     }
-    
+
     if( _validateOptionsDlg->exec() != QDialog::Accepted )
     {
 	delete t;
-	
+
 	return;
     }
-        
+
     if( !_validateDialog )
     {
 	_validateDialog = new ValidateProgressDialog(_settings.ignoreURL, this);
 	connect( _validateDialog, SIGNAL( errorDoubleClicked(const QString,const int)),
 	    this, SLOT(showError( const QString, const int )));
     }
-    
+
     _markAsFuzzy = _validateOptions->markAsFuzzy->isChecked();
     _ignoreFuzzy = _validateOptions->ignoreFuzzy->isChecked();
-    
+
     _validateDialog->setMarkAsFuzzy(_markAsFuzzy);
     _validateDialog->setIgnoreFuzzy(_ignoreFuzzy);
-    
+
     QPtrList<CatManListItem> fileitems;
 
     for( QValueListConstIterator<QString> it=files.begin() ; it!=files.end() ; it++ )
@@ -2771,7 +2771,7 @@
     }
 
     _validateDialog->validate(tool, fileitems);
-    
+
     delete t;
 }
 
@@ -2783,19 +2783,19 @@
 	kdWarning() << "Can't find error package: " << package << endl;
 	return;
     }
-    
+
     emit gotoFileEntry( item->poFile(), package, num );
 }
 
 void CatalogManagerView::updateMarkerList()
 {
     QStringList newMarkers;
-    
+
     for( QStringList::Iterator it = _markerList.begin(); it != _markerList.end(); ++it ) {
         if( _fileList[ (*it) ] )
 	    newMarkers.append( (*it) );
     }
-    
+
     _markerList = newMarkers;
 }
 
diff -urN -x CVS kdesdk.orig/kbabel/common/kbabelfilter.desktop kdesdk/kbabel/common/kbabelfilter.desktop
--- kdesdk.orig/kbabel/common/kbabelfilter.desktop	Sun Feb 29 16:52:27 2004
+++ kdesdk/kbabel/common/kbabelfilter.desktop	Sun Apr  4 14:55:43 2004
@@ -20,6 +20,7 @@
 Comment[it]=Filtro KBabel
 Comment[ja]=KBabel フィルタ
 Comment[ms]=Penapis KBabel
+Comment[nb]=KBabel-filter
 Comment[nl]=KBabel-filter
 Comment[pl]=Filtr KBabel
 Comment[pt]=Filtro do KBabel
diff -urN -x CVS kdesdk.orig/kbabel/commonui/kbabel_validator.desktop kdesdk/kbabel/commonui/kbabel_validator.desktop
--- kdesdk.orig/kbabel/commonui/kbabel_validator.desktop	Sun Feb 29 16:52:29 2004
+++ kdesdk/kbabel/commonui/kbabel_validator.desktop	Sun Apr  4 14:55:45 2004
@@ -22,6 +22,7 @@
 Comment[it]=Strumento KDE per la gestione dati con KBabel
 Comment[ja]=KBabel 向け KDE データツール
 Comment[ms]=Alatan Data KDE untuk KBabel
+Comment[nb]=KDE dataverktøy for KBabel
 Comment[nl]=KDE Dataprogramma voor KBabel
 Comment[pl]=Narzędzie danych KDE dla KBabel
 Comment[pt]=Ferramenta de Dados do KDE para o KBabel
diff -urN -x CVS kdesdk.orig/kbabel/datatools/accelerators/kbabel_accelstool.desktop kdesdk/kbabel/datatools/accelerators/kbabel_accelstool.desktop
--- kdesdk.orig/kbabel/datatools/accelerators/kbabel_accelstool.desktop	Sun Feb 29 16:52:31 2004
+++ kdesdk/kbabel/datatools/accelerators/kbabel_accelstool.desktop	Sun Apr  4 14:55:47 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore dei tasti acceleratori per KBabel
 Name[ja]=KBabel 向けアクセラレータバリデーション
 Name[ms]=Pengesahan Kekunci Pintas untuk KBabel
+Name[nb]=Sjekk hurtigtastene for KBabel
 Name[nl]=Sneltoetsvalidatie voor KBabel
 Name[pl]=Sprawdzanie klawiszy skrótu w KBabel
 Name[pt]=Validação de Aceleradores para o KBabel
@@ -55,6 +56,7 @@
 Comment[it]=Controlla tasti acceleratori
 Comment[ja]=アクセラレータ検証
 Comment[ms]=Periksa Kekunci Pintas
+Comment[nb]=Sjekk hurtigtastene
 Comment[nl]=Sneltoetsen controleren
 Comment[pl]=Sprawdzenie klawiszy skrótu
 Comment[pt]=Verificação de Aceleradores
diff -urN -x CVS kdesdk.orig/kbabel/datatools/arguments/kbabel_argstool.desktop kdesdk/kbabel/datatools/arguments/kbabel_argstool.desktop
--- kdesdk.orig/kbabel/datatools/arguments/kbabel_argstool.desktop	Sun Feb 29 16:52:33 2004
+++ kdesdk/kbabel/datatools/arguments/kbabel_argstool.desktop	Sun Apr  4 14:55:49 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore argomenti per KBabel
 Name[ja]=KBabel 引数検証
 Name[ms]=Pengesahan Argumen untuk KBabel
+Name[nb]=Sjekk argumentene for KBabel
 Name[nl]=Argumentenvalidatie voor KBabel
 Name[pl]=Sprawdzenie argumentów w KBabel
 Name[pt]=Validação de Argumentos para o KBabel
@@ -55,6 +56,7 @@
 Comment[it]=Controlla argomenti
 Comment[ja]=引数検証
 Comment[ms]=Periksa Argumen
+Comment[nb]=Sjekk argumenter
 Comment[nl]=Argumenten controleren
 Comment[pl]=Sprawdzenie argumentów
 Comment[pt]=Verificação dos argumentos
diff -urN -x CVS kdesdk.orig/kbabel/datatools/context/kbabel_contexttool.desktop kdesdk/kbabel/datatools/context/kbabel_contexttool.desktop
--- kdesdk.orig/kbabel/datatools/context/kbabel_contexttool.desktop	Sun Feb 29 16:52:35 2004
+++ kdesdk/kbabel/datatools/context/kbabel_contexttool.desktop	Sun Apr  4 14:55:51 2004
@@ -18,6 +18,7 @@
 Name[it]=Validatore delle informazioni di contesto per KBabel
 Name[ja]=KBabel 訳文情報検証
 Name[ms]=Pengesahan Info Konteks Telah Diterjemah untuk KBabel
+Name[nb]=Sjekk av oversatt kontekstinformasjon for KBabel
 Name[nl]=Vertaalde contextinformatie-validatie voor KBabel
 Name[pl]=Sprawdzanie kontekstu tłumaczonej informacji dla KBabel
 Name[pt]=Validação da Informação de Contexto do KBabel
@@ -53,6 +54,7 @@
 Comment[it]=Cerca per informazioni di contesto tradotte
 Comment[ja]=訳されたコンテキスト情報を検索
 Comment[ms]=Cari Info Konteks Telah Diterjemah
+Comment[nb]=Se etter oversatt kontekstinformasjon
 Comment[nl]=Zoek naar vertaalde contextinformatie
 Comment[pl]=Sprawdzenie kontekstu tłumaczonej informacji
 Comment[pt]=Verificar a existência de traduções da informação de contexto
diff -urN -x CVS kdesdk.orig/kbabel/datatools/equations/kbabel_equationstool.desktop kdesdk/kbabel/datatools/equations/kbabel_equationstool.desktop
--- kdesdk.orig/kbabel/datatools/equations/kbabel_equationstool.desktop	Sun Feb 29 16:52:37 2004
+++ kdesdk/kbabel/datatools/equations/kbabel_equationstool.desktop	Sun Apr  4 14:55:53 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore delle equazioni per KBabel
 Name[ja]=KBabel 恒等性検証
 Name[ms]=Pengesahan Persamaan untuk KBabel
+Name[nb]=Likhetssjekk for KBabel
 Name[nl]=Vergelijkingenvalidatie voor KBabel
 Name[pl]=Sprawdzenie równań w KBabel
 Name[pt]=Validação de Equações para o KBabel
@@ -54,6 +55,7 @@
 Comment[it]=Controlla equazioni
 Comment[ja]= 恒等性を検証
 Comment[ms]=Periksa Persamaan
+Comment[nb]=Likhetssjekk
 Comment[nl]=Vergelijkingen controleren
 Comment[pl]=Sprawdzenie równań
 Comment[pt]=Verifica as equações
diff -urN -x CVS kdesdk.orig/kbabel/datatools/length/kbabel_lengthtool.desktop kdesdk/kbabel/datatools/length/kbabel_lengthtool.desktop
--- kdesdk.orig/kbabel/datatools/length/kbabel_lengthtool.desktop	Sun Feb 29 16:52:39 2004
+++ kdesdk/kbabel/datatools/length/kbabel_lengthtool.desktop	Sun Apr  4 14:55:55 2004
@@ -17,6 +17,7 @@
 Name[is]=Staðfestir á lengd þýddra skeyta fyrir KBabel
 Name[it]=Il validatore di KBabel per la lunghezza del messaggio tradotto
 Name[ja]=KBabel 翻訳メッセージ長検証
+Name[nb]=En sjekk for lengden for av oversatte strenger i KBabel
 Name[nl]=Vertaalde-tekstlengte-validatie voor KBabel
 Name[pl]=Sprawdzenie długości przetłumaczonego komunikatu w KBabel
 Name[pt]=Um validador do tamanho da mensagem traduzida para o KBabel
@@ -52,6 +53,7 @@
 Comment[is]=Athuga lengd þýddra skeyta
 Comment[it]=Controlla la lunghezza dei messaggi tradotti
 Comment[ja]=翻訳メッセージ長を検証
+Comment[nb]=Sjekk for lengden av oversatte strenger
 Comment[nl]=Controleer de lengte van de vertaalde tekst
 Comment[pl]=Sprawdzenie długości przetłumaczonego komunikatu
 Comment[pt]=Verificação do Tamanho da Mensagem Traduzida
diff -urN -x CVS kdesdk.orig/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop kdesdk/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop
--- kdesdk.orig/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop	Sun Feb 29 16:52:41 2004
+++ kdesdk/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop	Sun Apr  4 14:55:57 2004
@@ -18,6 +18,7 @@
 Name[it]=Controlla parole inglesi nelle stringhe tradotte in KBabel
 Name[ja]=KBabel 翻訳文字列内英語検証
 Name[ms]=Periksa rentetan mengandungi Bahasa Inggeris untuk KBabel
+Name[nb]=Sjekk for oversatte strenger som inneholder engelsk i KBabel
 Name[nl]=Controle op vertaalde tekst met Engelse termen voor KBabel
 Name[pl]=Sprawdzenie czy przetłumaczony komunikat zawiera angielskie słowa w KBabel
 Name[pt]=Verificação de mensagens traduzidas que contenham inglês para o KBabel
@@ -52,6 +53,7 @@
 Comment[is]=Þýðingar sem innihalda ensku
 Comment[it]=Traduzioni contenenti parole inglesi
 Comment[ja]=翻訳文字列内の英語
+Comment[nb]=Oversettelser som inneholder engelsk
 Comment[nl]=Vertalingen die Engels bevatten
 Comment[pl]=Sprawdzenie czy przetłumaczony komunikat zawiera angielskie słowa
 Comment[pt]=Traduções Que Contêm Inglês
diff -urN -x CVS kdesdk.orig/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop kdesdk/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop
--- kdesdk.orig/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop	Sun Feb 29 16:52:43 2004
+++ kdesdk/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop	Sun Apr  4 14:55:59 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore di KBabel per le forme plurali
 Name[ja]=KBabel 複数形検証
 Name[ms]=Pengesahan Bentuk Jama' untuk KBabel
+Name[nb]=Sjekk for flertallsformer for KBabel
 Name[nl]=Meervoudsvormenvalidatie voor KBabel
 Name[pl]=Sprawdzenie form liczby mnogiej w KBabel
 Name[pt]=Validação de Formas Plurais para o KBabel
@@ -55,6 +56,7 @@
 Comment[it]=Controlla forme plurali
 Comment[ja]=複数形を検証
 Comment[ms]=Periksa Bentuk Jama'
+Comment[nb]=Sjekk for flertallsformer
 Comment[nl]=Controleer de meervoudsvormen
 Comment[pl]=Sprawdzenie form liczby mnogiej
 Comment[pt]=Verificação de Formas Plurais
diff -urN -x CVS kdesdk.orig/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop kdesdk/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop
--- kdesdk.orig/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop	Sun Feb 29 16:52:45 2004
+++ kdesdk/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop	Sun Apr  4 14:56:01 2004
@@ -18,6 +18,7 @@
 Name[is]=Staðfesting greinamerkja fyrir KBabel
 Name[it]=Validatore della punteggiatura per KBabel
 Name[ja]=KBabel 句読点検証
+Name[nb]=Sjekk for tegnsetting for KBabel
 Name[nl]=Punctuatievalidatie voor KBabel
 Name[pl]=Sprawdzenie interpunkcji w KBabel
 Name[pt]=Validação de Pontuação para o KBabel
@@ -53,6 +54,7 @@
 Comment[is]=Athuga greinamerki
 Comment[it]=Controlla punteggiatura
 Comment[ja]=句読点の検証
+Comment[nb]=Sjekk tegnsetting
 Comment[nl]=Punctuatie controleren
 Comment[pl]=Sprawdzenie interpunkcji
 Comment[pt]=Verifica a pontuação
diff -urN -x CVS kdesdk.orig/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop kdesdk/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop
--- kdesdk.orig/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop	Sun Feb 29 16:52:47 2004
+++ kdesdk/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop	Sun Apr  4 14:56:03 2004
@@ -18,6 +18,7 @@
 Name[it]=Strumento di KBabel per mostrare/nascondere fuzzy
 Name[ja]=KBabel fuzzy 切替ツール
 Name[ms]=Alat Togol Kabur untuk KBabel
+Name[nb]=Slå av/på uklar-statusen i KBabel
 Name[nl]=Fuzzystatusomschakeling voor KBabel
 Name[pl]=Narzędzie do przełączania statusu wątpliwego komunikatu w KBabel
 Name[pt]=Classificação Global Aproximada para o KBabel
@@ -53,6 +54,7 @@
 Comment[it]=Imposta tutte le voci come fuzzy
 Comment[ja]=すべての fuzzy を設定
 Comment[ms]=Tetapkan Semua Kabur
+Comment[nb]=Angi alle strengene som uklare
 Comment[nl]=Alles fuzzy markeren
 Comment[pl]=Ustawia wszystkie komunikaty jako wątpliwe
 Comment[pt]=Coloca todas as mensagens como aproximadas
diff -urN -x CVS kdesdk.orig/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop kdesdk/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop
--- kdesdk.orig/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop	Sun Feb 29 16:52:49 2004
+++ kdesdk/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop	Sun Apr  4 14:56:05 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore di KBabel per le stringhe tradotte con spazi bianchi
 Name[ja]=KBabel 空白文字列検証
 Name[ms]=Rentetan diterjemah sebagai pengesah ruang kosong untuk KBabel
+Name[nb]=Sjekk for tomme strenger i KBabel
 Name[nl]=Tekst-vertaald-als-witruimte-validatie voor KBabel
 Name[pl]=Sprawdzenie czy napis jest przetłumaczony jako białe znaki w KBabel
 Name[pt]=Texto traduzido como espaço para o KBabel
@@ -55,6 +56,7 @@
 Comment[it]=Traduzioni con spazi bianchi
 Comment[ja]=空白変換
 Comment[ms]=Terjemahan Ruang Kosong
+Comment[nb]=Tomme strenger
 Comment[nl]=Lege vertalingen
 Comment[pl]=Tłumaczenia w postaci białych znaków
 Comment[pt]=Traduções de Espaços em Branco
diff -urN -x CVS kdesdk.orig/kbabel/datatools/xml/kbabel_xmltool.desktop kdesdk/kbabel/datatools/xml/kbabel_xmltool.desktop
--- kdesdk.orig/kbabel/datatools/xml/kbabel_xmltool.desktop	Sun Feb 29 16:52:51 2004
+++ kdesdk/kbabel/datatools/xml/kbabel_xmltool.desktop	Sun Apr  4 14:56:07 2004
@@ -19,6 +19,7 @@
 Name[it]=Validatore di KBabel per XML
 Name[ja]=KBabel XML 検証
 Name[ms]=Pengesah XML untuk KBabel
+Name[nb]=XML-sjekk i KBabel
 Name[nl]=XML-validatie voor KBabel
 Name[pl]=Sprawdzenie XML w KBabel
 Name[pt]=Validação de XML para o KBabel
@@ -55,6 +56,7 @@
 Comment[it]=Controlla le tag
 Comment[ja]=タグを検証
 Comment[ms]=Periksa Tag
+Comment[nb]=Sjekk merker
 Comment[nl]=Tags controleren
 Comment[pl]=Sprawdzenie znaczników XML
 Comment[pt]=Verificação das Marcas
diff -urN -x CVS kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_export.desktop kdesdk/kbabel/filters/gettext/kbabel_gettext_export.desktop
--- kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_export.desktop	Sun Feb 29 16:52:53 2004
+++ kdesdk/kbabel/filters/gettext/kbabel_gettext_export.desktop	Sun Apr  4 14:56:09 2004
@@ -20,6 +20,7 @@
 Name[it]=Filtro di esportazione di KBabel per GNU Gettext
 Name[ja]=KBabel GNU Gettext エクスポートフィルタ
 Name[ms]=Penapis Eksport KBabel GNU Gettext 
+Name[nb]=KBabel GNU Gettext eksportfilter
 Name[nl]=KBabel GNU Gettext Exportfilter
 Name[pl]=Filtr KBabel do eksportu do formatu GNU Gettext
 Name[pt]=Filtro de Exportação do Gettext da GNU para o KBabel
diff -urN -x CVS kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_import.desktop kdesdk/kbabel/filters/gettext/kbabel_gettext_import.desktop
--- kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_import.desktop	Sun Feb 29 16:52:55 2004
+++ kdesdk/kbabel/filters/gettext/kbabel_gettext_import.desktop	Sun Apr  4 14:56:11 2004
@@ -20,6 +20,7 @@
 Name[it]=Filtro di importazione di KBabel per GNU Gettext
 Name[ja]=KBabel GNU Gettext インポートフィルタ
 Name[ms]=Penapis Import KBabel GNU Gettext
+Name[nb]=KBabel GNU Gettext importfilter
 Name[nl]=KBabel GNU Gettext Importfilter
 Name[pl]=Filtr KBabel do importu z formatu GNU Gettext
 Name[pt]=Filtro de Importação de Gettext da GNU para o KBabel
diff -urN -x CVS kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_export.desktop kdesdk/kbabel/filters/linguist/kbabel_linguist_export.desktop
--- kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_export.desktop	Sun Feb 29 16:52:57 2004
+++ kdesdk/kbabel/filters/linguist/kbabel_linguist_export.desktop	Sun Apr  4 14:56:13 2004
@@ -20,6 +20,7 @@
 Name[it]=Filtro di esportazione di KBabel per Linguist
 Name[ja]=KBabel Linguist エクスポートフィルタ
 Name[ms]=Penapis Eksport KBabel Linguist
+Name[nb]=KBabel Linguist eksportfilter
 Name[nl]=KBabel Linguïst Exportfilter
 Name[pl]=Filtr KBabel do eksportu do formatu Linguist
 Name[pt]=Filtro de Exportação para Linguist para o KBabel
diff -urN -x CVS kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_import.desktop kdesdk/kbabel/filters/linguist/kbabel_linguist_import.desktop
--- kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_import.desktop	Sun Feb 29 16:52:59 2004
+++ kdesdk/kbabel/filters/linguist/kbabel_linguist_import.desktop	Sun Apr  4 14:56:15 2004
@@ -20,6 +20,7 @@
 Name[it]=Filtro di importazione di KBabel per Linguist
 Name[ja]=KBabel Linguist インポートフィルタ
 Name[ms]=Penapis Import KBabel Linguist
+Name[nb]=KBabel Linguist importfilter
 Name[nl]=KBabel Linguïst importfilter
 Name[pl]=Filtr KBabel do importu z formatu Linguist
 Name[pt]=Filtro de Importação de Linguist para o KBabel
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/headereditor.cpp kdesdk/kbabel/kbabel/headereditor.cpp
--- kdesdk.orig/kbabel/kbabel/headereditor.cpp	Fri May 16 13:49:10 2003
+++ kdesdk/kbabel/kbabel/headereditor.cpp	Tue Apr 13 17:46:58 2004
@@ -41,7 +41,7 @@
              : KDialogBase((QWidget*)0,name,false,QString::null, Ok|Cancel|Default|User1)
 {
    restoreSettings();
-   
+
    _catalog=cat;
    connect(_catalog,SIGNAL(signalFileOpened(bool)),this,SLOT(readHeader(bool)));
    connect(_catalog,SIGNAL(signalHeaderChanged()),this,SLOT(updateHeader()));
@@ -68,18 +68,18 @@
 void HeaderEditor::saveSettings()
 {
     KConfig* config = KGlobal::config();
-    
+
     KConfigGroupSaver saver(config, "HeaderEditor" );
-    
+
     config->writeEntry( "Size", _editor->size() );
 }
 
 void HeaderEditor::restoreSettings()
 {
     KConfig* config = KGlobal::config();
-    
+
     KConfigGroupSaver saver(config, "HeaderEditor" );
-    
+
     QSize defaultSize(350,250);
     _editorSize = config->readSizeEntry("Size", &defaultSize );
 }
@@ -111,9 +111,9 @@
 void HeaderEditor::slotUser1()
 {
    CatalogItem header;
-   
+
    bool error = !isValid();
-   
+
    if(error)
    {
       QString msg=i18n("<qt><p>This is not a valid header!</p>\n"
@@ -123,12 +123,12 @@
 
       return;
    }
-   
+
    header.setComment( _editor->commentEdit->text() );
    header.setMsgstr( _editor->headerEdit->text() );
 
    header=_catalog->updatedHeader(header,false);
-   
+
    _editor->headerEdit->setText(_catalog->header().msgstr().first());
    _editor->commentEdit->setText(_catalog->header().comment());
 }
@@ -155,7 +155,7 @@
     	 QString msg=i18n("<qt><p>This is not a valid header!</p>\n"
     		"<p>Please edit the header before updating!</p></qt>");
 
-         switch(KMessageBox::warningYesNo(this,msg,i18n("Warning"),i18n("Discard"),i18n("Edit")))
+         switch(KMessageBox::warningYesNo(this,msg,i18n("Warning"),KStdGuiItem::discard(),i18n("Edit")))
          {
             case KMessageBox::Yes:
             {
@@ -168,7 +168,7 @@
       }
 
       CatalogItem header;
-      
+
       header.setComment( _editor->commentEdit->text() );
       header.setMsgstr( _editor->headerEdit->text() );
 
@@ -182,7 +182,7 @@
 {
    // check the comments
    QStringList comments = QStringList::split('\n',_editor->commentEdit->text());
-   
+
    for( QStringList::Iterator it = comments.begin(); it != comments.end(); ++it )
    {
 	if( !(*it).startsWith("#") )
@@ -190,7 +190,7 @@
 	    return false;
 	}
    }
-   
+
    return true;
 }
 
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/kbabel.cpp kdesdk/kbabel/kbabel/kbabel.cpp
--- kdesdk.orig/kbabel/kbabel/kbabel.cpp	Wed Dec 17 10:08:31 2003
+++ kdesdk/kbabel/kbabel/kbabel.cpp	Tue Apr 13 17:46:58 2004
@@ -410,7 +410,7 @@
    action = KStdAction::findPrev(m_view, SLOT(findPrev()), actionCollection());
    action = KStdAction::replace(m_view, SLOT(replace()), actionCollection());
 
-   action = new KAction(i18n("C&lear"), "editclear", CTRL+SHIFT+Key_Delete, m_view, SLOT(clear()), actionCollection(), "clear" );
+   action = KStdAction::clear( m_view, SLOT(clear()), actionCollection(), "clear" );
 
    action = new KAction(i18n("Cop&y Msgid to Msgstr"), "msgid2msgstr", CTRL+Key_Space, m_view
                  ,SLOT(msgid2msgstr()), actionCollection(), "msgid2msgstr");
@@ -923,7 +923,7 @@
       switch(KMessageBox::warningYesNoCancel(this,
       i18n("The document contains unsaved changes.\n\
 Do you want to save your changes or discard them?"),i18n("Warning"),
-      i18n("&Save"),i18n("&Discard")))
+      KStdGuiItem::save(),KStdGuiItem::discard()))
       {
          case KMessageBox::Yes:
          {
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/kbabel.desktop kdesdk/kbabel/kbabel/kbabel.desktop
--- kdesdk.orig/kbabel/kbabel/kbabel.desktop	Sun Feb 29 16:53:01 2004
+++ kdesdk/kbabel/kbabel/kbabel.desktop	Wed Apr 28 14:39:38 2004
@@ -36,6 +36,7 @@
 GenericName[he]=כלי תרגום
 GenericName[hi]=अनुवाद उपकरण
 GenericName[hr]=Uslužni program za prevođenje
+GenericName[hsb]=Nastroj k přełožowanju
 GenericName[hu]=Fordítássegítő
 GenericName[is]=Þýðingaforrit
 GenericName[it]=Strumento per le traduzioni
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/kbabelview.cpp kdesdk/kbabel/kbabel/kbabelview.cpp
--- kdesdk.orig/kbabel/kbabel/kbabelview.cpp	Sat Dec 20 17:48:19 2003
+++ kdesdk/kbabel/kbabel/kbabelview.cpp	Tue Apr 13 17:46:58 2004
@@ -364,7 +364,7 @@
 
     msgstrEdit->setReadOnly(true);
     commentEdit->setReadOnly(true);
-    
+
     _toolsWidget->setEnabled(false);
 
     connect(msgstrEdit,SIGNAL(signalUndoCmd(KBabel::EditCommand*)),this,SLOT(forwardMsgstrEditCmd(KBabel::EditCommand*)));
@@ -943,7 +943,7 @@
    {
 	KSpellConfig* old_cfg = spell2.config;
 	KSpell* old_spell = spell2.kspell;
-	
+
 	spell2.config = new KSpellConfig(0L, "tempSpellConfig");
 	spell2.config->setNoRootAffix(_spellcheckSettings.noRootAffix);
 	spell2.config->setRunTogether(_spellcheckSettings.runTogether);
@@ -1301,7 +1301,7 @@
    {
       startSearch(true);
    }
-   
+
    _toolsWidget->setEnabled(true);
 }
 
@@ -1598,7 +1598,7 @@
 	    whatToDo=KMessageBox::warningContinueCancel(this,
 	     i18n("You don't have permission to write to file:\n%1\n"
 		  "Do you want to save to another file or cancel?").arg(_catalog->currentURL().url()),
-	     i18n("Error"),i18n("&Save"));
+	     i18n("Error"),KStdGuiItem::save());
 	     break;
 	 }
 	 case NO_PLUGIN:
@@ -1626,7 +1626,7 @@
 	    whatToDo=KMessageBox::warningContinueCancel(this,
 	     i18n("An error occurred while trying to write to file:\n%1\n"
 		  "Do you want to save to another file or cancel?").arg(_catalog->currentURL().url()),
-	     i18n("Error"),i18n("&Save"));
+	     i18n("Error"),KStdGuiItem::save());
 	     break;
 	 }
       }
@@ -1714,7 +1714,7 @@
 	  }
 
 	  // now ask, if the user wants to save to another file or cancel
-	  switch(KMessageBox::warningContinueCancel(this,message,i18n("Error"),i18n("&Save")))
+	  switch(KMessageBox::warningContinueCancel(this,message,i18n("Error"),KStdGuiItem::save()))
 	  {
 	     // save to another file
 	     case KMessageBox::Continue:
@@ -1857,7 +1857,7 @@
           {
               switch( KMessageBox::warningContinueCancel(this,
                     msg+i18n("\nDo you want to continue or cancel and edit the file again?")
-                    ,i18n("Warning"),i18n("Continue")) )
+                    ,i18n("Warning"),KStdGuiItem::cont()) )
               {
                     case KMessageBox::Continue:
                         returnCode=true;
@@ -1884,7 +1884,7 @@
             {
                 switch( KMessageBox::warningContinueCancel(this,
 		msg+i18n("\nDo you want to continue or cancel and edit the file again?")
-		,i18n("Warning"),i18n("Continue") ))
+		,i18n("Warning"),KStdGuiItem::cont() ))
                 {
                     case KMessageBox::Continue:
                         returnCode=true;
@@ -1976,7 +1976,7 @@
       switch(KMessageBox::warningYesNoCancel(this,
       i18n("The document contains unsaved changes.\n"
            "Do you want to save your changes or discard them?"),i18n("Warning"),
-      i18n("&Save"),i18n("&Discard")))
+      KStdGuiItem::save(),KStdGuiItem::discard()))
       {
 	 case KMessageBox::Yes:
 	 {
@@ -3078,7 +3078,7 @@
     DocPosition pos;
     pos.item=_currentIndex;
     pos.form=msgstrEdit->currentForm();
-    
+
     if( (int)pos.form+1 < _catalog->defaultNumberOfPluralForms()
 	&& _catalog->pluralForm(_currentIndex)==Gettext )
     {
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/mime/x-gettext.desktop kdesdk/kbabel/kbabel/mime/x-gettext.desktop
--- kdesdk.orig/kbabel/kbabel/mime/x-gettext.desktop	Thu Mar 18 14:50:20 2004
+++ kdesdk/kbabel/kbabel/mime/x-gettext.desktop	Sun Apr 25 01:31:23 2004
@@ -17,12 +17,13 @@
 Comment[fr]=Catalogue de messages GNU Gettext
 Comment[ga]=Catalóg teachtaireachtaí GNU Gettext
 Comment[hi]=जीएनयू गेटेक्सट सूचना सारिणी
+Comment[hr]=GNU Gettext katalog poruka
 Comment[hu]=GNU Gettext üzenetkatalógus
 Comment[is]=GNU Gettext Þýðingarskrá
 Comment[it]=Catalogo messaggi per GNU Gettext
 Comment[ja]=GNU Gettext メッセージカタログ
 Comment[ms]=Katalog Mesej GNU Gettext
-Comment[nds]=GNU Gettext-Narichtenkataloog
+Comment[nb]=Gnu Gettext meldingskatalog
 Comment[nl]=GNU Gettext-meldingencatalogus
 Comment[pl]=Katalog wiadomości GNU Gettext
 Comment[pt]=Catálogo de Mensagens do Gettext da GNU
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/kbabeldict_module.desktop kdesdk/kbabel/kbabeldict/kbabeldict_module.desktop
--- kdesdk.orig/kbabel/kbabeldict/kbabeldict_module.desktop	Sun Feb 29 16:53:07 2004
+++ kdesdk/kbabel/kbabeldict/kbabeldict_module.desktop	Sun Apr  4 14:56:19 2004
@@ -21,6 +21,7 @@
 Comment[it]=Modulo dizionario per KBabelDict
 Comment[ja]=KBabelDict 辞書モジュール
 Comment[ms]=Modul kamus untuk KBabelDict
+Comment[nb]=Ordbokmodul for KBabelDict
 Comment[nl]=Woordenboekmodule voor KBabelDict
 Comment[pl]=Moduł słownika dla KBabelDict
 Comment[pt]=Módulo de dicionário para o KBabelDict
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop kdesdk/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop	Sun Feb 29 16:53:09 2004
+++ kdesdk/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop	Sun Apr  4 14:56:21 2004
@@ -20,6 +20,7 @@
 Name[it]=Database traduzioni per KBabelDict
 Name[ja]=KBabelDict トランザクションデータベース
 Name[ms]=Pangkalan Data Penterjemahan KBabelDict
+Name[nb]=Oversettelsesdatabase for KBabelDict
 Name[nl]=Vertalingendatabase voor KBabelDict
 Name[pl]=Baza tłumaczeń dla KBabelDict
 Name[pt]=Base de Dados de Traduções do KBabelDict
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop kdesdk/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop	Sun Feb 29 16:53:11 2004
+++ kdesdk/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop	Sun Apr  4 14:56:23 2004
@@ -20,6 +20,7 @@
 Name[it]=Database v2 delle traduzioni per KBabelDict
 Name[ja]=KBabelDict トランザクションデータベース v2
 Name[ms]=Pangkalan Data Penterjemahan v2 KBabelDict
+Name[nb]=Oversettelsesdatabase v2 for KBabelDict
 Name[nl]=Vertalingendatabase versie2 voor KBabelDict
 Name[pl]=Baza tłumaczeń v2 dla KBabelDict
 Name[pt]=Base de Dados de Traduções v2 do KBabelDict
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop kdesdk/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop	Sun Feb 29 16:53:13 2004
+++ kdesdk/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop	Sun Apr  4 14:56:25 2004
@@ -20,6 +20,7 @@
 Name[it]=Modulo ausiliario PO per KBabelDict
 Name[ja]=KBabelDict 高機能 PO モジュール
 Name[ms]=Modul Auksillari PO untuk KBabelDict
+Name[nb]=PO-hjelpeordliste-modul for KBabelDict
 Name[nl]=Alternatieve PO-module voor KBabelDict
 Name[pl]=Moduł pomocniczego pliku PO dla KBabelDict
 Name[pt]=Módulo de PO Auxiliar para o KBabelDict
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop kdesdk/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop	Sun Feb 29 16:53:15 2004
+++ kdesdk/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop	Sun Apr  4 14:56:27 2004
@@ -20,6 +20,7 @@
 Name[it]=Modulo PO Compendium per KBabelDict
 Name[ja]=KBabelDict PO 要約モジュール
 Name[ms]=Modul Kompendium PO untuk KBabelDict
+Name[nb]=PO-kompendium-modul for KBabelDict
 Name[nl]=PO-samenvattingmodule voor KBabelDict
 Name[pl]=Moduł Kompendium PO dla KBabelDict
 Name[pt]=Módulo de Compêndio de PO para o KBabelDict
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop kdesdk/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop	Sun Feb 29 16:53:17 2004
+++ kdesdk/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop	Sun Apr  4 14:56:29 2004
@@ -20,6 +20,7 @@
 Name[it]=Modulo TMX Compendium per KBabelDict
 Name[ja]=KBabelDict TMX 要約モジュール
 Name[ms]=Modul Kompendium TMX untuk KBabelDict
+Name[nb]=TMX-kompendium-modul for KBabelDict
 Name[nl]=TMX-samenvattingmodule voor KBabelDict
 Name[pl]=Moduł Kompendium TMX dla KBabelDict
 Name[pt]=Módulo de Compêndio de TMX para o KBabelDict
diff -urN -x CVS kdesdk.orig/kbugbuster/gui/kbbmainwindow.cpp kdesdk/kbugbuster/gui/kbbmainwindow.cpp
--- kdesdk.orig/kbugbuster/gui/kbbmainwindow.cpp	Wed Dec  3 21:41:38 2003
+++ kdesdk/kbugbuster/gui/kbbmainwindow.cpp	Sun Apr 11 11:12:41 2004
@@ -344,13 +344,13 @@
 
     if (list.count() > 0)
     {
-       int ret = KMessageBox::questionYesNoList( this, i18n("List of pending commands"),
-                                              list, QString::null, KStdGuiItem::ok().text(), KStdGuiItem::clear().text() );
-       if ( ret == KMessageBox::No )
+       int ret = KMessageBox::questionYesNoList( this, i18n("List of pending commands:"),
+                                              list, QString::null, KStdGuiItem::clear(), KStdGuiItem::ok() );
+       if ( ret == KMessageBox::Yes )
        {
            // Ask for confirmation, it's too easy to click the wrong button in the above dlg box
            if ( KMessageBox::warningContinueCancel( this, i18n("Do you really want to delete all commands?"),
-                               i18n("Confirmation Required"), i18n("&Delete"), "clearcommands", true)
+                               i18n("Confirmation Required"), KGuiItem( i18n("&Delete"), "editdelete"), "clearcommands", true)
                    == KMessageBox::Continue )
                BugSystem::self()->clearCommands();
        }
diff -urN -x CVS kdesdk.orig/kbugbuster/gui/msginputdialog.cpp kdesdk/kbugbuster/gui/msginputdialog.cpp
--- kdesdk.orig/kbugbuster/gui/msginputdialog.cpp	Tue Oct  7 08:50:27 2003
+++ kdesdk/kbugbuster/gui/msginputdialog.cpp	Sun Apr 11 11:12:41 2004
@@ -1,4 +1,4 @@
-// $Id$
+// $Id$
 // (c) 2001, Cornelius Schumacher
 
 #include <ktextedit.h>
@@ -22,7 +22,7 @@
                                const Package &package, const QString &quotedMsg,
                                QWidget *parent)
   : KDialogBase(Plain,QString::null,User1|User2|Ok|Cancel,Ok,parent,0,false,
-                true,i18n("C&lear"),i18n( "&Edit Presets..." )),
+                true,KStdGuiItem::clear(),i18n( "&Edit Presets..." )),
     mBug( bug ),
     mPackage( package ),
     mType( type )
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/kcachegrind.desktop kdesdk/kcachegrind/kcachegrind/kcachegrind.desktop
--- kdesdk.orig/kcachegrind/kcachegrind/kcachegrind.desktop	Sun Feb 29 16:53:21 2004
+++ kdesdk/kcachegrind/kcachegrind/kcachegrind.desktop	Sun Apr 25 01:31:25 2004
@@ -26,11 +26,12 @@
 GenericName[et]=Profileerimisrakendus
 GenericName[fi]=Profiloijan käyttöliittymä
 GenericName[fr]=Interface de profilage
-GenericName[hi]=प्रोफाइलर फ्रन्टएण्ड
+GenericName[hi]=प्रोफ़ाइलर फ्रन्टएण्ड
 GenericName[hu]=Profilozó
 GenericName[is]=Myndrænt viðmót á afkastakönnuð
 GenericName[it]=Interfaccia grafica al Profiler
 GenericName[ja]=プロファイラフロントエンド
+GenericName[nb]=Grensesnitt for fremvisningen
 GenericName[nl]=Profiler-hulpprogramma
 GenericName[pl]=Interfejs do profilera
 GenericName[pt]=Interface de Profiler
@@ -59,6 +60,7 @@
 Comment[is]=Sjónræn framsetning gagna úr afkastakönnun
 Comment[it]=Visualizzazione delle prestazioni per il profiling dei dati
 Comment[ja]=パフォーマンスプロファイルデータを視覚化
+Comment[nb]=Vis informasjon om ytelse.
 Comment[nl]=Visualisatie van Performance Profiling Data
 Comment[pl]=Wizualizacja danych profilowania wydajności
 Comment[pt]=Visualização dos Dados de Análise de Performance
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/x-kcachegrind.desktop kdesdk/kcachegrind/kcachegrind/x-kcachegrind.desktop
--- kdesdk.orig/kcachegrind/kcachegrind/x-kcachegrind.desktop	Sun Feb 29 16:53:23 2004
+++ kdesdk/kcachegrind/kcachegrind/x-kcachegrind.desktop	Sun Apr 25 01:31:27 2004
@@ -10,7 +10,7 @@
 Comment[et]=Cachegrind/Callgrind profileerimistõmmis
 Comment[fi]=Cachegrind/Callgrind profiililista
 Comment[fr]=Dépôt de profil Cachegrind / Callgrind
-Comment[hi]=केश-ग्रिंड/काल-ग्रिंड प्रोफाइल डम्प
+Comment[hi]=केश-ग्रिंड/काल-ग्रिंड प्रोफ़ाइल डम्प
 Comment[hu]=Cachegrind/Callgrind teljesítményprofil-fájl
 Comment[is]=Niðurstaða afkastakönnunar á Cachegrind/Callgrind
 Comment[it]=Dump del profilo di Cachegrind/Callgrind
diff -urN -x CVS kdesdk.orig/kfile-plugins/ts/kfile_ts.desktop kdesdk/kfile-plugins/ts/kfile_ts.desktop
--- kdesdk.orig/kfile-plugins/ts/kfile_ts.desktop	Sun Feb 29 16:53:33 2004
+++ kdesdk/kfile-plugins/ts/kfile_ts.desktop	Sun Apr 25 01:31:29 2004
@@ -13,11 +13,12 @@
 Name[et]=Qt Linguisti faili info
 Name[fi]=Qt Linquist tiedoston tiedot
 Name[fr]=Fichier d'informations Qt Linguist
-Name[hi]=क्यूटी लिंग्विस्ट फाइल इन्फो
+Name[hi]=क्यूटी लिंग्विस्ट फ़ाइल इन्फो
 Name[hu]=Qt Linguist fájljellemzők
 Name[is]=Qt Linguist Skráarupplýsingar
 Name[it]=Informazioni file per Qt Linguist
 Name[ja]=Qt Linguist ファイル情報
+Name[nb]=Qt Linguist filinformasjon
 Name[nl]=Qt Linquïst-bestandsinformatie
 Name[pl]=Informacja pliku Qt Linguist
 Name[pt]=Informação do Ficheiro do Qt Linguist
diff -urN -x CVS kdesdk.orig/kompare/interfaces/kompareinterface.h kdesdk/kompare/interfaces/kompareinterface.h
--- kdesdk.orig/kompare/interfaces/kompareinterface.h	Tue Sep 23 22:14:00 2003
+++ kdesdk/kompare/interfaces/kompareinterface.h	Mon Apr  5 01:08:31 2004
@@ -34,11 +34,6 @@
 	virtual bool openDiff( const QString& diffOutput ) = 0;
 
 	/**
-	 * Open and parse the supplied diff output
-	 */
-	virtual bool openDiff( const QStringList& diffOutput ) = 0;
-
-	/**
 	 * Open and parse the diff3 file at url.
 	 */
 	virtual bool openDiff3( const KURL& diff3Url ) = 0;
diff -urN -x CVS kdesdk.orig/kompare/kompare_shell.cpp kdesdk/kompare/kompare_shell.cpp
--- kdesdk.orig/kompare/kompare_shell.cpp	Sun Jan 25 14:45:05 2004
+++ kdesdk/kompare/kompare_shell.cpp	Tue Apr 13 01:25:24 2004
@@ -46,7 +46,7 @@
 	m_textViewWidget( 0 )
 {
 	if ( !initialGeometrySet() )
-	resize( 800, 480 );
+	resize( 700, 480 );
 
 	// set the shell's ui resource file
 	setXMLFile("kompareui.rc");
@@ -196,11 +196,10 @@
 	QFile file;
 	file.open( IO_ReadOnly, stdin );
 	QTextStream stream( &file );
-	QStringList diff;
 
-	while (!stream.eof()) {
-		diff.append( stream.readLine() );
-	}
+	QString diff = stream.read();
+
+	file.close();
 
 	m_viewPart->openDiff( diff );
 
diff -urN -x CVS kdesdk.orig/kompare/komparepart/diffsettings.cpp kdesdk/kompare/komparepart/diffsettings.cpp
--- kdesdk.orig/kompare/komparepart/diffsettings.cpp	Mon Nov 17 00:29:40 2003
+++ kdesdk/kompare/komparepart/diffsettings.cpp	Tue Apr 13 01:25:24 2004
@@ -18,7 +18,23 @@
 #include <kconfig.h>
 #include "diffsettings.h"
 
-DiffSettings::DiffSettings( QWidget* parent ) : SettingsBase( parent )
+DiffSettings::DiffSettings( QWidget* parent )
+	: SettingsBase( parent ),
+	m_diffProgram( "" ),
+	m_linesOfContext( 0 ),
+	m_format( Kompare::Unified ),
+	m_largeFiles( false ),
+	m_ignoreWhiteSpace( false ),
+	m_ignoreEmptyLines( false ),
+	m_createSmallerDiff( false ),
+	m_ignoreChangesInCase( false ),
+	m_showCFunctionChange( false ),
+	m_convertTabsToSpaces( false ),
+	m_ignoreRegExp( false ),
+	m_ignoreRegExpText( "" ),
+	m_ignoreRegExpTextHistory( "" ),
+	m_recursive( false ),
+	m_newFiles( false )
 {
 }
 
diff -urN -x CVS kdesdk.orig/kompare/komparepart/kompare_part.cpp kdesdk/kompare/komparepart/kompare_part.cpp
--- kdesdk.orig/kompare/komparepart/kompare_part.cpp	Mon Jan 26 22:03:29 2004
+++ kdesdk/kompare/komparepart/kompare_part.cpp	Tue Apr 13 17:46:59 2004
@@ -206,25 +206,6 @@
 
 	m_info.mode = Kompare::ShowingDiff;
 
-	if ( m_modelList->parseDiffOutput( QStringList::split( "\n", diffOutput ) ) == 0 )
-	{
-		value = true;
-		m_modelList->show();
-		updateActions();
-		updateCaption();
-		updateStatus();
-	}
-	return value;
-}
-
-bool KomparePart::openDiff( const QStringList& diffOutput )
-{
-	bool value = false;
-
-	emit kompareInfo( &m_info );
-
-	m_info.mode = Kompare::ShowingDiff;
-
 	if ( m_modelList->parseDiffOutput( diffOutput ) == 0 )
 	{
 		value = true;
@@ -233,6 +214,7 @@
 		updateCaption();
 		updateStatus();
 	}
+
 	return value;
 }
 
@@ -421,22 +403,19 @@
 	KIO::NetAccess::removeTempFile( m_info.localDestination );
 }
 
-QStringList KomparePart::readFile()
+QString KomparePart::readFile()
 {
-	QStringList  lines;
 	QFile file( m_file );
-	file.open(  IO_ReadOnly );
+	file.open( IO_ReadOnly );
 	QTextStream stream( &file );
 
 	kdDebug(8103) << "Reading from m_file = " << m_file << endl;
-	while ( !stream.eof() )
-	{
-		lines.append( stream.readLine() );
-	}
+
+	QString contents = stream.read();
 
 	file.close();
 
-	return lines;
+	return contents;
 }
 
 bool KomparePart::openFile()
@@ -465,8 +444,7 @@
 	                                             m_info.localDestination,
 	                                             m_diffSettings, dlg );
 	dlg->setMainWidget( w );
-	KGuiItem saveGuiItem( i18n("Save") );
-	dlg->setButtonOK( saveGuiItem );
+	dlg->setButtonOK( KStdGuiItem::save() );
 
 	if( dlg->exec() ) {
 		w->saveOptions();
@@ -596,8 +574,8 @@
 		                i18n( "You have made changes to the destination.\n"
 		                      "Would you like to save them?" ),
 		                i18n(  "Save Changes?" ),
-		                i18n(  "Save" ),
-		                i18n(  "Discard" )
+		                KStdGuiItem::save(),
+		                KStdGuiItem::discard()
 		            );
 
 		if ( query == KMessageBox::Yes )
@@ -719,8 +697,8 @@
 	                i18n("You have made changes to the destination.\n"
 	                     "Would you like to save them?" ),
 	                i18n( "Save Changes?" ),
-	                i18n( "Save" ),
-	                i18n( "Discard" )
+	                KStdGuiItem::save(),
+	                KStdGuiItem::discard()
 	            );
 
 	if( query == KMessageBox::Cancel )
@@ -767,7 +745,7 @@
 }
 
 void KomparePart::slotSetModified( bool modified )
-{ 
+{
 	kdDebug() << "KomparePart::slotSetModified( " << modified << " );" << endl;
 	setModified( modified );
 	updateActions();
diff -urN -x CVS kdesdk.orig/kompare/komparepart/kompare_part.h kdesdk/kompare/komparepart/kompare_part.h
--- kdesdk.orig/kompare/komparepart/kompare_part.h	Mon Jan 26 22:03:29 2004
+++ kdesdk/kompare/komparepart/kompare_part.h	Mon Apr  5 01:08:31 2004
@@ -96,9 +96,6 @@
 	/** Added on request of Harald Fernengel */
 	virtual bool openDiff( const QString& diffOutput );
 
-	/** Open and parse the diff output */
-	virtual bool openDiff( const QStringList& diffOutput );
-
 	/** Open and parse the diff3 file at diff3Url */
 	virtual bool openDiff3( const KURL& diff3URL );
 
@@ -175,7 +172,7 @@
 	virtual bool openFile();
 	virtual bool saveFile() { return true; };
 	// This will read the m_file file and return the lines
-	QStringList readFile();
+	QString readFile();
 
 	// patchFile
 	bool patchFile(KURL&);
diff -urN -x CVS kdesdk.orig/kompare/komparepart/kompareconnectwidget.cpp kdesdk/kompare/komparepart/kompareconnectwidget.cpp
--- kdesdk.orig/kompare/komparepart/kompareconnectwidget.cpp	Thu Jan  1 23:52:07 2004
+++ kdesdk/kompare/komparepart/kompareconnectwidget.cpp	Sat May  1 18:36:27 2004
@@ -105,11 +105,11 @@
 	{
 		int firstL = m_leftView->firstVisibleDifference();
 		int firstR = m_rightView->firstVisibleDifference();
-		int lastL = m_leftView->lastVisibleDifference();
-		int lastR = m_rightView->lastVisibleDifference();
+		int lastL  = m_leftView->lastVisibleDifference();
+		int lastR  = m_rightView->lastVisibleDifference();
 
 		int first = firstL < 0 ? firstR : QMIN( firstL, firstR );
-		int last = lastL < 0 ? lastR : QMAX( lastL, lastR );
+		int last  = lastL  < 0 ? lastR  : QMAX( lastL,  lastR );
 
 //		kdDebug(8106) << "    left: " << firstL << " - " << lastL << endl;
 //		kdDebug(8106) << "   right: " << firstR << " - " << lastR << endl;
@@ -142,6 +142,12 @@
 				int bl = leftRect.bottom();
 				int br = rightRect.bottom();
 
+				// Bah, stupid 16-bit signed shorts in that X crap...
+				tl = tl >= -32768 ? ( tl <=  32767 ? tl :  32767 ) : -32768;
+				tr = tr >= -32768 ? ( tr <=  32767 ? tr :  32767 ) : -32768;
+				bl = bl <=  32767 ? ( bl >= -32768 ? bl : -32768 ) :  32767;
+				br = br <=  32767 ? ( br >= -32768 ? br : -32768 ) :  32767;
+
 //				kdDebug(8106) << "drawing: " << tl << " " << tr << " " << bl << " " << br << endl;
 				QPointArray topBezier = makeTopBezier( tl, tr );
 				QPointArray bottomBezier = makeBottomBezier( bl, br );
@@ -156,9 +162,7 @@
 					p->drawPolyline( topBezier );
 					p->drawPolyline( bottomBezier );
 				}
-
 			}
-
 		}
 	}
 
@@ -174,11 +178,12 @@
 {
 	int l = 0;
 	int r = width();
+	int o = (int)((double)r*0.4); // 40% of width
 	QPointArray controlPoints;
 
-	if ( true )
+	if ( tl == tr )
 	{
-		controlPoints.setPoints( 4, l,tl, 20,tl, r-20,tr, r,tr );
+		controlPoints.setPoints( 4, l,tl, o,tl, r-o,tr, r,tr );
 		return controlPoints.cubicBezier();
 	}
 	else
@@ -192,11 +197,12 @@
 {
 	int l = 0;
 	int r = width();
+	int o = (int)((double)r*0.4); // 40% of width
 	QPointArray controlPoints;
 
-	if ( true )
+	if ( bl == br )
 	{
-		controlPoints.setPoints( 4, r,br, r-20,br, 20,bl, l,bl );
+		controlPoints.setPoints( 4, r,br, r-o,br, o,bl, l,bl );
 		return controlPoints.cubicBezier();
 	}
 	else
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparelistview.cpp kdesdk/kompare/komparepart/komparelistview.cpp
--- kdesdk.orig/kompare/komparepart/komparelistview.cpp	Sat Mar 27 17:03:57 2004
+++ kdesdk/kompare/komparepart/komparelistview.cpp	Tue Apr 13 01:25:24 2004
@@ -111,7 +111,7 @@
 		KompareListViewLineItem* lineItem = dynamic_cast<KompareListViewLineItem*>(item);
 		if( lineItem && lineItem->diffItemParent()->difference()->type() != Difference::Unchanged )
 			break;
-		item = item->itemAbove();
+		item = dynamic_cast<KompareListViewItem*>(item)->previousItem();
 	}
 
 	if( item )
@@ -194,7 +194,7 @@
 
 void KompareListView::setSelectedDifference( const Difference* diff, bool scroll )
 {
-	kdDebug(8104) << "KompareListView::setSelectedDifference(" << diff << ", " << scroll << ")" << endl;
+	kdDebug(8104) << "KompareListView::setSelectedDifference( diff = " << diff << ", scroll = " << scroll << ")" << endl;
 
 	if ( m_selectedDifference == diff )
 		return;
@@ -231,7 +231,7 @@
 
 void KompareListView::slotSetSelection( const DiffModel* model, const Difference* diff )
 {
-	kdDebug(8104) << "KompareListView::slotSetSelection( const DiffModel* model, const Difference* diff )" << endl;
+	kdDebug(8104) << "KompareListView::slotSetSelection( const DiffModel* model = " << model << ", const Difference* diff = " << diff << " )" << endl;
 
 	if( m_selectedModel && m_selectedModel == model ) {
 		slotSetSelection( diff );
@@ -245,6 +245,8 @@
 
 	m_itemDict.resize(model->differenceCount());
 
+	kdDebug(8104) << "Cleared " << (m_isSource ? "source" : "destination") << " view..." << endl;
+
 	QPtrListIterator<DiffHunk> hunkIt(model->hunks());
 
 	KompareListViewItem* item = 0;
@@ -270,6 +272,8 @@
 		}
 	}
 
+	kdDebug(8104) << "All are newed now..." << endl;
+
 	slotSetSelection( diff );
 }
 
@@ -333,27 +337,31 @@
 
 KompareListViewItem::KompareListViewItem( KompareListView* parent )
 	: QListViewItem( parent ),
-	m_scrollId( 0 )
+	m_scrollId( 0 ),
+	m_previousItem( 0 )
 {
 //	kdDebug(8104) << "Created KompareListViewItem with scroll id " << m_scrollId << endl;
 }
 
 KompareListViewItem::KompareListViewItem( KompareListView* parent, KompareListViewItem* after )
 	: QListViewItem( parent, after ),
-	m_scrollId( after->scrollId() + after->maxHeight() )
+	m_scrollId( after->scrollId() + after->maxHeight() ),
+	m_previousItem( after )
 {
 //	kdDebug(8104) << "Created KompareListViewItem with scroll id " << m_scrollId << endl;
 }
 
 KompareListViewItem::KompareListViewItem( KompareListViewItem* parent )
 	: QListViewItem( parent ),
-	m_scrollId( 0 )
+	m_scrollId( 0 ),
+	m_previousItem( 0 )
 {
 }
 
-KompareListViewItem::KompareListViewItem( KompareListViewItem* parent, KompareListViewItem* /*after*/ )
+KompareListViewItem::KompareListViewItem( KompareListViewItem* parent, KompareListViewItem* after )
 	: QListViewItem( parent ),
-	m_scrollId( 0 )
+	m_scrollId( 0 ),
+	m_previousItem( after )
 {
 }
 
@@ -426,6 +434,7 @@
 void KompareListViewDiffItem::setSelected( bool b )
 {
 	kdDebug(8104) << "KompareListViewDiffItem::setSelected( " << b << " )" << endl;
+//	kdDebug(8104) << kdBacktrace() << endl;
 	KompareListViewItem::setSelected( b );
 	QListViewItem* item = m_sourceItem->isVisible() ?
 	                      m_sourceItem->firstChild() :
@@ -580,10 +589,11 @@
 void KompareListViewLineItem::paintText( QPainter * p, const QColorGroup& /*cg*/, int column, int width, int align )
 #endif
 {
-	if ( column == COL_MAIN )
+	QString adjustedText;
+	switch( column )
 	{
+	case COL_MAIN:
 #if INLINE_DIFFERENCES
-		Command* c = m_text->commandsList()->first();
 		QString textChunk;
 		int offset = listView()->itemMargin();
 		unsigned int prevValue = 0;
@@ -599,36 +609,40 @@
 		}
 
 		p->fillRect( 0, 0, offset, height(), normalBrush );
-		for ( ; c; c = m_text->commandsList()->next() )
+		if ( !m_text->commandsList().isEmpty() )
 		{
-			textChunk = m_text->string().mid( prevValue, c->offset() - prevValue );
-//			kdDebug(8104) << "TextChunk   = \"" << textChunk << "\"" << endl;
-//			kdDebug(8104) << "c->offset() = " << c->offset() << endl;
-//			kdDebug(8104) << "prevValue   = " << prevValue << endl;
-			textChunk.replace( QRegExp( "\\t" ), kompareListView()->spaces() );
-			prevValue = c->offset();
-			if ( c->type() == Command::End )
-			{
-				QFont font( p->font() );
-				font.setBold( true );
-				p->setFont( font );
-//				p->setPen( Qt::blue );
-				brush = changeBrush;
-			}
-			else
+			Command* c = m_text->commandsList()->first();
+			for ( ; c; c = m_text->commandsList()->next() )
 			{
-				QFont font( p->font() );
-				font.setBold( false );
-				p->setFont( font );
-//				p->setPen( Qt::black );
-				brush = normalBrush;
+				textChunk = m_text->string().mid( prevValue, c->offset() - prevValue );
+//				kdDebug(8104) << "TextChunk   = \"" << textChunk << "\"" << endl;
+//				kdDebug(8104) << "c->offset() = " << c->offset() << endl;
+//				kdDebug(8104) << "prevValue   = " << prevValue << endl;
+				textChunk.replace( QRegExp( "\\t" ), kompareListView()->spaces() );
+				prevValue = c->offset();
+				if ( c->type() == Command::End )
+				{
+					QFont font( p->font() );
+					font.setBold( true );
+					p->setFont( font );
+//					p->setPen( Qt::blue );
+					brush = changeBrush;
+				}
+				else
+				{
+					QFont font( p->font() );
+					font.setBold( false );
+					p->setFont( font );
+//					p->setPen( Qt::black );
+					brush = normalBrush;
+				}
+				chunkWidth = p->fontMetrics().width( textChunk );
+				p->fillRect( offset, 0, chunkWidth, height(), brush );
+				p->drawText( offset, 0,
+				             chunkWidth, height(),
+				             align, textChunk );
+				offset += chunkWidth;
 			}
-			chunkWidth = p->fontMetrics().width( textChunk );
-			p->fillRect( offset, 0, chunkWidth, height(), brush );
-			p->drawText( offset, 0,
-			             chunkWidth, height(),
-			             align, textChunk );
-			offset += chunkWidth;
 		}
 		if ( prevValue < m_text->string().length() )
 		{
@@ -648,15 +662,22 @@
 		}
 		p->fillRect( offset, 0, width - offset, height(), normalBrush );
 #else
-		QString adjustedText = text( column );
+		adjustedText = text( column );
 		adjustedText.replace( QRegExp( "\\t" ), kompareListView()->spaces() );
 		p->drawText( listView()->itemMargin(), 0,
 		             width - listView()->itemMargin(), height(),
 		             align, adjustedText );
 #endif
-	}
-	else
-	{
+		break;
+	case COL_LINE_NO:
+#if INLINE_DIFFERENCES
+		p->fillRect( 0, 0, width, height(), bg );
+#endif
+		p->drawText( listView()->itemMargin(), 0,
+		             width - listView()->itemMargin(), height(),
+		             align, text( column ) );
+		break;
+	default:
 #if INLINE_DIFFERENCES
 		p->fillRect( 0, 0, width, height(), bg );
 #endif
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparelistview.h kdesdk/kompare/komparepart/komparelistview.h
--- kdesdk.orig/kompare/komparepart/komparelistview.h	Sun Nov  9 22:03:21 2003
+++ kdesdk/kompare/komparepart/komparelistview.h	Mon Apr  5 01:08:31 2004
@@ -54,12 +54,12 @@
 	int                  minScrollId();
 	int                  maxScrollId();
 
-	bool                 isSource() const { return m_isSource; };
-	ViewSettings*        settings() const { return m_settings; };
+	bool                 isSource() const { return m_isSource; }
+	ViewSettings*        settings() const { return m_settings; }
 
 	void setSelectedDifference( const Diff2::Difference* diff, bool scroll );
 
-	const QString& spaces() const { return m_spaces; };
+	const QString& spaces() const { return m_spaces; }
 
 public slots:
 	void slotSetSelection( const Diff2::DiffModel* model, const Diff2::Difference* diff );
@@ -83,8 +83,8 @@
 	void wheelEvent( QWheelEvent* e );
 	void contentsMousePressEvent ( QMouseEvent * e );
 	void contentsMouseDoubleClickEvent ( QMouseEvent* );
-	void contentsMouseReleaseEvent ( QMouseEvent * ) {};
-	void contentsMouseMoveEvent ( QMouseEvent * ) {};
+	void contentsMouseReleaseEvent ( QMouseEvent * ) {}
+	void contentsMouseMoveEvent ( QMouseEvent * ) {}
 
 private:
 	QPtrList<KompareListViewDiffItem> m_items;
@@ -108,14 +108,18 @@
 	KompareListViewItem( KompareListViewItem* parent, KompareListViewItem* after );
 
 	void paintFocus( QPainter* p, const QColorGroup& cg, const QRect& r );
-	int scrollId() { return m_scrollId; };
+	int scrollId() { return m_scrollId; }
 
 	virtual int maxHeight() = 0;
 
 	KompareListView* kompareListView() const;
 
+public:
+	KompareListViewItem* previousItem() const { return m_previousItem; }
+
 private:
 	int     m_scrollId;
+	KompareListViewItem* m_previousItem;
 };
 
 class KompareListViewDiffItem : public KompareListViewItem
@@ -128,7 +132,7 @@
 	void setSelected( bool b );
 	void applyDifference( bool apply );
 
-	Diff2::Difference* difference() { return m_difference; };
+	Diff2::Difference* difference() { return m_difference; }
 
 	int maxHeight();
 
@@ -183,11 +187,12 @@
 #endif
 
 	KompareListViewDiffItem* diffItemParent() const;
-#if INLINE_DIFFERENCES
 
 private:
+#if INLINE_DIFFERENCES
 	Diff2::DifferenceString* m_text;
 #endif
+	int m_lineNumber;
 };
 
 class KompareListViewBlankLineItem : public KompareListViewLineItem
diff -urN -x CVS kdesdk.orig/kompare/komparepart/kompareview.cpp kdesdk/kompare/komparepart/kompareview.cpp
--- kdesdk.orig/kompare/komparepart/kompareview.cpp	Thu Nov 13 16:38:27 2003
+++ kdesdk/kompare/komparepart/kompareview.cpp	Sat May  1 18:36:27 2004
@@ -257,14 +257,33 @@
 void KompareView::wheelEvent( QWheelEvent* e )
 {
 	// scroll lines...
-	if ( e->delta() < 0 ) // scroll back into file
+	if ( e->orientation() == Qt::Vertical )
 	{
-		m_vScroll->addLine();
+		if ( e->state() & Qt::ControlButton )
+			if ( e->delta() < 0 ) // scroll page down
+				m_vScroll->addPage();
+			else // scroll page up
+				m_vScroll->subtractPage();
+		else
+			if ( e->delta() < 0 ) // scroll line down
+				m_vScroll->addLine();
+			else // scroll line up
+				m_vScroll->subtractLine();
 	}
-	else // scroll forward into file
+	else
 	{
-		m_vScroll->subtractLine();
+		if ( e->state() & Qt::ControlButton )
+			if ( e->delta() < 0 ) // scroll page left
+				m_hScroll->addPage();
+			else // scroll page right
+				m_hScroll->subtractPage();
+		else
+			if ( e->delta() < 0 ) // scroll line left
+				m_hScroll->addLine();
+			else // scroll line right
+				m_hScroll->subtractLine();
 	}
+	e->accept();
 	m_zoom->repaint();
 }
 
diff -urN -x CVS kdesdk.orig/kompare/komparepart/viewsettings.cpp kdesdk/kompare/komparepart/viewsettings.cpp
--- kdesdk.orig/kompare/komparepart/viewsettings.cpp	Sat Nov 22 00:01:37 2003
+++ kdesdk/kompare/komparepart/viewsettings.cpp	Tue Apr 13 01:25:24 2004
@@ -28,7 +28,14 @@
 const QColor ViewSettings::default_addColor    (190, 190, 237);
 const QColor ViewSettings::default_appliedColor(237, 237, 190);
 
-ViewSettings::ViewSettings( QWidget* parent ) : SettingsBase( parent )
+ViewSettings::ViewSettings( QWidget* parent )
+	: SettingsBase( parent ),
+	m_removeColor( 0, 0, 0 ),
+	m_changeColor( 0, 0, 0),
+	m_addColor( 0, 0, 0),
+	m_appliedColor( 0, 0, 0),
+	m_scrollNoOfLines( 0 ),
+	m_tabToNumberOfSpaces( 0 )
 {
 }
 
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/difference.h kdesdk/kompare/libdiff2/difference.h
--- kdesdk.orig/kompare/libdiff2/difference.h	Sun Nov  9 22:03:21 2003
+++ kdesdk/kompare/libdiff2/difference.h	Mon Apr  5 01:08:31 2004
@@ -24,6 +24,7 @@
 #include <qptrlist.h>
 #endif
 #include <qstringlist.h>
+#include <qvaluevector.h>
 
 #if INLINE_DIFFERENCES
 #include <kdebug.h>
@@ -42,15 +43,15 @@
 
 public:
 	Command( enum Command::Type type, unsigned int offset )
-	{ m_type = type; m_offset = offset; };
-	~Command() {};
+	{ m_type = type; m_offset = offset; }
+	~Command() {}
 
 public:
-	enum Command::Type type()   const { return m_type;   };
-	unsigned int       offset() const { return m_offset; };
+	enum Command::Type type()   const { return m_type;   }
+	unsigned int       offset() const { return m_offset; }
 
-	void setType  ( enum Command::Type type ) { m_type   = type;   };
-	void setOffset( unsigned int offset )     { m_offset = offset; };
+	void setType  ( enum Command::Type type ) { m_type   = type;   }
+	void setOffset( unsigned int offset )     { m_offset = offset; }
 
 public:
 	enum Command::Type m_type;
@@ -65,7 +66,7 @@
 //		kdDebug(8101) << "DifferenceString::DifferenceString()" << endl;
 		m_string = QString::null;
 		m_commandsList = new QPtrList<Command>();
-	};
+	}
 	DifferenceString( const QString& string, QPtrList<Command>* commandsList = 0 )
 	{
 //		kdDebug(8101) << "DifferenceString::DifferenceString( " << string << ", " << commandsList << " )" << endl;
@@ -77,25 +78,25 @@
 	~DifferenceString()
 	{
 		delete m_commandsList;
-	};
+	}
 
 public:
 	const QString& string() const
 	{
 		return m_string;
-	};
+	}
 	QPtrList<Command>* commandsList()
 	{
 		return m_commandsList;
-	};
+	}
 	void setString( const QString& string )
 	{
 		m_string = string;
-	};
+	}
 	void setCommandsList( QPtrList<Command>* commandsList )
 	{
 		m_commandsList = commandsList;
-	};
+	}
 
 private:
 	QPtrList<Command>* m_commandsList;
@@ -104,9 +105,9 @@
 
 class LevenshteinTable;
 
-typedef QValueList<DifferenceString> DifferenceStringList;
-typedef QValueListConstIterator<DifferenceString> DifferenceStringConstIterator;
-typedef QValueListIterator<DifferenceString> DifferenceStringIterator;
+typedef QValueVector<DifferenceString> DifferenceStringList;
+typedef QValueVector<DifferenceString>::ConstIterator DifferenceStringConstIterator;
+typedef QValueVector<DifferenceString>::Iterator DifferenceStringIterator;
 
 #endif
 class Difference
@@ -119,34 +120,34 @@
 	~Difference();
 
 public:
-	enum Difference::Type type() const { return m_type; };
+	enum Difference::Type type() const { return m_type; }
 
-	int sourceLineNumber() const { return m_sourceLineNo; };
-	int destinationLineNumber() const { return m_destinationLineNo; };
+	int sourceLineNumber() const { return m_sourceLineNo; }
+	int destinationLineNumber() const { return m_destinationLineNo; }
 
 	int sourceLineCount() const;
 	int destinationLineCount() const;
 
 #if INLINE_DIFFERENCES
-	DifferenceString* sourceLineAt( int i ) { return &m_sourceLines[ i ]; };
-	DifferenceString* destinationLineAt( int i ) { return &m_destinationLines[ i ]; };
+	DifferenceString* sourceLineAt( int i ) { return &m_sourceLines[ i ]; }
+	DifferenceString* destinationLineAt( int i ) { return &m_destinationLines[ i ]; }
 #else
-	const QString& sourceLineAt( int i ) const { return m_sourceLines[ i ]; };
-	const QString& destinationLineAt( int i ) const { return m_destinationLines[ i ]; };
+	const QString& sourceLineAt( int i ) const { return m_sourceLines[ i ]; }
+	const QString& destinationLineAt( int i ) const { return m_destinationLines[ i ]; }
 #endif
 
 #if INLINE_DIFFERENCES
-	const DifferenceStringList sourceLines() const { return m_sourceLines; };
-	const DifferenceStringList destinationLines() const { return m_destinationLines; };
+	const DifferenceStringList sourceLines() const { return m_sourceLines; }
+	const DifferenceStringList destinationLines() const { return m_destinationLines; }
 #else
-	const QStringList sourceLines() const { return m_sourceLines; };
-	const QStringList destinationLines() const { return m_destinationLines; };
+	const QValueVector<QString> sourceLines() const { return m_sourceLines; }
+	const QValueVector<QString> destinationLines() const { return m_destinationLines; }
 #endif
 
 	void apply( bool apply );
-	bool applied() const { return m_applied; };
+	bool applied() const { return m_applied; }
 
-	void setType( enum Difference::Type type ) { m_type = type; };
+	void setType( enum Difference::Type type ) { m_type = type; }
 
 	void addSourceLine( QString line );
 	void addDestinationLine( QString line );
@@ -166,8 +167,8 @@
 	DifferenceStringList  m_sourceLines;
 	DifferenceStringList  m_destinationLines;
 #else
-	QStringList           m_sourceLines;
-	QStringList           m_destinationLines;
+	QValueVector<QString> m_sourceLines;
+	QValueVector<QString> m_destinationLines;
 #endif
 
 	bool                  m_applied;
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/komparemodellist.cpp kdesdk/kompare/libdiff2/komparemodellist.cpp
--- kdesdk.orig/kompare/libdiff2/komparemodellist.cpp	Thu Apr  1 18:28:34 2004
+++ kdesdk/kompare/libdiff2/komparemodellist.cpp	Tue Apr 13 01:25:24 2004
@@ -88,7 +88,7 @@
 {
 }
 
-bool KompareModelList::isDirectory( const QString& url )
+bool KompareModelList::isDirectory( const QString& url ) const
 {
 	QFileInfo fi( url );
 	if ( fi.isDir() )
@@ -97,7 +97,7 @@
 		return false;
 }
 
-bool KompareModelList::isDiff( const QString& mimeType )
+bool KompareModelList::isDiff( const QString& mimeType ) const
 {
 	if ( mimeType == "text/x-diff" )
 		return true;
@@ -317,20 +317,30 @@
 					list.append( ( *it ).string() );
 				}
 #else
-				list += diff->destinationLines();
+				QValueVector<QString>::ConstIterator it = diff->destinationLines().begin();
+				QValueVector<QString>::ConstIterator end = diff->destinationLines().end();
+				for ( ; it != end; ++it )
+				{
+					list.append( *it );
+				}
 #endif
 			}
 			else
 			{
 #if INLINE_DIFFERENCES
-				QValueListConstIterator<DifferenceString> it = diff->sourceLines().begin();
-				QValueListConstIterator<DifferenceString> end = diff->sourceLines().end();
+				DifferenceStringConstIterator it = diff->sourceLines().begin();
+				DifferenceStringConstIterator end = diff->sourceLines().end();
 				for ( ; it != end; ++it )
 				{
 					list.append( ( *it ).string() );
 				}
 #else
-				list += diff->sourceLines();
+				QValueVector<QString>::ConstIterator it = diff->sourceLines().begin();
+				QValueVector<QString>::ConstIterator end = diff->sourceLines().end();
+				for ( ; it != end; ++it )
+				{
+					list.append( *it );
+				}
 #endif
 			}
 		}
@@ -339,7 +349,7 @@
 	// kdDebug( 8101 ) << "Everything: " << endl << list.join( "\n" ) << endl;
 
 	if( list.count() > 0 )
-		*stream << list.join( "\n" ) << "\n";
+		*stream << list.join( "" );
 
 	temp->close();
 	if( temp->status() != 0 ) {
@@ -446,17 +456,44 @@
 	}
 }
 
-QStringList KompareModelList::readFile( const QString& fileName )
+QStringList KompareModelList::split( const QString& fileContents )
+{
+	QString contents = fileContents;
+	QStringList list;
+
+	int pos = 0, oldpos = 0;
+	// split that does not strip the split char
+#ifdef QT_OS_MAC
+	const char split = '\r';
+#else
+	const char split = '\n';
+#endif
+	while ( ( pos = contents.find( split, oldpos ) ) >= 0 )
+	{
+		list.append( contents.mid( oldpos, pos - oldpos + 1 ) );
+		oldpos = pos + 1;
+	}
+
+	if ( contents.length() > oldpos )
+	{
+		list.append( contents.right( contents.length() - oldpos ) );
+	}
+
+	return list;
+}
+
+QString KompareModelList::readFile( const QString& fileName ) const
 {
+	QStringList list;
+
 	QFile file( fileName );
 	file.open( IO_ReadOnly );
 
 	QTextStream stream( &file );
-	QStringList contents;
 
-	while (!stream.eof()) {
-		contents.append( stream.readLine() );
-	}
+	QString contents = stream.read();
+
+	file.close();
 
 	return contents;
 }
@@ -468,7 +505,7 @@
 	if ( diffFile.isEmpty() )
 		return false;
 
-	QStringList diff = readFile( diffFile );
+	QString diff = readFile( diffFile );
 
 	clear(); // Clear the current models
 
@@ -520,13 +557,10 @@
 	{
 		QTextStream* stream = m_diffTemp->textStream();
 
-		QStringList output = m_diffProcess->diffOutput();
-		for ( QStringList::ConstIterator it = output.begin(); it != output.end(); ++it )
-		{
-			*stream << (*it) << "\n";
-		}
+		*stream << m_diffProcess->diffOutput();
 
 		m_diffTemp->close();
+
 		if( m_diffTemp->status() != 0 )
 		{
 			emit error( i18n( "Could not write to the temporary file." ) );
@@ -774,14 +808,17 @@
 	emit applyAllDifferences( apply );
 }
 
-int KompareModelList::parseDiffOutput( const QStringList& lines )
+int KompareModelList::parseDiffOutput( const QString& diff )
 {
 	kdDebug(8101) << "KompareModelList::parseDiffOutput" << endl;
+
+	QStringList diffLines = split( diff );
+
 	Parser* parser = new Parser( this );
-	m_models = parser->parse( lines );
+	m_models = parser->parse( diffLines );
 
 	m_info->generator = parser->generator();
-	m_info->format = parser->format();
+	m_info->format    = parser->format();
 
 	delete parser;
 
@@ -808,13 +845,15 @@
 
 	bool result = false;
 	DiffModel* model;
-	QFile file;
+
+	QString fileContents;
 
 	DiffModelList* models = m_models;
 	m_models = new DiffModelList();
+
 	if ( fi.isDir() )
 	{ // is a dir
-		QDir dir( localURL, QString::null, QDir::Name|QDir::DirsFirst, QDir::All );
+//		QDir dir( localURL, QString::null, QDir::Name|QDir::DirsFirst, QDir::All );
 		QPtrListIterator<DiffModel> it( *models );
 		for ( ; it.current() != 0; ++it )
 		{
@@ -824,40 +863,27 @@
 			if ( !filename.startsWith( localURL ) )
 				filename.prepend( localURL );
 			QFileInfo fi2( filename );
-			QStringList lines;
 			if ( fi2.exists() )
 			{
 				kdDebug(8101) << "Reading from: " << filename << endl;
-				file.setName( filename );
-				file.open( IO_ReadOnly );
-				QTextStream stream( &file );
-				while ( !stream.eof() )
-				{
-					lines.append( stream.readLine() );
-				}
-				file.close();
-				result = blendFile( model, lines );
+				fileContents = readFile( filename );
+				result = blendFile( model, fileContents );
 			}
 			else
 			{
 				kdDebug(8101) << "File " << filename << " does not exist !" << endl;
 				kdDebug(8101) << "Assume empty file !" << endl;
-				result = blendFile( model, lines );
+				fileContents.truncate( 0 );
+				result = blendFile( model, fileContents );
 			}
 		}
 	}
 	else if ( fi.isFile() )
 	{ // is a file
-		QFile file( localURL );
-		file.open( IO_ReadOnly );
-		QTextStream stream( &file );
-		QStringList lines;
-		while ( !stream.eof() )
-		{
-			lines.append( stream.readLine() );
-		}
+		kdDebug(8101) << "Reading from: " << localURL << endl;
+		fileContents = readFile( localURL );
 
-		result = blendFile( models->at( 0 ), lines );
+		result = blendFile( models->at( 0 ), fileContents );
 	}
 
 	delete models; // Hope it does not delete the models, just the container
@@ -865,7 +891,7 @@
 	return result;
 }
 
-bool KompareModelList::blendFile( DiffModel* model, const QStringList& lines )
+bool KompareModelList::blendFile( DiffModel* model, const QString& fileContents )
 {
 	if ( !model )
 	{
@@ -885,6 +911,8 @@
 
 	newModel->addHunk( newHunk );
 
+	QStringList lines = split( fileContents );
+
 	QStringList::ConstIterator it  = lines.begin();
 	QStringList::ConstIterator end = lines.end();
 
@@ -927,7 +955,7 @@
 				{
 					kdDebug(8101) << "Conflict: SourceLine = " << srcLineNo << ": " << *it << endl;
 #if INLINE_DIFFERENCES
-					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
+					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i )->string() << endl;
 #else
 					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
 #endif
@@ -936,7 +964,7 @@
 				}
 				kdDebug(8101) << "SourceLine = " << srcLineNo << ": " << *it << endl;
 #if INLINE_DIFFERENCES
-				kdDebug(8101) << "DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
+				kdDebug(8101) << "DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i )->string() << endl;
 #else
 				kdDebug(8101) << "DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
 #endif
@@ -970,7 +998,11 @@
 #endif
 				{
 					kdDebug(8101) << "Conflict: SourceLine = " << srcLineNo << ": " << *it << endl;
+#if INLINE_DIFFERENCES
+					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i )->string() << endl;
+#else
 					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
+#endif
 					conflict = true;
 					break;
 				}
@@ -1015,7 +1047,11 @@
 #endif
 				{
 					kdDebug(8101) << "Conflict: SourceLine = " << srcLineNo << ": " << *it << endl;
+#if INLINE_DIFFERENCES
+					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i )->string() << endl;
+#else
 					kdDebug(8101) << "Conflict: DiffLine   = " << diff->sourceLineNumber() + i << ": " << diff->sourceLineAt( i ) << endl;
+#endif
 					conflict = true;
 					break;
 				}
@@ -1221,7 +1257,7 @@
 	}
 }
 
-bool KompareModelList::hasPrevModel()
+bool KompareModelList::hasPrevModel() const
 {
 	kdDebug(8101) << "KompareModelList::hasPrevModel()" << endl;
 
@@ -1236,7 +1272,7 @@
 	return false;
 }
 
-bool KompareModelList::hasNextModel()
+bool KompareModelList::hasNextModel() const
 {
 	kdDebug(8101) << "KompareModelList::hasNextModel()" << endl;
 
@@ -1250,7 +1286,7 @@
 	return false;
 }
 
-bool KompareModelList::hasPrevDiff()
+bool KompareModelList::hasPrevDiff() const
 {
 //	kdDebug(8101) << "KompareModelList::hasPrevDiff()" << endl;
 	int index = m_selectedModel->diffIndex();
@@ -1272,7 +1308,7 @@
 	return false;
 }
 
-bool KompareModelList::hasNextDiff()
+bool KompareModelList::hasNextDiff() const
 {
 //	kdDebug(8101) << "KompareModelList::hasNextDiff()" << endl;
 	int index = m_selectedModel->diffIndex();
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/komparemodellist.h kdesdk/kompare/libdiff2/komparemodellist.h
--- kdesdk.orig/kompare/libdiff2/komparemodellist.h	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/komparemodellist.h	Mon Apr  5 01:08:31 2004
@@ -69,7 +69,7 @@
 	bool saveDestination( const DiffModel* model );
 
 	// This parses the difflines and creates new models
-	int parseDiffOutput( const QStringList& lines );
+	int parseDiffOutput( const QString& diff );
 
 	// Call this to emit the signals to the rest of the "world" to show the diff
 	void show();
@@ -111,7 +111,7 @@
 	void clear();
 
 protected:
-	bool blendFile( DiffModel* model, const QStringList& lines );
+	bool blendFile( DiffModel* model, const QString& lines );
 
 signals:
 	void status( Kompare::Status status );
@@ -159,14 +159,16 @@
 	void slotFileChanged( const QString& );
 
 private: // Helper methods
-	bool isDirectory( const QString& url );
-	bool isDiff( const QString& mimetype );
-	QStringList readFile( const QString& fileName );
-
-	bool hasPrevModel();
-	bool hasNextModel();
-	bool hasPrevDiff();
-	bool hasNextDiff();
+	bool isDirectory( const QString& url ) const;
+	bool isDiff( const QString& mimetype ) const;
+	QString readFile( const QString& fileName ) const;
+
+	bool hasPrevModel() const;
+	bool hasNextModel() const;
+	bool hasPrevDiff() const;
+	bool hasNextDiff() const;
+
+	QStringList split( const QString& diff );
 
 private:
 	KTempFile*            m_diffTemp;
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/kompareprocess.cpp kdesdk/kompare/libdiff2/kompareprocess.cpp
--- kdesdk.orig/kompare/libdiff2/kompareprocess.cpp	Fri Jan  2 01:09:16 2004
+++ kdesdk/kompare/libdiff2/kompareprocess.cpp	Mon Apr  5 01:08:31 2004
@@ -228,12 +228,5 @@
 	emit diffHasFinished( normalExit() && exitStatus() != 0 );
 }
 
-const QStringList KompareProcess::diffOutput()
-{
-//	kdDebug(8101) << "StdOut: " << m_stdout << endl;
-//	kdDebug(8101).flush();
-	return QStringList::split( "\n", m_stdout );
-}
-
 #include "kompareprocess.moc"
 
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/kompareprocess.h kdesdk/kompare/libdiff2/kompareprocess.h
--- kdesdk.orig/kompare/libdiff2/kompareprocess.h	Sat Nov 22 00:01:37 2003
+++ kdesdk/kompare/libdiff2/kompareprocess.h	Mon Apr  5 01:08:31 2004
@@ -36,9 +36,9 @@
 
 	bool start();
 
-	const QStringList  diffOutput();
-	QString            stdOut()       { return m_stdout; };
-	QString            stdErr()       { return m_stderr; };
+	QString diffOutput() { return m_stdout; };
+	QString stdOut()     { return m_stdout; };
+	QString stdErr()     { return m_stderr; };
 
 signals:
 	void diffHasFinished( bool finishedNormally );
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/parser.cpp kdesdk/kompare/libdiff2/parser.cpp
--- kdesdk.orig/kompare/libdiff2/parser.cpp	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/parser.cpp	Tue Apr 13 01:25:24 2004
@@ -34,35 +34,54 @@
 {
 }
 
-DiffModelList* Parser::parse( const QString& diff )
+int Parser::cleanUpCrap( QStringList& diffLines )
 {
-//	kdDebug(8101) << "DiffOutput: " << diff << endl;
-	/* Just split the QString and call the other parse method */
-	return Parser::parse( QStringList::split( diff, "\n" ) );
-}
+	QStringList::Iterator it = diffLines.begin();
 
-DiffModelList* Parser::parse( const QStringList& diff )
-{
-//	kdDebug(8101) << "DiffOutput: " << diff.join("\n") << endl;
+	int nol = 0;
 
+	for ( ; it != diffLines.end(); ++it )
+	{
+		if ( (*it).startsWith( "\\ No newline" ) )
+		{
+			--it;
+			QString temp = *it;
+			temp.truncate( temp.find( '\n' ) );
+			*it = temp;
+			++it;
+			it = diffLines.remove( it );
+			// correcting the advance of the iterator because of the remove
+			--it;
+			++nol;
+		}
+	}
+
+	return nol;
+} 
+
+DiffModelList* Parser::parse( QStringList& diffLines )
+{
 	/* Basically determine the generator then call the parse method */
 	ParserBase* parser;
 
-	m_generator = determineGenerator( diff );
+	m_generator = determineGenerator( diffLines );
+
+	int nol = cleanUpCrap( diffLines );
+	kdDebug(8101) << "Cleaned up " << nol << " line(s) of crap from the diff..." << endl;
 
 	switch( m_generator )
 	{
 	case Kompare::CVSDiff :
 		kdDebug(8101) << "It is a CVS generated diff..." << endl;
-		parser = new CVSDiffParser( m_list, diff );
+		parser = new CVSDiffParser( m_list, diffLines );
 		break;
 	case Kompare::Diff :
 		kdDebug(8101) << "It is a diff generated diff..." << endl;
-		parser = new DiffParser( m_list, diff );
+		parser = new DiffParser( m_list, diffLines );
 		break;
 	case Kompare::Perforce :
 		kdDebug(8101) << "It is a Perforce generated diff..." << endl;
-		parser = new PerforceParser( m_list, diff );
+		parser = new PerforceParser( m_list, diffLines );
 		break;
 	default:
 		// Nothing to delete, just leave...
@@ -91,23 +110,25 @@
 enum Kompare::Generator Parser::determineGenerator( const QStringList& diffLines )
 {
 	// Shit have to duplicate some code with this method and the ParserBase derived classes
-	QStringList::ConstIterator it = diffLines.begin();
+	QStringList::ConstIterator it           = diffLines.begin();
+	QStringList::ConstIterator diffLinesEnd = diffLines.end();
+
+	const QString cvsDiff     ( "Index: " );
+	const QString perforceDiff( "==== " );
 
-	QRegExp cvsDiffRE     ( "^Index: " );
-	QRegExp perforceDiffRE( "^==== " );
-	while (  it != diffLines.end() )
+	for (  ; it != diffLinesEnd; ++it )
 	{
-		if ( ( *it ).find( cvsDiffRE, 0 ) == 0 )
+		kdDebug(8101) << "Line: \"" << *it << "\""  << endl;
+		if ( ( *it ).startsWith( cvsDiff ) )
 		{
 			kdDebug(8101) << "Diff is a CVSDiff" << endl;
 			return Kompare::CVSDiff;
 		}
-		else if ( ( *it ).find( perforceDiffRE, 0 ) == 0 )
+		else if ( ( *it ).startsWith( perforceDiff ) )
 		{
 			kdDebug(8101) << "Diff is a Perforce Diff" << endl;
 			return Kompare::Perforce;
 		}
-		++it;
 	}
 
 	kdDebug(8101) << "We'll assume it is a diff Diff" << endl;
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/parser.h kdesdk/kompare/libdiff2/parser.h
--- kdesdk.orig/kompare/libdiff2/parser.h	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/parser.h	Mon Apr  5 01:08:31 2004
@@ -34,8 +34,7 @@
 	~Parser();
 
 public:
-	DiffModelList* parse( const QString& diff );
-	DiffModelList* parse( const QStringList& diff );
+	DiffModelList* parse( QStringList& diffLines );
 
 	enum Kompare::Generator generator() const { return m_generator; };
 	enum Kompare::Format    format() const    { return m_format; };
@@ -44,6 +43,8 @@
 	/** Which program was used to generate the output */
 	enum Kompare::Generator determineGenerator( const QStringList& diffLines );
 
+	int cleanUpCrap( QStringList& diffLines );
+
 private:
 	enum Kompare::Generator m_generator;
 	enum Kompare::Format    m_format;
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/parserbase.cpp kdesdk/kompare/libdiff2/parserbase.cpp
--- kdesdk.orig/kompare/libdiff2/parserbase.cpp	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/parserbase.cpp	Mon Apr  5 01:08:31 2004
@@ -510,6 +510,17 @@
 	return false;
 }
 
+bool ParserBase::matchesUnifiedHunkLine( QString line ) const
+{
+	static const QChar context( ' ' );
+	static const QChar added  ( '+' );
+	static const QChar removed( '-' );
+
+	QChar first = line[0];
+
+	return ( first == context || first == added || first == removed );
+}
+
 bool ParserBase::parseUnifiedHunkBody()
 {
 //	kdDebug(8101) << "ParserBase::parseUnifiedHunkBody" << endl;
@@ -528,31 +539,38 @@
 	DiffHunk* hunk = new DiffHunk( linenoA, linenoB, function );
 	m_currentModel->addHunk( hunk );
 
-	while( m_diffIterator != m_diffLines.end() && m_unifiedHunkBodyLine.exactMatch( *m_diffIterator ) )
+	const QStringList::ConstIterator m_diffLinesEnd = m_diffLines.end();
+
+	const QString context = QString( " " );
+	const QString added   = QString( "+" );
+	const QString removed = QString( "-" );
+
+	while( m_diffIterator != m_diffLinesEnd && matchesUnifiedHunkLine( *m_diffIterator ) )
 	{
 		Difference* diff = new Difference( linenoA, linenoB );
 		hunk->add( diff );
 
-		if( m_unifiedHunkBodyLine.cap( 1 ) == " " )
+		if( (*m_diffIterator).startsWith( context ) )
 		{	// context
-			for( ; m_diffIterator != m_diffLines.end() && m_unifiedHunkBodyContext.exactMatch( *m_diffIterator ); ++m_diffIterator )
+			for( ; m_diffIterator != m_diffLinesEnd && (*m_diffIterator).startsWith( context ); ++m_diffIterator )
 			{
-				diff->addSourceLine( m_unifiedHunkBodyContext.cap( 1 ) );
-				diff->addDestinationLine( m_unifiedHunkBodyContext.cap( 1 ) );
+				QString line = QString( *m_diffIterator ).remove( 0, 1 );
+				diff->addSourceLine( line );
+				diff->addDestinationLine( line );
 				linenoA++;
 				linenoB++;
 			}
 		}
 		else
 		{	// This is a real difference, not context
-			for( ; m_diffIterator != m_diffLines.end() && m_unifiedHunkBodyRemoved.exactMatch( *m_diffIterator ); ++m_diffIterator )
+			for( ; m_diffIterator != m_diffLinesEnd && (*m_diffIterator).startsWith( removed ); ++m_diffIterator )
 			{
-				diff->addSourceLine( m_unifiedHunkBodyRemoved.cap( 1 ) );
+				diff->addSourceLine( QString( *m_diffIterator ).remove( 0, 1 ) );
 				linenoA++;
 			}
-			for( ; m_diffIterator != m_diffLines.end() && m_unifiedHunkBodyAdded.exactMatch( *m_diffIterator ); ++m_diffIterator )
+			for( ; m_diffIterator != m_diffLinesEnd && (*m_diffIterator).startsWith( added ); ++m_diffIterator )
 			{
-				diff->addDestinationLine( m_unifiedHunkBodyAdded.cap( 1 ) );
+				diff->addDestinationLine( QString( *m_diffIterator ).remove( 0, 1 ) );
 				linenoB++;
 			}
 			if ( diff->sourceLineCount() == 0 )
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/parserbase.h kdesdk/kompare/libdiff2/parserbase.h
--- kdesdk.orig/kompare/libdiff2/parserbase.h	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/parserbase.h	Mon Apr  5 01:08:31 2004
@@ -71,6 +71,8 @@
 	/** What is format of the diff */
 	virtual enum Kompare::Format determineFormat();
 
+	bool matchesUnifiedHunkLine( QString line ) const;
+
 protected:
 	// Regexps for context parsing
 	QRegExp m_contextDiffHeader1;
diff -urN -x CVS kdesdk.orig/kompare/libdiff2/perforceparser.cpp kdesdk/kompare/libdiff2/perforceparser.cpp
--- kdesdk.orig/kompare/libdiff2/perforceparser.cpp	Mon Jan 26 22:03:30 2004
+++ kdesdk/kompare/libdiff2/perforceparser.cpp	Tue Apr 13 02:22:35 2004
@@ -25,9 +25,12 @@
 
 PerforceParser::PerforceParser( const KompareModelList* list, const QStringList& diff ) : ParserBase( list, diff )
 {
-	m_contextDiffHeader1.setPattern( "==== (.*) - (.*) ====" );
-	m_rcsDiffHeader.setPattern     ( "==== (.*) - (.*) ====" );
-	m_unifiedDiffHeader1.setPattern( "==== (.*) - (.*) ====" );
+	m_contextDiffHeader1.setPattern( "==== (.*) - (.*) ====\n" );
+	m_contextDiffHeader1.setMinimal( true );
+	m_rcsDiffHeader.setPattern     ( "==== (.*) - (.*) ====\n" );
+	m_rcsDiffHeader.setMinimal     ( true );
+	m_unifiedDiffHeader1.setPattern( "==== (.*) - (.*) ====\n" );
+	m_unifiedDiffHeader1.setMinimal( true );
 }
 
 PerforceParser::~PerforceParser()
@@ -73,7 +76,9 @@
 //	kdDebug(8101) << "ParserBase::parseContextDiffHeader()" << endl;
 	bool result = false;
 
-	while ( m_diffIterator != m_diffLines.end() )
+	QStringList::ConstIterator itEnd = m_diffLines.end();
+
+	while ( m_diffIterator != itEnd )
 	{
 		if ( m_contextDiffHeader1.exactMatch( *(m_diffIterator)++ ) )
 		{
@@ -112,6 +117,47 @@
 
 bool PerforceParser::parseUnifiedDiffHeader()
 {
-	return false;
+	bool result = false;
+
+	QStringList::ConstIterator itEnd = m_diffLines.end();
+
+	while ( m_diffIterator != itEnd )
+	{
+//		kdDebug(8101) << "Line = " << *m_diffIterator << endl;
+//		kdDebug(8101) << "String length  = " << (*m_diffIterator).length() << endl;
+		if ( m_unifiedDiffHeader1.exactMatch( *(m_diffIterator)++ ) )
+		{
+//			kdDebug(8101) << "Matched length Header1 = " << m_unifiedDiffHeader1.matchedLength() << endl;
+//			kdDebug(8101) << "Matched string Header1 = " << m_unifiedDiffHeader1.cap( 0 ) << endl;
+//			kdDebug(8101) << "First  capture Header1 = \"" << m_unifiedDiffHeader1.cap( 1 ) << "\"" << endl;
+//			kdDebug(8101) << "Second capture Header1 = \"" << m_unifiedDiffHeader1.cap( 2 ) << "\"" << endl;
+			
+			m_currentModel = new DiffModel();
+			QRegExp sourceFileRE     ( "(\\/\\/[^\\#]+)#(\\d+)" );
+			QRegExp destinationFileRE( "([^\\#]+)#?(.*)" );
+			sourceFileRE.exactMatch( m_unifiedDiffHeader1.cap( 1 ) );
+			destinationFileRE.exactMatch( m_unifiedDiffHeader1.cap( 2 ) );
+//			kdDebug(8101) << "Matched length = " << sourceFileRE.matchedLength() << endl;
+//			kdDebug(8101) << "Matched length = " << destinationFileRE.matchedLength() << endl;
+//			kdDebug(8101) << "Captured texts = " << sourceFileRE.capturedTexts() << endl;
+//			kdDebug(8101) << "Captured texts = " << destinationFileRE.capturedTexts() << endl;
+//			kdDebug(8101) << "Source File      : " << sourceFileRE.cap( 1 ) << endl;
+//			kdDebug(8101) << "Destination File : " << destinationFileRE.cap( 1 ) << endl;
+			m_currentModel->setSourceFile          ( sourceFileRE.cap( 1 ) );
+			m_currentModel->setSourceTimestamp     ( m_unifiedDiffHeader1.cap( 2 ) );
+			m_currentModel->setSourceRevision      ( m_unifiedDiffHeader1.cap( 4 ) );
+			m_currentModel->setDestinationFile     ( destinationFileRE.cap( 1 ) );
+			m_currentModel->setDestinationTimestamp( m_unifiedDiffHeader2.cap( 2 ) );
+			m_currentModel->setDestinationRevision ( m_unifiedDiffHeader2.cap( 4 ) );
+
+			result = true;
+
+			break;
+		}
+//		kdDebug(8101) << "Matched length = " << m_unifiedDiffHeader1.matchedLength() << endl;
+//		kdDebug(8101) << "Captured texts = " << m_unifiedDiffHeader1.capturedTexts() << endl;
+	}
+
+	return result;
 }
 
diff -urN -x CVS kdesdk.orig/kuiviewer/designerthumbnail.desktop kdesdk/kuiviewer/designerthumbnail.desktop
--- kdesdk.orig/kuiviewer/designerthumbnail.desktop	Sun Feb 29 16:53:37 2004
+++ kdesdk/kuiviewer/designerthumbnail.desktop	Sun Apr 25 01:31:31 2004
@@ -14,11 +14,12 @@
 Name[fi]=Qt Designer -tiedostot
 Name[fr]=Fichiers Qt Designer
 Name[gl]=Ficheiros de Qt Designer
-Name[hi]=क्यू-टी डिजाइनर फाइलें
+Name[hi]=क्यू-टी डिजाइनर फ़ाइलें
 Name[hu]=Qt Designer fájlok
 Name[is]=Qt Designer skrár
 Name[it]=File di Qt Designer
 Name[ja]=Qtデザイナファイル
+Name[nb]=Qt Designer-filer
 Name[nl]=Qt Designer-bestanden
 Name[pl]=Pliki Qt Designer
 Name[pt]=Ficheiros do Qt Designer
diff -urN -x CVS kdesdk.orig/kuiviewer/kuiviewer.desktop kdesdk/kuiviewer/kuiviewer.desktop
--- kdesdk.orig/kuiviewer/kuiviewer.desktop	Sun Feb 29 16:53:39 2004
+++ kdesdk/kuiviewer/kuiviewer.desktop	Sun Apr 25 01:31:33 2004
@@ -26,11 +26,12 @@
 GenericName[fi]=Qt Designer UI-tiedostojen näyttäjä
 GenericName[fr]=Afficheur de fichiers UI de QT Designer
 GenericName[gl]=Visor de ficheiros UI de Qt Designer
-GenericName[hi]=क्यू-टी डिजाइनर यूआई फाइल व्यूअर
+GenericName[hi]=क्यू-टी डिजाइनर यूआई फ़ाइल व्यूअर
 GenericName[hu]=Qt Designer UI-fájlnézegető
 GenericName[is]=Qt Designer UI skráaskoðari
 GenericName[it]=Visualizzatore per file UI di Qt Designer
 GenericName[ja]=Qt デザイナ UI ファイルビューア
+GenericName[nb]=Qt Designer UI-filviser
 GenericName[nl]=Weergave van QT Designer UI-bestanden
 GenericName[pl]=Przeglądarka plików UI Qt Designera
 GenericName[pt]=Visualizador de Ficheiros UI do Qt Designer
diff -urN -x CVS kdesdk.orig/kuiviewer/main.cpp kdesdk/kuiviewer/main.cpp
--- kdesdk.orig/kuiviewer/main.cpp	Fri May 23 19:55:42 2003
+++ kdesdk/kuiviewer/main.cpp	Wed Apr 21 10:04:18 2004
@@ -12,7 +12,7 @@
 
 int main(int argc, char **argv)
 {
-    KAboutData about("kuiviewerpart", I18N_NOOP("KUIViewerPart"), "0.1",
+    KAboutData about("kuiviewer", I18N_NOOP("KUIViewer"), "0.1",
 		     I18N_NOOP("Displays Designer's UI files."),
 		     KAboutData::License_LGPL );
     about.addAuthor("Richard Moore", 0, "rich@kde.org");
diff -urN -x CVS kdesdk.orig/scheck/scheck.themerc kdesdk/scheck/scheck.themerc
--- kdesdk.orig/scheck/scheck.themerc	Sun Feb 29 16:53:41 2004
+++ kdesdk/scheck/scheck.themerc	Sun Apr  4 14:56:39 2004
@@ -23,6 +23,7 @@
 Comment[it]=Stili di sviluppo per cercare conflitti nei tasti rapidi e negli stili
 Comment[ja]=検索アクセラレータとスタイルガイド衝突のための開発
 Comment[ms]=Gaya pembangunan untuk cari pintasan dan gaya pengurusan konflik
+Comment[nb]=Utviklingsstil for å finne konflikter mellom hurtigtaster og retningslinjene
 Comment[nl]=Ontwikkelstijl voor het zoeken naar sneltoets- en stijlgidsconflicten
 Comment[pl]=Styl programistyczny do wyszukiwania konfliktów klawiszy skrótu i prowadzenia stylu
 Comment[pt]=Estilo de desenvolvimento para procurar conflitos de aceleradores e de guias de estilo
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umbrello.desktop kdesdk/umbrello/umbrello/umbrello.desktop
--- kdesdk.orig/umbrello/umbrello/umbrello.desktop	Sun Feb 29 16:53:43 2004
+++ kdesdk/umbrello/umbrello/umbrello.desktop	Sun Apr  4 14:56:41 2004
@@ -26,6 +26,7 @@
 GenericName[hu]=UML-modellező
 GenericName[it]=Modellatore UML
 GenericName[ja]=UML モデラ
+GenericName[nb]=UML-modelleringsprogram
 GenericName[nl]=UML-modeller
 GenericName[pl]=Program do modelowania UML
 GenericName[pt]=Modelador de UML
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlview.cpp kdesdk/umbrello/umbrello/umlview.cpp
--- kdesdk.orig/umbrello/umbrello/umlview.cpp	Sat Mar 27 21:54:24 2004
+++ kdesdk/umbrello/umbrello/umlview.cpp	Tue Apr 13 17:46:59 2004
@@ -1553,7 +1553,7 @@
 		{
 			int want_save = KMessageBox::questionYesNo(0, i18n("The selected file %1 exists.\nDo you want to overwrite it?").arg(m_ImageURL.fileName()),
 								i18n("File Already Exists"),
-								i18n("Yes"), i18n("No"));
+								KStdGuiItem::yes(), KStdGuiItem::no());
 			if (want_save == KMessageBox::No)
 				// another possibility would be to show the save dlg again
 				return;
@@ -1942,7 +1942,7 @@
 	{
 		// if view went ok, then append in document
 		getDocument() -> addAssociation (a->getAssociation());
-	} else { 
+	} else {
 		kdError() << "cannot addAssocInViewAndDoc(), deleting" << endl;
 		delete a;
 	}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/x-umbrello.desktop kdesdk/umbrello/umbrello/x-umbrello.desktop
--- kdesdk.orig/umbrello/umbrello/x-umbrello.desktop	Sun Feb 29 16:53:45 2004
+++ kdesdk/umbrello/umbrello/x-umbrello.desktop	Sun Apr 25 01:31:35 2004
@@ -16,11 +16,12 @@
 Comment[fi]=Umbrello UML-mallinnustiedosto
 Comment[fr]=Fichier du modeleur UML Umbrello
 Comment[gl]=Ficheiro do Modelador de UML Umbrello
-Comment[hi]=अम्बरैलो यूएमएल मॉडलर फाइल
+Comment[hi]=अम्बरैलो यूएमएल मॉडलर फ़ाइल
 Comment[hu]=Umbrello UML-fájl
 Comment[is]=Umbrello UML Modeller Skrá
 Comment[it]=File del modellatore Umbrello UML
 Comment[ja]=Umbrello UML モデラファイル
+Comment[nb]=Umbrello UML-modelleringsfil
 Comment[nl]=Umbrello UML Modeller-bestand
 Comment[pl]=Plik modelera UML Umbrello
 Comment[pt]=Ficheiro do Modelador de UML Umbrello
