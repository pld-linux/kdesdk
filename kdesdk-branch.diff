diff -urN -x CVS kdesdk.orig/admin/acinclude.m4.in kdesdk/admin/acinclude.m4.in
--- kdesdk.orig/admin/acinclude.m4.in	2005-02-09 23:21:09.000000000 +0100
+++ kdesdk/admin/acinclude.m4.in	2005-03-24 20:18:09.000000000 +0100
@@ -1644,7 +1644,15 @@
 
 AC_MSG_RESULT([$kde_cv_uic_plugins])
 if test "$kde_cv_uic_plugins" != yes; then
-	AC_MSG_ERROR([you need to install kdelibs first.])
+	AC_MSG_ERROR([
+you need to install kdelibs first.
+
+If you did install kdelibs, then the Qt version that is picked up by
+this configure is not the same version you used to compile kdelibs. 
+The Qt Plugin installed by kdelibs is *ONLY* loadable if its the 
+same Qt version, compiled with the same compiler and the same Qt
+configuration settings.
+])
 fi
 fi
 ])
@@ -3104,8 +3112,8 @@
         fi
         rm -f conftest.h conftest.h.gch
     fi
-    AM_CONDITIONAL(unsermake_enable_pch, test "$kde_use_pch" = "yes" && test "$kde_gcc_supports_pch" = "yes")
   fi
+  AM_CONDITIONAL(unsermake_enable_pch, test "$kde_use_pch" = "yes" && test "$kde_gcc_supports_pch" = "yes")
   if test "$CXX" = "KCC"; then
     dnl unfortunately we currently cannot disable exception support in KCC
     dnl because doing so is binary incompatible and Qt by default links with exceptions :-(
@@ -3194,6 +3202,51 @@
   ifdef([AM_DEPENDENCIES], AC_REQUIRE([KDE_ADD_DEPENDENCIES]), [])
 ])
 
+AC_DEFUN([KDE_CHECK_VISIBILITY_GCC_BUG],
+  [
+    AC_CACHE_CHECK([for gcc -fvisibility-inlines-hidden bug], kde_cv_val_gcc_visibility_bug,
+      [
+        AC_LANG_SAVE
+        AC_LANG_CPLUSPLUS
+
+        safe_CXXFLAGS=$CXXFLAGS
+        safe_LDFLAGS=$LDFLAGS
+        CXXFLAGS="$CXXFLAGS -fPIC -fvisibility-inlines-hidden -O0"
+        LDFLAGS="$LDFLAGS -shared -fPIC"
+
+        AC_TRY_LINK(
+        [
+          /* http://gcc.gnu.org/bugzilla/show_bug.cgi?id=19664 */
+          template<typename CharT>
+          struct VisTest
+          {
+            inline VisTest ();
+          };
+          template<typename CharT>
+          inline VisTest<CharT>::VisTest()
+          {}
+          extern template class VisTest<char>;  // It works if we drop that line
+          int some_function( int do_something ) __attribute__ ((visibility("default")));
+          int some_function( int )
+          {
+            VisTest<char> a;
+            return 0;
+          }
+        ], [/* elvis is alive */],
+        kde_cv_val_gcc_visibility_bug=no, kde_cv_val_gcc_visibility_bug=yes)
+
+        CXXFLAGS=$safe_CXXFLAGS
+        LDFLAGS=$safe_LDFLAGS
+        AC_LANG_RESTORE
+      ]
+    )
+
+    if test x$kde_cv_val_gcc_visibility_bug = xno; then
+      CXXFLAGS="$CXXFLAGS -fvisibility-inlines-hidden"
+    fi
+  ]
+)
+
 AC_DEFUN([KDE_CHECK_AND_ADD_HIDDEN_VISIBILITY],
 [
   if test "$GXX" = "yes"; then
@@ -3202,7 +3255,9 @@
     KDE_CHECK_COMPILER_FLAG(fno-common, [CXXFLAGS="$CXXFLAGS -fno-common"])
     KDE_CHECK_COMPILER_FLAG(fvisibility=hidden, 
     [
-        CXXFLAGS="$CXXFLAGS -fvisibility=hidden -fvisibility-inlines-hidden"
+        CXXFLAGS="$CXXFLAGS -fvisibility=hidden"
+        KDE_CHECK_VISIBILITY_GCC_BUG
+
         HAVE_GCC_VISIBILITY=1
         AC_DEFINE_UNQUOTED(__KDE_HAVE_GCC_VISIBILITY, "$HAVE_GCC_VISIBILITY", [define to 1 if -fvisibility is supported])
     ])
diff -urN -x CVS kdesdk.orig/admin/am_edit kdesdk/admin/am_edit
--- kdesdk.orig/admin/am_edit	2004-12-17 21:18:28.000000000 +0100
+++ kdesdk/admin/am_edit	2005-03-29 11:15:16.000000000 +0200
@@ -483,6 +483,7 @@
             $MakefileData =~ s/$lookup/$replacement/;
             $lookup =~ s/\\\$\\\(CXXFLAGS\\\)/\\\$\\\(KCXXFLAGS\\\)/;
             $replacement = "$stuff_before\$(KCXXFLAGS) \$(KDE_CXXFLAGS)$stuff_after";
+            next if ($stuff_before =~ /\$\(KDE_CXXFLAGS\)/ or $stuff_after =~ /\$\(KDE_CXXFLAGS\)/);
             substituteLine($lookup, $replacement);
         } else {
             $found = 0;
@@ -634,7 +635,7 @@
 		if ($pre eq '' && exists($varcontent{$variable})) {
 		    my @addlist = split(/[\034\s]+/, $varcontent{$variable});
 		    push(@objlist, @addlist);
-                } elsif ($variable !~ 'OBJEXT') {
+                } elsif ($variable !~ 'OBJEXT' && $variable !~ /am__objects_\d+/ ) {
                     $ocv = 1;
 		}
             }
@@ -2276,7 +2277,7 @@
            "\t        echo \"\$\$i\"; \\\n" . 
            "\t        if ! ";
     $t .=  $cxxsuffix eq "KKK" ?
-           "\$(CXX) \$(DEFS) -I. -I\$(srcdir) -I\$(top_builddir) \$(INCLUDES) \$(AM_CPPFLAGS) \$(CPPFLAGS) \$(KDE_CXXFLAGS) " :
+           "\$(CXX) \$(DEFS) -I. -I\$(srcdir) -I\$(top_builddir) \$(INCLUDES) \$(AM_CPPFLAGS) \$(CPPFLAGS) \$(CXXFLAGS) \$(KDE_CXXFLAGS) " :
            "\$(CXXCOMPILE) ";
     $t .=  " --dump-class-hierarchy -c \$\$i.bchecktest.cc; then \\\n" .
            "\t            rm -f \$\$i.bchecktest.cc; exit 1; \\\n" .
@@ -2352,7 +2353,7 @@
     $MakefileData =~ s/\034/\\\n/g;    # Restore continuation lines
     # Append our $progId line, _below_ the "generated by automake" line
     # because automake-1.6 relies on the first line to be his own.
-    my $progIdLine = "\# $progId - " . '$Revision$ '."\n";
+    my $progIdLine = "\# $progId - " . '$Revision$ '."\n";
     if ( !( $MakefileData =~ s/^(.*generated .*by automake.*\n)/$1$progIdLine/ ) ) {
         warn "automake line not found in $makefile\n";
 	# Fallback: first line
diff -urN -x CVS kdesdk.orig/cervisia/cervisia.desktop kdesdk/cervisia/cervisia.desktop
--- kdesdk.orig/cervisia/cervisia.desktop	2004-12-09 23:48:53.000000000 +0100
+++ kdesdk/cervisia/cervisia.desktop	2005-03-17 09:39:15.000000000 +0100
@@ -13,6 +13,7 @@
 GenericName[eo]=Fasado por la versioadministrilo "CVS"
 GenericName[es]=Interfaz CVS
 GenericName[et]=CVSi kasutajaliides
+GenericName[eu]=CVS interfazea
 GenericName[fi]=Käyttöliittymä CVS:lle
 GenericName[fr]=Interface graphique pour CVS
 GenericName[he]=ממשק CVS
@@ -46,7 +47,6 @@
 GenericName[uk]=Інтерфейс до CVS
 GenericName[ven]=CVS yo iswa phanda
 GenericName[xh]=CVS Isiqalo sesiphelo
-GenericName[xx]=xxCVS Frontendxx
 GenericName[zh_CN]=CVS 前端
 GenericName[zh_TW]=CVS 前端
 GenericName[zu]=CVSIsiqalo sokugcina
@@ -62,7 +62,6 @@
 Name[hi]=सर्विसिया
 Name[ta]= செர்வியா
 Name[th]=เซอร์วิเซีย
-Name[xx]=xxCervisiaxx
 ServiceTypes=KParts/ReadOnlyPart,Browser/View
 X-KDE-Library=libcervisiapart
 X-KDE-BrowserView-Args=DetailedList
diff -urN -x CVS kdesdk.orig/cervisia/cervisiapart.cpp kdesdk/cervisia/cervisiapart.cpp
--- kdesdk.orig/cervisia/cervisiapart.cpp	2005-01-09 19:55:08.000000000 +0100
+++ kdesdk/cervisia/cervisiapart.cpp	2005-03-28 13:18:06.000000000 +0200
@@ -1,7 +1,7 @@
 /*
  *  Copyright (C) 1999-2002 Bernd Gehrmann
  *                          bernd@mail.berlios.de
- *  Copyright (c) 2002-2004 Christian Loose <christian.loose@kdemail.net>
+ *  Copyright (c) 2002-2005 Christian Loose <christian.loose@kdemail.net>
  *
  * This program may be distributed under the terms of the Q Public
  * License as defined by Trolltech AS of Norway and appearing in the
@@ -88,7 +88,7 @@
     , opt_doCVSEdit( false )
     , recent( 0 )
     , cvsService( 0 )
-    , statusBar( 0 )
+    , m_statusBar(new KParts::StatusBarExtension(this))
     , m_browserExt( 0 )
     , filterLabel( 0 )
     , m_editWithId(0)
@@ -145,18 +145,6 @@
                                   "cvs DCOP service could not be started."),
                              parentWidget));
 
-    statusBar = new CervisiaStatusBarExtension(this);
-
-    // create the active filter indicator and add it to the statusbar
-    filterLabel = new QLabel("UR", statusBar->statusBar());
-    filterLabel->setFixedSize(filterLabel->sizeHint());
-    filterLabel->setText("");
-    QToolTip::add(filterLabel,
-                  i18n("F - All files are hidden, the tree shows only folders\n"
-                       "N - All up-to-date files are hidden\n"
-                       "R - All removed files are hidden"));
-    statusBar->addStatusBarItem(filterLabel, 0, true);
-
     if( cvsService )
     {
         setupActions();
@@ -165,6 +153,8 @@
     }
 
     setXMLFile( "cervisiaui.rc" );
+
+    QTimer::singleShot(0, this, SLOT(slotSetupStatusBar()));
 }
 
 CervisiaPart::~CervisiaPart()
@@ -207,6 +197,20 @@
     return openSandbox( u.path() );
 }
 
+
+void CervisiaPart::slotSetupStatusBar()
+{
+    // create the active filter indicator and add it to the statusbar
+    filterLabel = new QLabel("UR", m_statusBar->statusBar());
+    filterLabel->setFixedSize(filterLabel->sizeHint());
+    filterLabel->setText("");
+    QToolTip::add(filterLabel,
+                  i18n("F - All files are hidden, the tree shows only folders\n"
+                       "N - All up-to-date files are hidden\n"
+                       "R - All removed files are hidden"));
+    m_statusBar->addStatusBarItem(filterLabel, 0, true);
+}
+
 void CervisiaPart::setupActions()
 {
     KAction *action;
@@ -1734,7 +1738,8 @@
                 str += "R";
         }
 
-    filterLabel->setText(str);
+    if( filterLabel )
+        filterLabel->setText(str);
 }
 
 
diff -urN -x CVS kdesdk.orig/cervisia/cervisiapart.h kdesdk/cervisia/cervisiapart.h
--- kdesdk.orig/cervisia/cervisiapart.h	2005-02-16 23:41:15.000000000 +0100
+++ kdesdk/cervisia/cervisiapart.h	2005-03-28 13:18:06.000000000 +0200
@@ -1,7 +1,7 @@
 /*
  *  Copyright (C) 1999-2002 Bernd Gehrmann
  *                          bernd@mail.berlios.de
- *  Copyright (c) 2002-2004 Christian Loose <christian.loose@kdemail.net>
+ *  Copyright (c) 2002-2005 Christian Loose <christian.loose@kdemail.net>
  *
  * This program may be distributed under the terms of the Q Public
  * License as defined by Trolltech AS of Norway and appearing in the
@@ -41,16 +41,6 @@
 class CervisiaBrowserExtension;
 
 
-class CervisiaStatusBarExtension : public KParts::StatusBarExtension
-{
-public:
-    CervisiaStatusBarExtension(KParts::ReadOnlyPart* parent)
-        : KParts::StatusBarExtension(parent, "CervisiaStatusBarExtension")
-    {
-    }
-};
-
-
 /**
  * An embeddable Cervisia viewer.
  */
@@ -146,6 +136,7 @@
 private slots:
     // called by menu action "Open Sandbox..."
     void slotOpenSandbox();
+    void slotSetupStatusBar();
 
 protected:
     virtual void guiActivateEvent(KParts::GUIActivateEvent* event);
@@ -185,7 +176,7 @@
     KRecentFilesAction *recent;
 
     CvsService_stub*            cvsService;
-    CervisiaStatusBarExtension* statusBar;
+    KParts::StatusBarExtension* m_statusBar;
     CervisiaBrowserExtension*   m_browserExt;
     QLabel*                     filterLabel;
 
diff -urN -x CVS kdesdk.orig/cervisia/ChangeLog kdesdk/cervisia/ChangeLog
--- kdesdk.orig/cervisia/ChangeLog	2005-01-31 22:20:42.000000000 +0100
+++ kdesdk/cervisia/ChangeLog	2005-03-28 13:18:06.000000000 +0200
@@ -1,3 +1,8 @@
+2005-03-04  Christian Loose <christian.loose@kdemail.net>
+
+	* Fix BR #97664:
+          Fix statusbar when embedded in Konqueror.
+
 2005-01-31  Christian Loose  <christian.loose@kdemail.net>
 
 	* Implemented wish #95257:
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/cvsaskpass.cpp kdesdk/cervisia/cvsservice/cvsaskpass.cpp
--- kdesdk.orig/cervisia/cvsservice/cvsaskpass.cpp	2003-10-14 21:11:56.000000000 +0200
+++ kdesdk/cervisia/cvsservice/cvsaskpass.cpp	2005-03-04 18:26:25.000000000 +0100
@@ -35,7 +35,7 @@
 };
 
 
-int main(int argc, char** argv)
+extern "C" int kdemain(int argc, char** argv)
 {
     KAboutData about("cvsaskpass", I18N_NOOP("cvsaskpass"), "0.1",
                      I18N_NOOP("ssh-askpass for the CVS DCOP Service"),
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/cvsservice.desktop kdesdk/cervisia/cvsservice/cvsservice.desktop
--- kdesdk.orig/cervisia/cvsservice/cvsservice.desktop	2005-02-21 10:17:48.000000000 +0100
+++ kdesdk/cervisia/cvsservice/cvsservice.desktop	2005-03-07 15:20:00.000000000 +0100
@@ -23,7 +23,6 @@
 Name[ta]=Cvsசேவை
 Name[tg]=ҲизматиCvs
 Name[tr]=CvsHizmeti
-Name[xx]=xxCvsServicexx
 Exec=cvsservice
 X-DCOP-ServiceType=Multi
 X-KDE-StartupNotify=false
@@ -60,5 +59,4 @@
 Comment[ta]=ஒரு cvsக்கு ஒரு இடைமுகத்தினை அளிக்கக்கூடிய DCOPசேவை
 Comment[tg]=Хизмати DCOP барои интерфейс бо cvs
 Comment[uk]=Служба DCOP, яка надає інтерфейс до cvs
-Comment[xx]=xxA DCOP service that provides an interface to cvsxx
 Comment[zh_CN]=提供 CVS 接口的 DCOP 服务
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/main.cpp kdesdk/cervisia/cvsservice/main.cpp
--- kdesdk.orig/cervisia/cvsservice/main.cpp	2003-02-06 22:22:31.000000000 +0100
+++ kdesdk/cervisia/cvsservice/main.cpp	2005-03-04 18:26:25.000000000 +0100
@@ -25,7 +25,7 @@
 #include "cvsservice.h"
 
 
-int main(int argc, char** argv)
+extern "C" int kdemain(int argc, char** argv)
 {
     KAboutData about("cvsservice", I18N_NOOP("CVS DCOP service"), "0.1",
             I18N_NOOP("DCOP service for CVS"), KAboutData::License_LGPL,
diff -urN -x CVS kdesdk.orig/cervisia/cvsservice/Makefile.am kdesdk/cervisia/cvsservice/Makefile.am
--- kdesdk.orig/cervisia/cvsservice/Makefile.am	2004-08-27 17:24:38.000000000 +0200
+++ kdesdk/cervisia/cvsservice/Makefile.am	2005-03-04 18:26:25.000000000 +0100
@@ -8,18 +8,19 @@
 INCLUDES = $(all_includes)
 
 # cvs DCOP service
-bin_PROGRAMS = cvsservice cvsaskpass
+bin_PROGRAMS =
+kdeinit_LTLIBRARIES = cvsservice.la cvsaskpass.la
 
-cvsservice_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-cvsservice_LDADD = $(LIB_KIO)
-cvsservice_SOURCES = main.cpp cvsservice.cpp cvsjob.cpp \
+cvsservice_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
+cvsservice_la_LIBADD = $(LIB_KIO)
+cvsservice_la_SOURCES = main.cpp cvsservice.cpp cvsjob.cpp \
 	cvsservice.skel cvsservice.stub cvsjob.skel cvsjob.stub \
 	repository.cpp repository.skel repository.stub sshagent.cpp \
 	cvsserviceutils.cpp cvsloginjob.cpp cvsloginjob.skel cvsloginjob.stub
 
-cvsaskpass_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-cvsaskpass_LDADD = $(LIB_KDEUI)
-cvsaskpass_SOURCES = cvsaskpass.cpp
+cvsaskpass_la_LDFLAGS = $(all_libraries) $(KDE_PLUGIN) -module
+cvsaskpass_la_LIBADD = $(LIB_KDEUI)
+cvsaskpass_la_SOURCES = cvsaskpass.cpp
 
 include_HEADERS = cvsservice_stub.h cvsjob_stub.h repository_stub.h
 noinst_HEADERS = cvsservice.h cvsjob.h repository.h cvsserviceutils.h \
@@ -30,7 +31,10 @@
 
 libcvsservice_la_LDFLAGS = $(all_libraries) -no-undefined -version-info 0:1
 libcvsservice_la_LIBADD = $(LIB_KDECORE)
-libcvsservice_la_SOURCES = cvsservice.stub cvsjob.stub repository.stub
+libcvsservice_la_SOURCES = cvsservice.stub cvsjob.stub repository.stub dummy.cpp
+
+dummy.cpp:
+	echo > dummy.cpp
 
 # let automoc handle all of the meta source files (moc)
 METASOURCES = AUTO
diff -urN -x CVS kdesdk.orig/cervisia/eventsrc kdesdk/cervisia/eventsrc
--- kdesdk.orig/cervisia/eventsrc	2005-02-22 05:13:17.000000000 +0100
+++ kdesdk/cervisia/eventsrc	2005-03-28 09:03:00.000000000 +0200
@@ -1,7 +1,6 @@
 [!Global!]
 IconName=cervisia
 Comment=Cervisia
-Comment[xx]=xxCervisiaxx
 
 [cvs_commit_done]
 Name=CVS commit job done
@@ -21,9 +20,10 @@
 Name[pt]=Trabalho de 'commit' de CVS terminado
 Name[pt_BR]=Trabalho de envio para o CVS feito
 Name[ru]=CVS Commit выполнен
+Name[sr]=CVS предаја завршена
+Name[sr@Latn]=CVS predaja završena
 Name[sv]=CVS-arkiveringsjobb klart
 Name[uk]=Завдання передачі CVS виконане
-Name[xx]=xxCVS commit job donexx
 Comment=A CVS commit job is done
 Comment[bg]=Предаването в CVS е готово
 Comment[cs]=CVS commit úloha je dokončena
@@ -41,7 +41,8 @@
 Comment[pt]=Um trabalho de 'commit' de CVS terminou
 Comment[pt_BR]=Um trabalho de envio para o CVS foi feito
 Comment[ru]=CVS Commit выполнен
+Comment[sr]=Посао CVS предаје је завршен
+Comment[sr@Latn]=Posao CVS predaje je završen
 Comment[sv]=Ett CVS-arkiveringsjobb är klart
 Comment[uk]=Завдання передачі CVS виконане
-Comment[xx]=xxA CVS commit job is donexx
 default_presentation=0
diff -urN -x CVS kdesdk.orig/cervisia/main.cpp kdesdk/cervisia/main.cpp
--- kdesdk.orig/cervisia/main.cpp	2004-09-09 21:56:06.000000000 +0200
+++ kdesdk/cervisia/main.cpp	2005-03-04 18:26:25.000000000 +0100
@@ -131,7 +131,7 @@
 }
 
 
-int main(int argc, char **argv)
+extern "C" int kdemain(int argc, char **argv)
 {
     static KCmdLineOptions options[] = {
         { "+[directory]", I18N_NOOP("The sandbox to be loaded"), 0 },
diff -urN -x CVS kdesdk.orig/cervisia/Makefile.am kdesdk/cervisia/Makefile.am
--- kdesdk.orig/cervisia/Makefile.am	2005-02-02 23:42:14.000000000 +0100
+++ kdesdk/cervisia/Makefile.am	2005-03-04 18:26:25.000000000 +0100
@@ -3,7 +3,9 @@
 
 SUBDIRS = cvsservice . pics
 
-bin_PROGRAMS = cervisia
+bin_PROGRAMS =
+lib_LTLIBRARIES =
+kdeinit_LTLIBRARIES = cervisia.la
 kde_module_LTLIBRARIES = libcervisiapart.la
 noinst_LTLIBRARIES = libcervisia.la
 
@@ -27,10 +29,10 @@
 		   cvsservice/libcvsservice.la libcervisia.la
 libcervisiapart_la_COMPILE_FIRST = cvsservice/cvsservice_stub.h cervisiasettings.h
 
-cervisia_SOURCES = main.cpp cervisiashell.cpp
-cervisia_LDFLAGS = $(all_libraries) $(KDE_RPATH)
-cervisia_LDADD = $(LIB_KPARTS) $(LIB_KUTILS) cvsservice/libcvsservice.la libcervisia.la
-cervisia_COMPILE_FIRST = cvsservice/cvsservice_stub.h cervisiasettings.h
+cervisia_la_SOURCES = main.cpp cervisiashell.cpp
+cervisia_la_LDFLAGS = $(all_libraries) $(KDE_RPATH) -module $(KDE_PLUGIN)
+cervisia_la_LIBADD = $(LIB_KPARTS) $(LIB_KUTILS) cvsservice/libcvsservice.la libcervisia.la
+cervisia_la_COMPILE_FIRST = cvsservice/cvsservice_stub.h cervisiasettings.h
 
 man_MANS = cervisia.1
 
diff -urN -x CVS kdesdk.orig/cervisia/repositorydlg.cpp kdesdk/cervisia/repositorydlg.cpp
--- kdesdk.orig/cervisia/repositorydlg.cpp	2005-02-05 19:02:09.000000000 +0100
+++ kdesdk/cervisia/repositorydlg.cpp	2005-03-07 16:59:20.000000000 +0100
@@ -323,8 +323,7 @@
         for( ; item; item = item->nextSibling() )
             if( item->text(0) == repo )
             {
-                KMessageBox::information(this, "Cervisia",
-                                         i18n("This repository is already known."));
+                KMessageBox::information(this, i18n("This repository is already known."));
                 return;
             }
 
diff -urN -x CVS kdesdk.orig/debian/catalogmanager.1 kdesdk/debian/catalogmanager.1
--- kdesdk.orig/debian/catalogmanager.1	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/catalogmanager.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CATALOGMANAGER 1 "January 31, 2004"
+.TH CATALOGMANAGER 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -30,7 +30,8 @@
 advanced and easy to use PO-file editor with full navigational and editing
 capabilities, syntax checking and statistics.  CatalogManager (this program)
 is a multi functional catalog manager which allows you to keep track of many
-PO-files at once.  KBabelDict is a dictionary for translators.
+PO-files at once.  KBabelDict is a dictionary to assist with searching
+for common translations.
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH OPTIONS
@@ -56,8 +57,10 @@
 .SH AUTHOR
 KBabel was written by Matthias Kiefer <kiefer@kde.org>,
 Wolfram Diestel <wolfram@steloj.de>, Andrea Rizzi <rizzi@kde.org>,
-Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>
-and Dwayne Bailey <dwayne@translate.org.za>.
+Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>,
+Asgeir Frimannsson <asgeirf@redhat.com>,
+Dwayne Bailey <dwayne@translate.org.za>,
+Bram Schoenmakers <bramschoenmakers@kde.nl> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cervisia.install kdesdk/debian/cervisia.install
--- kdesdk.orig/debian/cervisia.install	2004-08-02 00:38:28.000000000 +0200
+++ kdesdk/debian/cervisia.install	2005-03-10 22:15:11.000000000 +0100
@@ -5,6 +5,8 @@
 usr/share/apps/cervisia
 usr/share/apps/cervisiapart
 usr/share/apps/kconf_update/cervisia.upd
+usr/share/apps/kconf_update/cervisia-change_repos_list.pl
+usr/share/apps/kconf_update/cervisia-normalize_cvsroot.pl
 usr/share/apps/kconf_update/move_repositories.pl
 usr/share/apps/kconf_update/change_colors.pl
 usr/share/config.kcfg/cervisiapart.kcfg
diff -urN -x CVS kdesdk.orig/debian/cervisia.menu kdesdk/debian/cervisia.menu
--- kdesdk.orig/debian/cervisia.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/cervisia.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
   needs="x11"\
   section="Apps/Programming"\
   hints="KDE,Version control"\
-  kderemove="1"\
   title="Cervisia"\
   longtitle="Cervisia (CVS Frontend)"\
   icon="/usr/share/pixmaps/cervisia.xpm"\
diff -urN -x CVS kdesdk.orig/debian/cervisia.override kdesdk/debian/cervisia.override
--- kdesdk.orig/debian/cervisia.override	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/cervisia.override	2005-03-11 23:48:41.000000000 +0100
@@ -1,7 +1,3 @@
-# There is no -dev package.
-cervisia: non-dev-pkg-with-shlib-symlink usr/lib/libcvsservice.so.0.0.1 usr/lib/libcvsservice.so
-# Menu items
-cervisia: menu-item-contains-unknown-tag kderemove /usr/lib/menu/cervisia:9
 # kconf_update scripts don't need to be executable.
 cervisia: script-not-executable ./usr/share/apps/kconf_update/change_colors.pl
 cervisia: script-not-executable ./usr/share/apps/kconf_update/move_repositories.pl
diff -urN -x CVS kdesdk.orig/debian/cervisia.xpm kdesdk/debian/cervisia.xpm
--- kdesdk.orig/debian/cervisia.xpm	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/cervisia.xpm	2005-03-07 08:15:19.000000000 +0100
@@ -1,96 +1,195 @@
 /* XPM */
-static char *cervisia[] = {
-/* columns rows colors chars-per-pixel */
-"32 32 58 1",
-"  c #000000",
-". c #0B0000",
-"X c #140000",
-"o c #190000",
-"O c #240000",
-"+ c #2C0000",
-"@ c #320000",
-"# c #3A0000",
-"$ c #420000",
-"% c #490000",
-"& c #560202",
-"* c #5D0202",
-"= c #5C0A0A",
-"- c #630202",
-"; c #610909",
-": c #6B0000",
-"> c #730202",
-", c #7B0101",
-"< c #830000",
-"1 c #860808",
-"2 c #8B0202",
-"3 c #8A0909",
-"4 c #821F1F",
-"5 c #930101",
-"6 c #9C0000",
-"7 c #9E0F0F",
-"8 c #A30000",
-"9 c #A60B0B",
-"0 c #AB0000",
-"q c #AC0B0B",
-"w c #AF1414",
-"e c #B20101",
-"r c #B20B0B",
-"t c #B90B0B",
-"y c #B01010",
-"u c #B91010",
-"i c #A62E2E",
-"p c #A23434",
-"a c #B52828",
-"s c #B33E3E",
-"d c #C52F2F",
-"f c #CA2E2E",
-"g c #C23232",
-"h c #C53D3D",
-"j c #C83131",
-"k c #CC3B3B",
-"l c #D13838",
-"z c #D93D3D",
-"x c #C54545",
-"c c #CF4040",
-"v c #D34343",
-"b c #DC4141",
-"n c #DF5757",
-"m c #E04545",
-"M c #FE8A8A",
-"N c #FF9393",
-"B c gray100",
-"V c None",
-/* pixels */
-"VV.@++@@@@+@@O VVX@++@+@@@@@OVVV",
-"VXszrryyyrryy6% Oxkrrryyyqyq6# V",
-"V&Mkettet0q895> ;Mjeteeteq092>XV",
-"V;zteeee008862>X=zteeee008662>oV",
-"V*zreee0008862>.=bteeee000862>oV",
-"V;br0ee0008862:.=br000008866<:oV",
-"V*bq800088666<:.=bq8000888651:oV",
-"V;zq888886665,:X;z0888886655,-oV",
-"V#r6555522<<<>- $r6555222<<,>*. ",
-"V %>>>>>::-**&O V%:::>>:---*&O  ",
-"VV .......@@@@++++@#+..o@@@@@o V",
-"VVVVVVVV.pkqqwyqyqwq5#V4kqqwq<XV",
-"VVVVVVVV&Mkettter0q95>ohnerr92@ ",
-"VVVVVVVV;mteeee008863>+afee063# ",
-"VVVVVVVV*breee0e08862:Oafe0063# ",
-"VVVVVVVV-br00e000866<:Oaf00063@ ",
-"VVVVVVVV*br808008865<:Oaf0085,@ ",
-"VVVVVVVV;zq888886665,:Oad8865,@ ",
-"VVVVVVVV$r65555322<<>;o7w525<>+ ",
-"VVVVVVVVV%>>:>>::--**O $,::-:*. ",
-"VVV$++++++@##+XoXX@#++++####+.  ",
-"VXilrrrrrr9w95@ .pg9qqrww9992@ V",
-"V&Mvettreqqq05> =Nketrteqqq85:.V",
-"V;mreeee008882>X=bteeee008863>oV",
-"V*zteeee000862>.=breeee008862>oV",
-"V*br0e0008886<>.=be00e000866<:oV",
-"V*br000008866<:.=br000008866<:oV",
-"V;bq808888655<:.=b0888888655<-oV",
-"V$u6555555222>: %t65555552<<>-. ",
-"V.&,,,>,>::::-@ .*<,,,>>>::--+  ",
-"VV oooooooooo.  V oooooooooo.  V",
-"VVVV         VVVVVV          VVV"
-};
+static char * cervisia_xpm[] = {
+"32 32 160 2",
+"  	c None",
+". 	c #210000",
+"+ 	c #220101",
+"@ 	c #2A0000",
+"# 	c #2D0001",
+"$ 	c #2E0102",
+"% 	c #310002",
+"& 	c #330000",
+"* 	c #340100",
+"= 	c #370001",
+"- 	c #380002",
+"; 	c #3A0000",
+"> 	c #3B0000",
+", 	c #3C0100",
+"' 	c #3C0100",
+") 	c #410003",
+"! 	c #4B0000",
+"~ 	c #4C0000",
+"{ 	c #560000",
+"] 	c #570001",
+"^ 	c #5A0200",
+"/ 	c #5E0000",
+"( 	c #5F0000",
+"_ 	c #600001",
+": 	c #5B0300",
+"< 	c #610002",
+"[ 	c #620003",
+"} 	c #5C0400",
+"| 	c #640100",
+"1 	c #680000",
+"2 	c #630205",
+"3 	c #690000",
+"4 	c #6A0001",
+"5 	c #650300",
+"6 	c #6B0002",
+"7 	c #6C0000",
+"8 	c #6C0004",
+"9 	c #660400",
+"0 	c #6D0100",
+"a 	c #730000",
+"b 	c #6E0300",
+"c 	c #740001",
+"d 	c #750000",
+"e 	c #750002",
+"f 	c #770000",
+"g 	c #760004",
+"h 	c #700400",
+"i 	c #770105",
+"j 	c #790200",
+"k 	c #710601",
+"l 	c #780206",
+"m 	c #7E0001",
+"n 	c #7F0002",
+"o 	c #800000",
+"p 	c #800003",
+"q 	c #7A0400",
+"r 	c #820000",
+"s 	c #810004",
+"t 	c #730903",
+"u 	c #7B0600",
+"v 	c #830200",
+"w 	c #880001",
+"x 	c #830206",
+"y 	c #890002",
+"z 	c #840300",
+"A 	c #8C0000",
+"B 	c #8B0003",
+"C 	c #8C0004",
+"D 	c #850500",
+"E 	c #8D0100",
+"F 	c #8D0105",
+"G 	c #930000",
+"H 	c #8E0300",
+"I 	c #940001",
+"J 	c #950002",
+"K 	c #970000",
+"L 	c #960003",
+"M 	c #980000",
+"N 	c #860809",
+"O 	c #980004",
+"P 	c #900500",
+"Q 	c #990200",
+"R 	c #9D0000",
+"S 	c #910700",
+"T 	c #9F0000",
+"U 	c #A00001",
+"V 	c #A10002",
+"W 	c #A20000",
+"X 	c #9A0500",
+"Y 	c #8A0D04",
+"Z 	c #A40100",
+"` 	c #9B0700",
+" .	c #A90000",
+"..	c #AB0000",
+"+.	c #AC0001",
+"@.	c #A50400",
+"#.	c #AD0001",
+"$.	c #A50405",
+"%.	c #AE0002",
+"&.	c #AC0008",
+"*.	c #AF0000",
+"=.	c #AD0009",
+"-.	c #AE010A",
+";.	c #B40000",
+">.	c #B50000",
+",.	c #B00300",
+"'.	c #A60706",
+").	c #B00303",
+"!.	c #B70007",
+"~.	c #B80008",
+"{.	c #A70907",
+"].	c #B90009",
+"^.	c #B10604",
+"/.	c #A70A0E",
+"(.	c #B1060C",
+"_.	c #A80C07",
+":.	c #9F0F11",
+"<.	c #B20905",
+"[.	c #AA0E08",
+"}.	c #B2090D",
+"|.	c #BC050B",
+"1.	c #B30C06",
+"2.	c #BB0613",
+"3.	c #AB1109",
+"4.	c #B30C0E",
+"5.	c #AE1714",
+"6.	c #B72327",
+"7.	c #B92528",
+"8.	c #A62F2C",
+"9.	c #A13231",
+"0.	c #A63634",
+"a.	c #C22F2E",
+"b.	c #C82C30",
+"c.	c #CA2D2C",
+"d.	c #CA2D31",
+"e.	c #C4312F",
+"f.	c #CB2E2D",
+"g.	c #B43C3C",
+"h.	c #CC3935",
+"i.	c #D23637",
+"j.	c #C53C3E",
+"k.	c #CC393B",
+"l.	c #CD3A3C",
+"m.	c #CE3C3D",
+"n.	c #D13E3F",
+"o.	c #C64547",
+"p.	c #DA3D3D",
+"q.	c #DB3F3E",
+"r.	c #D64242",
+"s.	c #DC403F",
+"t.	c #D04646",
+"u.	c #DD4140",
+"v.	c #DF4240",
+"w.	c #E14542",
+"x.	c #E05659",
+"y.	c #FF8788",
+"z.	c #FF8889",
+"A.	c #FF898A",
+"B.	c #FF8D8B",
+"C.	c #FE9494",
+"                                                                ",
+"    g.r.}.4.4.4.4.}.}.}.}.V !     o.m.}.4.4.}.4.}.}.}.}.Q )     ",
+"    y.h.;.!.1.1.<.^.-.{.V P g     y.e.1.!.1.1.<.%.-.{.$.P a     ",
+"    u.1.;.;.>.>.%.+.@.V ` F g     w.].>.;.>.>.%.+.@.W V B k     ",
+"    r.!.,.>.*.,.+. .@.V V D k     u.!.,.>.+.,.%. .@.V ` B h     ",
+"    v.4.+.*.*.%.+.@. .V Q B 8     s.%.+.*.*.%.@.@.@.Q V x 8     ",
+"    s.3.@. .+.@. .V @.R Q w 8     r.3. . .+.+. .Z @.Q Q x 6     ",
+"    q.-.@.@.@.@.W V Q L J r 7     s.+.@.@.@.@.W V R L L r 9     ",
+"    <.V G G L P E E E r p k 9     1.L J J G P B w E r p g [     ",
+"    ! h g a h a b 6 / / / ] +     ! h 6 6 h 8 b | / / : { .     ",
+"                                                                ",
+"                  0.m.-./.5.}.}.}.}._._.L ,     k.{.{.5.}.s     ",
+"                  y.m.1.!.1.1.<._.}._.'.L a   j.x.!.^.}.'.B     ",
+"                  w.1.>.>.>.!.%.%. .V ` E h   7.f.*.>.@.V Y     ",
+"                  u.!.*.>.*.%.*. . .@.Q B h   6.c.+.>.+./.N     ",
+"                  r.4.+.+.*.,.+.@.V V V D 6   6.e.*. .@.L D     ",
+"                  s.3. .@.+. . .@.V Q L z 6   7.a. . .@.L u     ",
+"                  q.-.@. .@.@.V V Q L L p 9   7.b.@.@.@.L l     ",
+"                  <.Q P J S J E E E z r g 2   S 5.G P F x i     ",
+"                  ! g g h a h a a 6 | < ] @     p 8 6 9 6 }     ",
+"                                                                ",
+"    8.i.}.}.}.}.}.}._./.-.P >     9.a.{._.}.}.}._././.'.E       ",
+"    B.n.1.1.1.1.}.4.-._.&.L g     C.k.].1.1.<.4.^.-._.'.L h     ",
+"    w.1.>.>.>.!.*.+.@.V Q F g     w.1.;.>.>.%.%.+.@.V V D g     ",
+"    r.].;.>.*.*.+.+. .V ` D g     u.1.%.>.>.>.+.+.@.V V D k     ",
+"    v.4.+.*.*.%.*. .$.V V E h     s.<.,.*. .+.+.@.@.` Q B 8     ",
+"    s.}. . .@.+. .@.W Q L z 8     r.%. .+. . . . .W V L w 8     ",
+"    s._.@.@. .@.@.W Q Q Q s 7     u.-.@.@.@.@.@.V R Q Q p 9     ",
+"    |.V Q Q L L J J E w z t 9     4.V Q Q L L P G w z z l 2     ",
+"    ] q q q j j a b a 7 6 9 %     < u q q q j a h b 6 9 9 $     ",
+"                                                                ",
+"                                                                "};
diff -urN -x CVS kdesdk.orig/debian/changelog kdesdk/debian/changelog
--- kdesdk.orig/debian/changelog	2004-08-01 16:36:47.000000000 +0200
+++ kdesdk/debian/changelog	2005-03-25 02:57:15.000000000 +0100
@@ -1,11 +1,78 @@
-kdesdk (4:3.2.92-1) experimental; urgency=low
+kdesdk (4:3.4.0-0pre1) unstable; urgency=low
+
+  * New major upstream release.
+  * Note that although libktnef.la has moved from kdepim-dev to libktnef1-dev,
+    a build-dependency on kdepim-dev is still required for some header files.
+  * Removed cvs dependency from cervisia, since this comes indirectly through
+    libcvsservice0 anyway.  Updated the cvs dependency for libcvsservice
+    to require cvs (>= 1.11), as cervisia used to when it handled cvs itself.
+  * Removed obsolete kderemove tags from menu items.
+
+ -- Ben Burton <bab@debian.org>  Fri, 25 Mar 2005 12:56:49 +1100
+
+kdesdk (4:3.3.2-2) unstable; urgency=high
+
+  * Fixed drag-and-drop problems in umbrello that can cause a real and/or
+    apparent loss of data (closes: #296433).
+  * Patched kbabel spell-check-as-you-go to use checkWord() instead of check(),
+    which seems to protect it from the kdelibs crash described in #289646.
+  * Added the full text of the GFDL to debian/copyright, since all of the
+    docbook documentation is under this license.
+  * Added a note to README.Debian in the poxml package regarding the
+    necessity of system identifiers (closes: #286103).
+  * Installing the new script cvsforwardport and a corresponding manpage.
+
+ -- Ben Burton <bab@debian.org>  Thu, 24 Mar 2005 07:59:47 +1100
+
+kdesdk (4:3.3.2-1) unstable; urgency=low
+
+  * New upstream bugfix release.
+  * Rebuilt against libkcal2a and reversioned kdepim-dev and libkcal2-dev
+    build-depends to >= 4:3.3.2 accordingly (closes: #291592).
+  * Fixed setupGUI() typo in kapptemplate (part of #289304).
+  * Added a README.Debian for poxml that outlines the available binaries
+    (closes: #286106).
+  * Applied upstream patch for poxml that addresses escaped literals
+    and KDE-specific credits in split2po (closes: #288929).
+
+ -- Ben Burton <bab@debian.org>  Sat, 22 Jan 2005 07:29:29 +1100
+
+kdesdk (4:3.3.1-2) unstable; urgency=medium
+
+  * Build-depends on kdepim-dev (>= 4:3.3.1), which provides libktnef.la.
+    When building against libkcal2-dev (>= 4:3.3.1), libktnef.la is needed
+    at link time.
+  * Also changed libkcal2-dev in the build-depends to the versioned
+    libkcal2-dev (>= 4:3.3.1) to ensure consistency.
+
+ -- Ben Burton <bab@debian.org>  Thu,  9 Dec 2004 08:16:17 +1100
+
+kdesdk (4:3.3.1-1) unstable; urgency=medium
+
+  * New upstream bugfix release.
+  * Build-conflicts with autoconf2.13, which does not play well with
+    Makefile.common.
+  * Force a rerun of admin/Makefile.common when building (not just after
+    a clean), since the debian patches affect Makefile.ams.
+
+ -- Ben Burton <bab@debian.org>  Thu, 28 Oct 2004 19:03:02 +1000
+
+kdesdk (4:3.3.0-1) unstable; urgency=low
 
   * New upstream release.
-  * Binary package kmtrace has returned.
+  * New package kcachegrind-converters.  These foreign format converters
+    are packaged separately so that kcachegrind need not depend on php.
+  * Binary package kmtrace has returned.  Note that the kmtrace libraries
+    for debian are now installed in /usr/lib/kmtrace, not in /usr/lib as
+    is done upstream.
   * Versioned libqt3-mt-dev build-depends is no longer necessary since
     kdelibs4-dev already forces Qt 3.3.
+  * Made libcvsservice-dev depend on kdelibs4-dev.
+  * Removed python dependency from poxml, since all apps are now compiled
+    binaries.
+  * Added a sample kde-buildrc to the kdesdk-scripts documentation.
 
- -- Ben Burton <bab@debian.org>  Sun,  1 Aug 2004 18:41:10 +1000
+ -- Ben Burton <bab@debian.org>  Fri, 15 Oct 2004 09:55:26 +1000
 
 kdesdk (4:3.2.3-2) unstable; urgency=low
 
diff -urN -x CVS kdesdk.orig/debian/control kdesdk/debian/control
--- kdesdk.orig/debian/control	2004-08-02 01:58:17.000000000 +0200
+++ kdesdk/debian/control	2005-03-25 01:58:46.000000000 +0100
@@ -2,14 +2,15 @@
 Section: kde
 Priority: optional
 Maintainer: Ben Burton <bab@debian.org>
-Build-Depends: automake1.7, binutils-dev, bison, debhelper (>> 4.0.0), flex, kdelibs4-dev (>= 4:3.2.92), libdb4.0-dev
+Build-Depends: automake1.7, binutils-dev, bison, debhelper (>> 4.0.0), flex, kdelibs4-dev (>= 4:3.4.0), kdepim-dev (>= 4:3.4.0), libapr0-dev, libdb4.2-dev, libkcal2-dev (>= 4:3.4.0), libktnef1-dev (>= 4:3.4.0), libsvn0-dev
+Build-Conflicts: autoconf2.13
 Standards-Version: 3.6.1
 
 Package: kdesdk
 Architecture: any
 Section: kde
 Depends: cervisia (>= ${Source-Version}), kapptemplate (>= ${Source-Version}), kbabel (>= ${Source-Version}), kbugbuster (>= ${Source-Version}), kcachegrind (>= ${Source-Version}), kdesdk-kfile-plugins (>= ${Source-Version}), kdesdk-misc (>= ${Source-Version}), kdesdk-scripts (>= ${Source-Version}), kmtrace (>= ${Source-Version}), kompare (>= ${Source-Version}), kspy (>= ${Source-Version}), kuiviewer (>= ${Source-Version}), poxml (>= ${Source-Version}), umbrello (>= ${Source-Version})
-Suggests: kbabel-dev, kdesdk-doc-html
+Suggests: kcachegrind-converters, kbabel-dev, kdesdk-doc-html
 Description: KDE Software Development Kit
  The KDE Software Development Kit is a collection of applications and tools
  useful for developing KDE applications.
@@ -38,14 +39,13 @@
 Architecture: any
 Section: devel
 Depends: ${shlibs:Depends}
-Recommends: cvs (>= 1.11)
 Suggests: khelpcenter, kdesdk-doc-html
 Description: a graphical CVS front end for KDE
  Cervisia is a KDE-based graphical front end for the CVS client.
  .
  As well as providing both common and advanced CVS operations, it offers
  a variety of methods for graphically viewing information about the CVS
- repository and your own sandbox and the relationships between different
+ repository, your own sandbox and the relationships between different
  versions of files.  A Changelog editor is also included and is coupled
  with the commit dialog.
  .
@@ -76,7 +76,8 @@
  advanced and easy to use PO-file editor with full navigational and editing
  capabilities, syntax checking and statistics.  CatalogManager is a multi
  functional catalog manager which allows you to keep track of many
- PO-files at once.  KBabelDict is a dictionary for translators.
+ PO-files at once.  KBabelDict is a dictionary to assist with searching
+ for common translations.
  .
  This package is part of the KDE Software Development Kit.
 
@@ -93,7 +94,8 @@
  advanced and easy to use PO-file editor with full navigational and editing
  capabilities, syntax checking and statistics.  CatalogManager is a multi
  functional catalog manager which allows you to keep track of many
- PO-files at once.  KBabelDict is a dictionary for translators.
+ PO-files at once.  KBabelDict is a dictionary to assist with searching
+ for common translations.
  .
  This package contains the KBabel development files.
  .
@@ -115,7 +117,7 @@
 Architecture: any
 Section: devel
 Depends: ${shlibs:Depends}
-Recommends: valgrind-calltree
+Recommends: valgrind-callgrind | valgrind-calltree
 Suggests: kcachegrind-converters, graphviz, khelpcenter, kdesdk-doc-html
 Description: visualisation tool for valgrind profiling output
  KCachegrind is a visualisation tool for the profiling data generated
@@ -123,24 +125,35 @@
  profiled using calltree without being recompiled, and shared libraries
  and plugin architectures are supported.
  .
+ For visualising the output from other profiling tools, several converters
+ can be found in the kcachegrind-converters package.
+ .
  This package is part of the KDE Software Development Kit.
 
 Package: kcachegrind-converters
 Architecture: all
 Section: devel
-Depends: ${perl:Depends}, php4-cgi, python
+Depends: ${perl:Depends}, php4-cli, python
 Recommends: kcachegrind
-Description: TODO
- TODO
+Description: format converters for KCachegrind profiling visualisation tool
+ This is a collection of scripts for converting the output from
+ different profiling tools into a format that KCachegrind can use.
+ .
+ KCachegrind is a visualisation tool for the profiling data generated
+ by calltree, a profiling skin for valgrind.  Applications can be
+ profiled using calltree without being recompiled, and shared libraries
+ and plugin architectures are supported.
+ .
+ This package is part of the KDE Software Development Kit.
 
 Package: kdesdk-kfile-plugins
 Architecture: any
 Section: kde
 Depends: ${shlibs:Depends}
-Description: KDE file dialog plugins for source and patch files
+Description: KDE file dialog plugins for software development files
  This is a collection of plugins for the KDE file dialog.  These plugins
- extend the file dialog to offer advanced meta-information for source
- and patch files.
+ extend the file dialog to offer advanced meta-information for source files,
+ patch files and Qt Linguist data.
  .
  This package is part of the KDE Software Development Kit.
 
@@ -159,6 +172,7 @@
  Included are:
   - headers to assist with profiling KDE code;
   - a widget style for checking conformity with the KDE/Qt style guide;
+  - a KDE I/O slave for accessing subversion respositories;
   - palettes that match the KDE standard colour palette;
   - a KDE address book plugin that reads the list of KDE CVS accounts.
  .
@@ -188,8 +202,7 @@
 Package: kmtrace
 Architecture: any
 Section: devel
-Depends: ${shlibs:Depends}
-Recommends: less
+Depends: ${shlibs:Depends}, less
 Description: a KDE memory leak tracer
  KMtrace is a KDE tool to assist with malloc debugging using glibc's
  "mtrace" functionality.
@@ -202,8 +215,9 @@
 Depends: ${shlibs:Depends}
 Suggests: khelpcenter
 Description: a KDE GUI for viewing differences between files
- Kompare is a KDE GUI for viewing the differences between two files.
- It will also optionally create a diff file.
+ Kompare is a graphical user interface for viewing the differences between
+ files.  It can compare two documents, create a diff file, display a diff
+ file and/or blend a diff file back into the original documents.
  .
  This package is part of the KDE Software Development Kit.
 
@@ -242,7 +256,7 @@
 Package: libcvsservice0
 Architecture: any
 Section: libs
-Depends: ${shlibs:Depends}, cvs
+Depends: ${shlibs:Depends}, cvs (>= 1.11)
 Recommends: kdelibs-bin
 Replaces: cervisia (<< 4:3.2.0)
 Description: DCOP service for accessing CVS repositories
@@ -258,7 +272,7 @@
 Package: libcvsservice-dev
 Architecture: any
 Section: libdevel
-Depends: libcvsservice0 (= ${Source-Version})
+Depends: libcvsservice0 (= ${Source-Version}), kdelibs4-dev
 Replaces: cervisia (<< 4:3.2.0)
 Description: development files for CVS DCOP service
  The library libcvsservice provides a DCOP service for accessing and
@@ -274,7 +288,7 @@
 Package: poxml
 Architecture: any
 Section: devel
-Depends: ${shlibs:Depends}, python
+Depends: ${shlibs:Depends}
 Description: tools for using PO-files to translate DocBook XML files
  This is a collection of tools that facilitate translating DocBook XML
  files using gettext message files (PO-files).
@@ -293,9 +307,9 @@
 Replaces: umbrello-manual (<< 20040311)
 Description: UML modelling tool and code generator
  Umbrello UML Modeller is a Unified Modelling Language editor for KDE.
- With UML you can create diagrams of software and other systems in a
- standard format.  Umbrello can also generate code from your UML diagrams
- in a number of programming languages.
+ With UML you can create diagrams of software and other systems in an
+ industry standard format.  Umbrello can also generate code from your
+ UML diagrams in a number of programming languages.
  .
  The program supports class diagrams, sequence diagrams, collaboration
  diagrams, use case diagrams, state diagrams, activity diagrams, component
diff -urN -x CVS kdesdk.orig/debian/copyright kdesdk/debian/copyright
--- kdesdk.orig/debian/copyright	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/copyright	2005-03-19 05:16:40.000000000 +0100
@@ -11,14 +11,17 @@
 
   Note that kdesdk has many contributers beyond those listed below.
 
-  Cervisia: Bernd Gehrmann <bernd@physik.hu-berlin.de>,
-      Christian Loose <christian.loose@hamburg.de> and
-      Andre Woebbeking <woebbeking@web.de>
+  Cervisia: Bernd Gehrmann <bernd@mail.berlios.de>,
+      Christian Loose <christian.loose@kdemail.net>,
+      Andre Woebbeking <woebbeking@web.de>,
+      Carlos Woelz <carloswoelz@imap-mail.com> and others
   KAppTemplate: Kurt Granroth <granroth@kde.org>
   KBabel: Matthias Kiefer <kiefer@kde.org>,
       Wolfram Diestel <wolfram@steloj.de>, Andrea Rizzi <rizzi@kde.org>,
-      Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>
-      and Dwayne Bailey <dwayne@translate.org.za>
+      Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>,
+      Asgeir Frimannsson <asgeirf@redhat.com>,
+      Dwayne Bailey <dwayne@translate.org.za>,
+      Bram Schoenmakers <bramschoenmakers@kde.nl> and others
   KBugBuster: Martijn Klingens <klingens@kde.org>,
       Simon Hausmann <hausmann@kde.org>,
       Cornelius Schumacher <schumacher@kde.org>, David Faure <faure@kde.org>
@@ -27,30 +30,49 @@
   KDEPalettes: Daniel M. Duley <mosfet@jorsm.com>
   KMTrace: Waldo Bastian <bastian@kde.org>, Mike Haertel <mike@ai.mit.edu>,
       Andi Kleen <ak@suse.de>
-  Kompare: John Firebaugh <jfirebaugh@kde.org> and
-      Otto Bruggeman <otto.bruggeman@home.nl>
+  Kompare: John Firebaugh <jfirebaugh@kde.org>,
+      Otto Bruggeman <otto.bruggeman@home.nl> and others
   KProfileMethod: David Faure <faure@kde.org>
   KSpy: Richard Moore <rich@kde.org>
-  KStartPerf: Geert Jansen <jansen@kde.org>
-  KUIViewer: Richard Moore <rich@kde.org> and
-      Ian Reinhart Geiser <geiseri@kde.org>
-  PO-XML: Stephan Kulow <coolo@kde.org>
+  KStartPerf: Geert Jansen <jansen@kde.org>, Rik Hemsley <rik@kde.org>,
+      Simon Hausmann <hausmann@kde.org> and Bill Soudan <soudan@kde.org>
+  KUIViewer: Richard Moore <rich@kde.org>,
+      Ian Reinhart Geiser <geiseri@kde.org> and
+      Benjamin C. Meyer <ben+kuiviewer@meyerhome.net>
+  PO-XML: Stephan Kulow <coolo@kde.org> and
+      Peter Wells <pete@yamuna.demon.co.uk>
   Style guide check: Maksim Orlovich <orlovich@cs.rochester.edu>,
-      Ryan Cumming <bodnar42@phalynx.dhs.org> and others
-  Umbrello: Paul Hensgen <phensgen@sourceforge.net> and several others
+      Ryan Cumming <ryan@completely.kicks-ass.org> and others
+  Subversion I/O slave: Mickael Marchand <marchand@kde.org>
+  Umbrello: Paul Hensgen <phensgen@users.sourceforge.net> and many others
 
 Copyright:
 
   All components of this package are released under the GNU General
-  Public License (GPL), with the following exceptions:
+  Public License (GPL), with the following exceptions.  Note that the
+  abbreviation LGPL refers to the GNU Library General Public License.
 
+    ANTLR (part of PO-XML): (see below)
     Cervisia: Q Public License (see below)
-    KMTrace: GNU Library General Public License (LGPL)
-    KProfileMethod: GNU Library General Public License (LGPL)
+    CVS service: LGPL
+    Emacs helper files: Mix of GPL and LGPL
+    KBabel: GPL, though some source files are under the LGPL
+    KCachegrind converters:
+      dprof2calltree, pprof2calltree: (see below)
+    KMTrace: LGPL
+    KProfileMethod: LGPL
     KStartPerf: Artistic License
-    KUIViewer: GNU Library General Public License (LGPL)
-    Script cvs-clean: BSD License
-    Script extend_dmalloc: (see below)
+    KUIViewer: LGPL
+    Scripts:
+      cheatmake, extractattr, kde-spellcheck.pl: LGPL
+      cvs-clean, cvslastreferenced: BSD License
+      cvscheck: Artistic License
+      extend_dmalloc: (see below)
+      pruneemptydirs, rc2kcfgxt.pl: Released to the public domain
+    Subversion I/O slave: Mix of GPL and LGPL
+    Umbrello: GPL, though a few source files are under the LGPL
+    Umbrello icons: (see below)
+    DocBook documentation: (see below)
 
   On Debian GNU/Linux systems, the complete texts of these licenses
   can be found in `/usr/share/common-licenses/GPL',
@@ -59,6 +81,30 @@
 
   --------------------
 
+  ANTLR:
+
+  SOFTWARE RIGHTS
+
+  ANTLR 2.6.0 MageLang Insitute, 1998, 1999
+
+  We reserve no legal rights to the ANTLR--it is fully in the public
+  domain. An individual or company may do whatever they wish with source
+  code distributed with ANTLR or the code generated by ANTLR, including
+  the incorporation of ANTLR, or its output, into commercial software.
+
+  We encourage users to develop software with ANTLR. However, we do ask
+  that credit is given to us for developing ANTLR. By "credit", we mean
+  that if you use ANTLR or incorporate any source code into one of your
+  programs (commercial product, research project, or otherwise) that you
+  acknowledge this fact somewhere in the documentation, research report,
+  etc... If you like ANTLR and have developed a nice tool with the
+  output, please mention that you developed it using ANTLR. In addition,
+  we ask that the headers remain intact in our source code. As long as
+  these guidelines are kept, we expect to continue enhancing this system
+  and expect to make other tools available as they are completed.
+
+  --------------------
+
   Cervisia:
 
                                THE Q PUBLIC LICENSE
@@ -167,6 +213,44 @@
 
   --------------------
 
+  Converters dprof2calltree, pprof2calltree for KCachegrind:
+
+  Redistribution and use in source and binary forms, with or without
+  modification, are permitted provided that the following conditions are met:
+
+  - Redistributions of source code must retain the above copyright notice,
+  this list of conditions and the following disclaimer.
+
+  - Redistributions in binary form must reproduce the above copyright
+  notice, this list of conditions and the following disclaimer in the
+  documentation and/or other materials provided with the distribution.
+
+  - All advertising materials mentioning features or use of this software
+  must display the following acknowledgement: This product includes software
+  developed by OmniTI Computer Consulting.
+
+  - Neither name of the company nor the names of its contributors may be
+  used to endorse or promote products derived from this software without
+  specific prior written permission.
+
+  THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS `AS IS'' AND ANY
+  EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
+  WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
+  DISCLAIMED. IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE FOR ANY
+  DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
+  (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
+  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
+  ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
+  (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
+  THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
+
+  Copyright (c) 2004 OmniTI Computer Consulting
+  All rights reserved
+  The following code was written by George Schlossnagle <george@omniti.com>
+  and is provided completely free and without any warranty.
+
+  --------------------
+
   Script extend_dmalloc:
 
   Copyright 1995 by Gray Watson
@@ -186,3 +270,466 @@
 
   The author may be contacted at gray.watson@letters.com
 
+  --------------------
+
+  Umbrello Icons:
+
+    The images shipped with Umbrello (including images in the source
+    directory umbrello/umbrello/pics as well as the main Umbrello
+    application and mimetype icons) are released under the following
+    license.
+
+      KDE Crystal theme icons.
+      Copyright (C) 2002 and following years KDE Artists
+
+      This library is free software; you can redistribute it and/or
+      modify it under the terms of the GNU Lesser General Public License
+      as published by the Free Software Foundation, version 2.1 of the
+      License.
+
+      This library is distributed in the hope that it will be useful,
+      but WITHOUT ANY WARRANTY; without even the implied warranty of
+      MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+      Lesser General Public License for more details.
+
+      You should have received a copy of the GNU Lesser General Public
+      License along with this library; if not, write to the Free
+      Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
+      02111-1307  USA
+
+          **** NOTE THIS ADD-ON ****
+
+      The GNU Lesser General Public License or LGPL is written for
+      software libraries in the first place. We expressly want the LGPL
+      to be valid for this artwork library too.
+
+      KDE Crystal theme icons is a special kind of software library, it
+      is an artwork library, it's elements can be used in a Graphical
+      User Interface, or GUI.
+
+      Source code, for this library means:
+        - for vectors svg;
+        - for pixels, if applicable, the multi-layered formats xcf
+          or psd, or otherwise png.
+
+      The LGPL in some sections obliges you to make the files carry
+      notices. With images this is in some cases impossible or hardly
+      useful.  With this library a notice is placed at a prominent place
+      in the directory containing the elements. You may follow this practice.
+
+      The exception in section 6 of the GNU Lesser General Public
+      License covers the use of elements of this art library in a GUI.
+
+      kde-artists [at] kde.org
+
+  --------------------
+
+  DocBook Documentation:
+
+    Permission is granted to copy, distribute and/or modify this
+    document under the terms of the GNU Free Documentation License,
+    Version 1.1 or any later version published by the Free Software
+    Foundation; with no Invariant Sections, with no Front-Cover Texts,
+    and with no Back-Cover Texts.
+
+    A copy of the GNU Free Documentation License (Version 1.2) is
+    included below.
+
+
+                    GNU Free Documentation License
+                      Version 1.2, November 2002
+
+
+     Copyright (C) 2000,2001,2002  Free Software Foundation, Inc.
+         59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+     Everyone is permitted to copy and distribute verbatim copies
+     of this license document, but changing it is not allowed.
+
+
+    0. PREAMBLE
+
+    The purpose of this License is to make a manual, textbook, or other
+    functional and useful document "free" in the sense of freedom: to
+    assure everyone the effective freedom to copy and redistribute it,
+    with or without modifying it, either commercially or noncommercially.
+    Secondarily, this License preserves for the author and publisher a way
+    to get credit for their work, while not being considered responsible
+    for modifications made by others.
+
+    This License is a kind of "copyleft", which means that derivative
+    works of the document must themselves be free in the same sense.  It
+    complements the GNU General Public License, which is a copyleft
+    license designed for free software.
+
+    We have designed this License in order to use it for manuals for free
+    software, because free software needs free documentation: a free
+    program should come with manuals providing the same freedoms that the
+    software does.  But this License is not limited to software manuals;
+    it can be used for any textual work, regardless of subject matter or
+    whether it is published as a printed book.  We recommend this License
+    principally for works whose purpose is instruction or reference.
+
+
+    1. APPLICABILITY AND DEFINITIONS
+
+    This License applies to any manual or other work, in any medium, that
+    contains a notice placed by the copyright holder saying it can be
+    distributed under the terms of this License.  Such a notice grants a
+    world-wide, royalty-free license, unlimited in duration, to use that
+    work under the conditions stated herein.  The "Document", below,
+    refers to any such manual or work.  Any member of the public is a
+    licensee, and is addressed as "you".  You accept the license if you
+    copy, modify or distribute the work in a way requiring permission
+    under copyright law.
+
+    A "Modified Version" of the Document means any work containing the
+    Document or a portion of it, either copied verbatim, or with
+    modifications and/or translated into another language.
+
+    A "Secondary Section" is a named appendix or a front-matter section of
+    the Document that deals exclusively with the relationship of the
+    publishers or authors of the Document to the Document's overall subject
+    (or to related matters) and contains nothing that could fall directly
+    within that overall subject.  (Thus, if the Document is in part a
+    textbook of mathematics, a Secondary Section may not explain any
+    mathematics.)  The relationship could be a matter of historical
+    connection with the subject or with related matters, or of legal,
+    commercial, philosophical, ethical or political position regarding
+    them.
+
+    The "Invariant Sections" are certain Secondary Sections whose titles
+    are designated, as being those of Invariant Sections, in the notice
+    that says that the Document is released under this License.  If a
+    section does not fit the above definition of Secondary then it is not
+    allowed to be designated as Invariant.  The Document may contain zero
+    Invariant Sections.  If the Document does not identify any Invariant
+    Sections then there are none.
+
+    The "Cover Texts" are certain short passages of text that are listed,
+    as Front-Cover Texts or Back-Cover Texts, in the notice that says that
+    the Document is released under this License.  A Front-Cover Text may
+    be at most 5 words, and a Back-Cover Text may be at most 25 words.
+
+    A "Transparent" copy of the Document means a machine-readable copy,
+    represented in a format whose specification is available to the
+    general public, that is suitable for revising the document
+    straightforwardly with generic text editors or (for images composed of
+    pixels) generic paint programs or (for drawings) some widely available
+    drawing editor, and that is suitable for input to text formatters or
+    for automatic translation to a variety of formats suitable for input
+    to text formatters.  A copy made in an otherwise Transparent file
+    format whose markup, or absence of markup, has been arranged to thwart
+    or discourage subsequent modification by readers is not Transparent.
+    An image format is not Transparent if used for any substantial amount
+    of text.  A copy that is not "Transparent" is called "Opaque".
+
+    Examples of suitable formats for Transparent copies include plain
+    ASCII without markup, Texinfo input format, LaTeX input format, SGML
+    or XML using a publicly available DTD, and standard-conforming simple
+    HTML, PostScript or PDF designed for human modification.  Examples of
+    transparent image formats include PNG, XCF and JPG.  Opaque formats
+    include proprietary formats that can be read and edited only by
+    proprietary word processors, SGML or XML for which the DTD and/or
+    processing tools are not generally available, and the
+    machine-generated HTML, PostScript or PDF produced by some word
+    processors for output purposes only.
+
+    The "Title Page" means, for a printed book, the title page itself,
+    plus such following pages as are needed to hold, legibly, the material
+    this License requires to appear in the title page.  For works in
+    formats which do not have any title page as such, "Title Page" means
+    the text near the most prominent appearance of the work's title,
+    preceding the beginning of the body of the text.
+
+    A section "Entitled XYZ" means a named subunit of the Document whose
+    title either is precisely XYZ or contains XYZ in parentheses following
+    text that translates XYZ in another language.  (Here XYZ stands for a
+    specific section name mentioned below, such as "Acknowledgements",
+    "Dedications", "Endorsements", or "History".)  To "Preserve the Title"
+    of such a section when you modify the Document means that it remains a
+    section "Entitled XYZ" according to this definition.
+
+    The Document may include Warranty Disclaimers next to the notice which
+    states that this License applies to the Document.  These Warranty
+    Disclaimers are considered to be included by reference in this
+    License, but only as regards disclaiming warranties: any other
+    implication that these Warranty Disclaimers may have is void and has
+    no effect on the meaning of this License.
+
+
+    2. VERBATIM COPYING
+
+    You may copy and distribute the Document in any medium, either
+    commercially or noncommercially, provided that this License, the
+    copyright notices, and the license notice saying this License applies
+    to the Document are reproduced in all copies, and that you add no other
+    conditions whatsoever to those of this License.  You may not use
+    technical measures to obstruct or control the reading or further
+    copying of the copies you make or distribute.  However, you may accept
+    compensation in exchange for copies.  If you distribute a large enough
+    number of copies you must also follow the conditions in section 3.
+
+    You may also lend copies, under the same conditions stated above, and
+    you may publicly display copies.
+
+
+    3. COPYING IN QUANTITY
+
+    If you publish printed copies (or copies in media that commonly have
+    printed covers) of the Document, numbering more than 100, and the
+    Document's license notice requires Cover Texts, you must enclose the
+    copies in covers that carry, clearly and legibly, all these Cover
+    Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
+    the back cover.  Both covers must also clearly and legibly identify
+    you as the publisher of these copies.  The front cover must present
+    the full title with all words of the title equally prominent and
+    visible.  You may add other material on the covers in addition.
+    Copying with changes limited to the covers, as long as they preserve
+    the title of the Document and satisfy these conditions, can be treated
+    as verbatim copying in other respects.
+
+    If the required texts for either cover are too voluminous to fit
+    legibly, you should put the first ones listed (as many as fit
+    reasonably) on the actual cover, and continue the rest onto adjacent
+    pages.
+
+    If you publish or distribute Opaque copies of the Document numbering
+    more than 100, you must either include a machine-readable Transparent
+    copy along with each Opaque copy, or state in or with each Opaque copy
+    a computer-network location from which the general network-using
+    public has access to download using public-standard network protocols
+    a complete Transparent copy of the Document, free of added material.
+    If you use the latter option, you must take reasonably prudent steps,
+    when you begin distribution of Opaque copies in quantity, to ensure
+    that this Transparent copy will remain thus accessible at the stated
+    location until at least one year after the last time you distribute an
+    Opaque copy (directly or through your agents or retailers) of that
+    edition to the public.
+
+    It is requested, but not required, that you contact the authors of the
+    Document well before redistributing any large number of copies, to give
+    them a chance to provide you with an updated version of the Document.
+
+
+    4. MODIFICATIONS
+
+    You may copy and distribute a Modified Version of the Document under
+    the conditions of sections 2 and 3 above, provided that you release
+    the Modified Version under precisely this License, with the Modified
+    Version filling the role of the Document, thus licensing distribution
+    and modification of the Modified Version to whoever possesses a copy
+    of it.  In addition, you must do these things in the Modified Version:
+
+    A. Use in the Title Page (and on the covers, if any) a title distinct
+       from that of the Document, and from those of previous versions
+       (which should, if there were any, be listed in the History section
+       of the Document).  You may use the same title as a previous version
+       if the original publisher of that version gives permission.
+    B. List on the Title Page, as authors, one or more persons or entities
+       responsible for authorship of the modifications in the Modified
+       Version, together with at least five of the principal authors of the
+       Document (all of its principal authors, if it has fewer than five),
+       unless they release you from this requirement.
+    C. State on the Title page the name of the publisher of the
+       Modified Version, as the publisher.
+    D. Preserve all the copyright notices of the Document.
+    E. Add an appropriate copyright notice for your modifications
+       adjacent to the other copyright notices.
+    F. Include, immediately after the copyright notices, a license notice
+       giving the public permission to use the Modified Version under the
+       terms of this License, in the form shown in the Addendum below.
+    G. Preserve in that license notice the full lists of Invariant Sections
+       and required Cover Texts given in the Document's license notice.
+    H. Include an unaltered copy of this License.
+    I. Preserve the section Entitled "History", Preserve its Title, and add
+       to it an item stating at least the title, year, new authors, and
+       publisher of the Modified Version as given on the Title Page.  If
+       there is no section Entitled "History" in the Document, create one
+       stating the title, year, authors, and publisher of the Document as
+       given on its Title Page, then add an item describing the Modified
+       Version as stated in the previous sentence.
+    J. Preserve the network location, if any, given in the Document for
+       public access to a Transparent copy of the Document, and likewise
+       the network locations given in the Document for previous versions
+       it was based on.  These may be placed in the "History" section.
+       You may omit a network location for a work that was published at
+       least four years before the Document itself, or if the original
+       publisher of the version it refers to gives permission.
+    K. For any section Entitled "Acknowledgements" or "Dedications",
+       Preserve the Title of the section, and preserve in the section all
+       the substance and tone of each of the contributor acknowledgements
+       and/or dedications given therein.
+    L. Preserve all the Invariant Sections of the Document,
+       unaltered in their text and in their titles.  Section numbers
+       or the equivalent are not considered part of the section titles.
+    M. Delete any section Entitled "Endorsements".  Such a section
+       may not be included in the Modified Version.
+    N. Do not retitle any existing section to be Entitled "Endorsements"
+       or to conflict in title with any Invariant Section.
+    O. Preserve any Warranty Disclaimers.
+
+    If the Modified Version includes new front-matter sections or
+    appendices that qualify as Secondary Sections and contain no material
+    copied from the Document, you may at your option designate some or all
+    of these sections as invariant.  To do this, add their titles to the
+    list of Invariant Sections in the Modified Version's license notice.
+    These titles must be distinct from any other section titles.
+
+    You may add a section Entitled "Endorsements", provided it contains
+    nothing but endorsements of your Modified Version by various
+    parties--for example, statements of peer review or that the text has
+    been approved by an organization as the authoritative definition of a
+    standard.
+
+    You may add a passage of up to five words as a Front-Cover Text, and a
+    passage of up to 25 words as a Back-Cover Text, to the end of the list
+    of Cover Texts in the Modified Version.  Only one passage of
+    Front-Cover Text and one of Back-Cover Text may be added by (or
+    through arrangements made by) any one entity.  If the Document already
+    includes a cover text for the same cover, previously added by you or
+    by arrangement made by the same entity you are acting on behalf of,
+    you may not add another; but you may replace the old one, on explicit
+    permission from the previous publisher that added the old one.
+
+    The author(s) and publisher(s) of the Document do not by this License
+    give permission to use their names for publicity for or to assert or
+    imply endorsement of any Modified Version.
+
+
+    5. COMBINING DOCUMENTS
+
+    You may combine the Document with other documents released under this
+    License, under the terms defined in section 4 above for modified
+    versions, provided that you include in the combination all of the
+    Invariant Sections of all of the original documents, unmodified, and
+    list them all as Invariant Sections of your combined work in its
+    license notice, and that you preserve all their Warranty Disclaimers.
+
+    The combined work need only contain one copy of this License, and
+    multiple identical Invariant Sections may be replaced with a single
+    copy.  If there are multiple Invariant Sections with the same name but
+    different contents, make the title of each such section unique by
+    adding at the end of it, in parentheses, the name of the original
+    author or publisher of that section if known, or else a unique number.
+    Make the same adjustment to the section titles in the list of
+    Invariant Sections in the license notice of the combined work.
+
+    In the combination, you must combine any sections Entitled "History"
+    in the various original documents, forming one section Entitled
+    "History"; likewise combine any sections Entitled "Acknowledgements",
+    and any sections Entitled "Dedications".  You must delete all sections
+    Entitled "Endorsements".
+
+
+    6. COLLECTIONS OF DOCUMENTS
+
+    You may make a collection consisting of the Document and other documents
+    released under this License, and replace the individual copies of this
+    License in the various documents with a single copy that is included in
+    the collection, provided that you follow the rules of this License for
+    verbatim copying of each of the documents in all other respects.
+
+    You may extract a single document from such a collection, and distribute
+    it individually under this License, provided you insert a copy of this
+    License into the extracted document, and follow this License in all
+    other respects regarding verbatim copying of that document.
+
+
+    7. AGGREGATION WITH INDEPENDENT WORKS
+
+    A compilation of the Document or its derivatives with other separate
+    and independent documents or works, in or on a volume of a storage or
+    distribution medium, is called an "aggregate" if the copyright
+    resulting from the compilation is not used to limit the legal rights
+    of the compilation's users beyond what the individual works permit.
+    When the Document is included in an aggregate, this License does not
+    apply to the other works in the aggregate which are not themselves
+    derivative works of the Document.
+
+    If the Cover Text requirement of section 3 is applicable to these
+    copies of the Document, then if the Document is less than one half of
+    the entire aggregate, the Document's Cover Texts may be placed on
+    covers that bracket the Document within the aggregate, or the
+    electronic equivalent of covers if the Document is in electronic form.
+    Otherwise they must appear on printed covers that bracket the whole
+    aggregate.
+
+
+    8. TRANSLATION
+
+    Translation is considered a kind of modification, so you may
+    distribute translations of the Document under the terms of section 4.
+    Replacing Invariant Sections with translations requires special
+    permission from their copyright holders, but you may include
+    translations of some or all Invariant Sections in addition to the
+    original versions of these Invariant Sections.  You may include a
+    translation of this License, and all the license notices in the
+    Document, and any Warranty Disclaimers, provided that you also include
+    the original English version of this License and the original versions
+    of those notices and disclaimers.  In case of a disagreement between
+    the translation and the original version of this License or a notice
+    or disclaimer, the original version will prevail.
+
+    If a section in the Document is Entitled "Acknowledgements",
+    "Dedications", or "History", the requirement (section 4) to Preserve
+    its Title (section 1) will typically require changing the actual
+    title.
+
+
+    9. TERMINATION
+
+    You may not copy, modify, sublicense, or distribute the Document except
+    as expressly provided for under this License.  Any other attempt to
+    copy, modify, sublicense or distribute the Document is void, and will
+    automatically terminate your rights under this License.  However,
+    parties who have received copies, or rights, from you under this
+    License will not have their licenses terminated so long as such
+    parties remain in full compliance.
+
+
+    10. FUTURE REVISIONS OF THIS LICENSE
+
+    The Free Software Foundation may publish new, revised versions
+    of the GNU Free Documentation License from time to time.  Such new
+    versions will be similar in spirit to the present version, but may
+    differ in detail to address new problems or concerns.  See
+    http://www.gnu.org/copyleft/.
+
+    Each version of the License is given a distinguishing version number.
+    If the Document specifies that a particular numbered version of this
+    License "or any later version" applies to it, you have the option of
+    following the terms and conditions either of that specified version or
+    of any later version that has been published (not as a draft) by the
+    Free Software Foundation.  If the Document does not specify a version
+    number of this License, you may choose any version ever published (not
+    as a draft) by the Free Software Foundation.
+
+
+    ADDENDUM: How to use this License for your documents
+
+    To use this License in a document you have written, include a copy of
+    the License in the document and put the following copyright and
+    license notices just after the title page:
+
+        Copyright (c)  YEAR  YOUR NAME.
+        Permission is granted to copy, distribute and/or modify this document
+        under the terms of the GNU Free Documentation License, Version 1.2
+        or any later version published by the Free Software Foundation;
+        with no Invariant Sections, no Front-Cover Texts, and no Back-Cover
+        Texts.  A copy of the license is included in the section entitled
+        "GNU Free Documentation License".
+
+    If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
+    replace the "with...Texts." line with this:
+
+        with the Invariant Sections being LIST THEIR TITLES, with the
+        Front-Cover Texts being LIST, and with the Back-Cover Texts being LIST.
+
+    If you have Invariant Sections without Cover Texts, or some other
+    combination of the three, merge those two alternatives to suit the
+    situation.
+
+    If your document contains nontrivial examples of program code, we
+    recommend releasing these examples in parallel under your choice of
+    free software license, such as the GNU General Public License,
+    to permit their use in free software.
diff -urN -x CVS kdesdk.orig/debian/create_cvsignore.1 kdesdk/debian/create_cvsignore.1
--- kdesdk.orig/debian/create_cvsignore.1	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/create_cvsignore.1	2005-03-20 08:05:08.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CREATE_CVSIGNORE 1 "May 13, 2002"
+.TH CREATE_CVSIGNORE 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -19,6 +19,7 @@
 create_cvsignore \- creates preliminary .cvsignore in current directory
 .SH SYNOPSIS
 .B create_cvsignore
+[ \fB\-r\fP ]
 .SH DESCRIPTION
 \fBcreate_cvsignore\fP is used to create a preliminary \fI.cvsignore\fP
 file in the current directory.  It does this by adding some standard
@@ -32,6 +33,10 @@
 this tool to work.
 .PP
 This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB-r\fP
+Recursively process this directory and all directories beneath it.
 .SH AUTHOR
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cvs2dist.1 kdesdk/debian/cvs2dist.1
--- kdesdk.orig/debian/cvs2dist.1	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/cvs2dist.1	2005-03-20 13:08:27.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVS2DIST 1 "June 16, 2004"
+.TH CVS2DIST 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -28,6 +28,7 @@
 [ \fB\-\-cvs-root\fP \fIroot\fP ]
 [ \fB\-B, \-\-branch\fP \fIbranch\fP ]
 [ \fB\-\-no-i18n\fP ]
+[ \fB\-\-no-i18n-lang\fP \fIlanguages\fP ]
 [ \fB\-\-log=\fP\fIlogfile\fP | \fB\-l\fP ]
 [ \fB\-m, \-\-make-unpackaged\fP ]
 [ \fB\-g, \-\-no-gzip\fP ]
@@ -36,6 +37,7 @@
 [ \fB\-r, \-\-required-header\fP \fIheader\fP ]
 [ \fB\-e, \-\-required-header-error-message\fP \fImessage\fP ]
 [ \fB\-d, \-\-remove-hidden\fP ]
+[ \fB\-\-replace-files\fP \fIpairs\fP ]
 [[--] \fIaddfile\fP ... ]
 .PP
 .B cvsdist
@@ -49,10 +51,11 @@
 distribution tarball (with a configure script and so on) that users can
 download, build and install.
 .PP
-By default, cvs2dist automatically tries to check out translations
+By default, cvs2dist automatically tries to check out all translations
 of strings and documentation from the corresponding parts of the
 \fIkde-i18n\fP CVS module and include them in the final packages.
-This can be suppressed by passing the option \-\-no-i18n.
+This can be suppressed or modified using the options \-\-no-i18n or
+\-\-no-i18n-lang.
 .PP
 The initial argument \fIpath-to-module\fP should specify where the CVS
 module has been checked out on your system, and the second argument
@@ -107,7 +110,12 @@
 If \-\-no-i18n is passed then this option has no effect.
 .TP
 \fB\-\-no-i18n\fP
-Do not try to check out translations from CVS.
+Do not check out any translations from CVS.
+.TP
+\fB\-\-no-i18n-lang\fP \fIlanguages\fP
+Exclude the given language(s) when checking out translations from CVS.
+The list of languages should be comma-separated,
+such as \fI\-\-no-i18n-lang uk,de,en_GB\fP .
 .TP
 \fB\-\-log=\fP\fIlogfile\fP
 Log all proceedings to the given logfile.  Note that the = is essential,
@@ -143,6 +151,23 @@
 .TP
 \fB\-h, \-\-help\fP
 Display instructions on how to use cvs2dist.
+.TP
+\fB\-\-replace-files\fP \fIpairs\fP
+Move one or more files around in the final distribution packages.
+The \fIpairs\fP argument should be a comma-separated list of
+replacements to make.  Each replacement specifies a single file to move, and
+should be of the form \fIsource\fP@\fIdest\fP.
+.br
+For each replacement, the source file will be moved to the
+destination file (in particular, the source file will be deleted).
+All filenames are relative to the top-level directory
+of the package.  Spaces in filenames are not allowed.
+.br
+Please be careful when using this option!  Try to avoid the use of ..
+in the filenames, since it may cause unexpected problems.
+.br
+An example of this option might be
+\fI\-\-replace-files take_this_file@move_it_here,configure.in.bot.dist@configure.in.bot\fP .
 .SH EXAMPLE
 The following example creates packages of the kolf picture plugin from
 the CVS source tree currently checked out in \fI/sources\fP.
@@ -169,7 +194,8 @@
 \fIhttp://www.katzbrown.com/shiritsu/programming/cvs2dist/\fP.
 .SH AUTHOR
 cvs2dist was written by Jason Katz-Brown <jason@katzbrown.com>,
-Sebastian Stein <seb.stein@hpfsc.de> and Dominique Devriese <devriese@kde.org>.
+Sebastian Stein <seb.stein@hpfsc.de>, Dominique Devriese <devriese@kde.org>
+and Michael Buesch <mbuesch@freenet.de>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cvsaskpass.1 kdesdk/debian/cvsaskpass.1
--- kdesdk.orig/debian/cvsaskpass.1	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/cvsaskpass.1	2005-03-20 07:40:54.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSASKPASS 1 "February 6, 2004"
+.TH CVSASKPASS 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -31,7 +31,7 @@
 The prompt should be of the following form:
 .RS
 .PP
-(\fIuser\fP@\fIhost\fP)'s password:
+\fIuser\fP@\fIhost\fP's password:
 .RE
 .PP
 This will allow the dialog box to display the details of the CVS
@@ -52,11 +52,12 @@
 Details of how to use the CVS service from within another script or C++
 program can be found in \fI/usr/share/doc/libcvsservice0/DESIGN\fP.
 .SH AUTHOR
-The CVS service was written by Christian Loose <christian.loose@hamburg.de>.
+The CVS service was written by Christian Loose <christian.loose@kdemail.net>.
 .br
 Cervisia was written by Bernd Gehrmann <bernd@physik.hu-berlin.de>,
-Christian Loose <christian.loose@hamburg.de> and
-Andre Woebbeking <woebbeking@web.de>.
+Christian Loose <christian.loose@kdemail.net>,
+Andre Woebbeking <woebbeking@web.de>,
+Carlos Woelz <carloswoelz@imap-mail.com> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cvsbackport.1 kdesdk/debian/cvsbackport.1
--- kdesdk.orig/debian/cvsbackport.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/cvsbackport.1	2005-03-20 07:40:54.000000000 +0100
@@ -0,0 +1,52 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH CVSBACKPORT 1 "March 20, 2005"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+cvsbackport \- backport the last change in HEAD to a branch
+.SH SYNOPSIS
+.B cvsbackport
+\fIfile\fP ...
+.SH DESCRIPTION
+For each file given on the command line,
+\fBcvsbackport\fP will attempt to determine the last change made to
+the file in HEAD and then backport that change to a CVS branch (the
+branch name is hard-coded; see below).
+.PP
+The changes to be backported will be displayed on screen, and you will
+have the chance to confirm or abort before any commits are made.
+.PP
+The files must be checked out from HEAD when you run this utility.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH WARNINGS
+The branch tag is hard-coded into the script (currently it is set to
+KDE_3_4_BRANCH).
+.PP
+If you abort (i.e., you do not make the suggested commits), your files
+will be checked out from the branch (and not from HEAD as they were
+before).
+.SH SEE ALSO
+.BR cvsblame (1),
+.BR cvsforwardport (1),
+.BR cvslastchange (1),
+.BR cvslastlog (1),
+.BR cvsrevertlast (1).
+.SH AUTHOR
+This utility was written by Dirk Mueller and David Faure.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cvscheck.1 kdesdk/debian/cvscheck.1
--- kdesdk.orig/debian/cvscheck.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/cvscheck.1	2005-03-26 10:42:18.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSCHECK 1 "January 31, 2004"
+.TH CVSCHECK 1 "March 26, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -26,6 +26,7 @@
 [ \fB\-a, \-\-added\fP ]
 [ \fB\-r, \-\-removed\fP ]
 [ \fB\-c, \-\-conflicts\fP ]
+[ \fB\-l, \-\-local\fP ]
 [ \fIdir\fP ... ]
 .SH DESCRIPTION
 \fBcvscheck\fP prints information about the status of your local CVS
@@ -33,7 +34,8 @@
 extremely fast and does not require a network connection.
 .PP
 The given directories and all of their subdirectories will be processed
-recursively.  If no directory is given, the current directory and its
+recursively (though see the \-\-local option below).
+If no directory is given, the current directory and its
 recursed subdirectories will be used.
 .PP
 Each file with an interesting status will be printed with a status
@@ -68,7 +70,8 @@
 .SH OPTIONS
 By default cvscheck will display the status for all files in and
 beneath the requested directories.  The following options however can be
-used to display only files with a particular status.
+used to display only files with a particular status and/or in a
+particular directory.
 .TP
 \fB\-u, \-\-unknown\fP
 Show only unknown (?) files.
@@ -90,6 +93,10 @@
 .TP
 \fB\-c, \-\-conflicts\fP
 Show only conflict (C) files.
+.TP
+\fB\-l, \-\-local\fP
+Do not recurse.  That is, process the given directory but none of its
+subdirectories.
 .SH SEE ALSO
 .BR cvs (1).
 .SH AUTHOR
diff -urN -x CVS kdesdk.orig/debian/cvs-clean.1 kdesdk/debian/cvs-clean.1
--- kdesdk.orig/debian/cvs-clean.1	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/cvs-clean.1	2005-03-20 08:05:08.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVS-CLEAN 1 "February 6, 2004"
+.TH CVS-CLEAN 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -19,6 +19,8 @@
 cvs\-clean \- delete all files and directories not registered with CVS
 .SH SYNOPSIS
 .B cvs\-clean
+[ \fB-n, \-\-dry-run\fP ]
+[ \fB-h, \-\-help\fP ]
 .SH DESCRIPTION
 \fBcvs\-clean\fP recursively deletes everything in or beneath the
 current directory that is not known to CVS (i.e., that has not been
@@ -31,6 +33,14 @@
 file \fIadmin/Makefile.common\fP found in most KDE application sources.
 .PP
 This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB-n, \-\-dry-run\fP
+Print the intended actions to the console, but do not change anything on
+the filesystem.
+.TP
+\fB-h, \-\-help\fP
+Display usage information.
 .SH SEE ALSO
 .BR cvs (1).
 .SH AUTHOR
diff -urN -x CVS kdesdk.orig/debian/cvsforwardport.1 kdesdk/debian/cvsforwardport.1
--- kdesdk.orig/debian/cvsforwardport.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/cvsforwardport.1	2005-03-20 07:40:54.000000000 +0100
@@ -0,0 +1,52 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH CVSFORWARDPORT 1 "March 20, 2005"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+cvsforwardport \- forwardport the last change in a branch to HEAD
+.SH SYNOPSIS
+.B cvsforwardport
+\fIfile\fP ...
+.SH DESCRIPTION
+For each file given on the command line,
+\fBcvsforwardport\fP will attempt to determine the last change made to
+the file in the primary CVS branch and then forwardport that change to HEAD.
+The branch name is hard-coded; see below.
+.PP
+The changes to be forwardported will be displayed on screen, and you will
+have the chance to confirm or abort before any commits are made.
+.PP
+The files must be checked out from the branch when you run this utility.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH WARNINGS
+The branch tag is hard-coded into the script (currently it is set to
+KDE_3_4_BRANCH).
+.PP
+If you abort (i.e., you do not make the suggested commits), your files
+will be checked out from HEAD (and not from the branch as they were
+before).
+.SH SEE ALSO
+.BR cvsbackport (1),
+.BR cvsblame (1),
+.BR cvslastchange (1),
+.BR cvslastlog (1),
+.BR cvsrevertlast (1).
+.SH AUTHOR
+This utility was written by Dirk Mueller and David Faure.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/cvslastchange.1 kdesdk/debian/cvslastchange.1
--- kdesdk.orig/debian/cvslastchange.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/cvslastchange.1	2005-03-20 08:33:28.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSLASTCHANGE 1 "January 31, 2004"
+.TH CVSLASTCHANGE 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -39,8 +39,19 @@
 .TP
 \fBM\fP +\fIdigits\fP -\fIdigits\fP
 These options are currently ignored.
+.SH ENVIRONMENT VARIABLES
+.TP
+CVSLASTCHANGE_KEEP_WHITESPACE
+Define this variable if you do not want the whitespace to be modified
+in any way when displaying changes.  Usually the whitespace is tidied
+up a little before the changes are displayed on screen.
+.br
+This variable is useful if you are using cvslastchange to extract a
+patch that can be applied elsewhere.
 .SH SEE ALSO
+.BR cvsbackport (1),
 .BR cvsblame (1),
+.BR cvsforwardport (1),
 .BR cvslastlog (1),
 .BR cvsrevertlast (1).
 .SH AUTHOR
diff -urN -x CVS kdesdk.orig/debian/cvslastlog.1 kdesdk/debian/cvslastlog.1
--- kdesdk.orig/debian/cvslastlog.1	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/cvslastlog.1	2005-03-20 07:40:54.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSLASTLOG 1 "May 12, 2003"
+.TH CVSLASTLOG 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -27,7 +27,9 @@
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH SEE ALSO
+.BR cvsbackport (1),
 .BR cvsblame (1),
+.BR cvsforwardport (1),
 .BR cvslastchange (1),
 .BR cvsrevertlast (1).
 .SH AUTHOR
diff -urN -x CVS kdesdk.orig/debian/cvsrevertlast.1 kdesdk/debian/cvsrevertlast.1
--- kdesdk.orig/debian/cvsrevertlast.1	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/cvsrevertlast.1	2005-03-20 07:40:54.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSREVERTLAST 1 "May 12, 2003"
+.TH CVSREVERTLAST 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -26,7 +26,9 @@
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH SEE ALSO
+.BR cvsbackport (1),
 .BR cvsblame (1),
+.BR cvsforwardport (1),
 .BR cvslastchange (1),
 .BR cvslastlog (1).
 .SH AUTHOR
diff -urN -x CVS kdesdk.orig/debian/cvsservice.1 kdesdk/debian/cvsservice.1
--- kdesdk.orig/debian/cvsservice.1	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/cvsservice.1	2005-03-18 23:56:22.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH CVSSERVICE 1 "February 6, 2004"
+.TH CVSSERVICE 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -64,14 +64,16 @@
 .BR cvsaskpass (1),
 .BR dcop (1).
 .PP
-Details of how to use the CVS service from within another script or C++
-program can be found in \fI/usr/share/doc/libcvsservice0/DESIGN\fP.
+Details of how to use the CVS service from within a shell script, a C++
+program or through the JavaScript bindings can be found in
+\fI/usr/share/doc/libcvsservice0/DESIGN\fP.
 .SH AUTHOR
-The CVS service was written by Christian Loose <christian.loose@hamburg.de>.
+The CVS service was written by Christian Loose <christian.loose@kdemail.net>.
 .br
 Cervisia was written by Bernd Gehrmann <bernd@physik.hu-berlin.de>,
-Christian Loose <christian.loose@hamburg.de> and
-Andre Woebbeking <woebbeking@web.de>.
+Christian Loose <christian.loose@kdemail.net>,
+Andre Woebbeking <woebbeking@web.de>,
+Carlos Woelz <carloswoelz@imap-mail.com> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/demangle.1 kdesdk/debian/demangle.1
--- kdesdk.orig/debian/demangle.1	2004-08-01 16:36:12.000000000 +0200
+++ kdesdk/debian/demangle.1	2005-03-07 08:15:19.000000000 +0100
@@ -50,8 +50,8 @@
 .RE
 .SH SEE ALSO
 .BR kminspector (1),
-.BR kmmatch (1).
-.BR kmtrace (1),
+.BR kmmatch (1),
+.BR kmtrace (1).
 .SH AUTHOR
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/dprof2calltree.1 kdesdk/debian/dprof2calltree.1
--- kdesdk.orig/debian/dprof2calltree.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/dprof2calltree.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,60 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH DPROF2CALLTREE 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+dprof2calltree \- convert perl's DProf profiling data to KCachegrind calltree format
+.SH SYNOPSIS
+.B dprof2calltree
+\fB\-f\fP \fIinput\fP
+[ \fB\-o\fP \fIoutput\fP ]
+.SH DESCRIPTION
+\fBdprof2calltree\fP reads the \fItmon.out\fP profiling data output by
+Perl's Devel::DProf profiling package, and converts it into calltree format
+for use by KCachegrind.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB\-f\fP \fIinput\fP
+Specifies the DProf \fItmon.out\fP file to convert.
+.TP
+\fB\-o\fP \fIoutput\fP
+Write the calltree output to the given file for use by KCachegrind.
+If omitted, the output will be written to file of the form
+\fIcachgrind.out.<input>\fP.
+.SH EXAMPLE
+If you run a perl script as:
+.PP
+.RS
+perl -d:DProf yourscript.pl
+.RE
+.PP
+then this will write profiling data to \fItmon.out\fP.  You can then
+work with this data in KCachegrind as follows:
+.PP
+.RS
+dprof2calltree -f tmin.out -o cachegrind.out.foo
+.br
+kcachegrind cachegrind.out.foo
+.RE
+.SH SEE ALSO
+.BR kcachegrind (1).
+.SH AUTHOR
+This converter was written by George Schlossnagle <george@omniti.com>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/extractattr.1 kdesdk/debian/extractattr.1
--- kdesdk.orig/debian/extractattr.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/extractattr.1	2005-03-20 12:29:18.000000000 +0100
@@ -0,0 +1,61 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH EXTRACTATTR 1 "March 20, 2005"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+extractattr \- extract element attributes from UI and XML GUI files
+.SH SYNOPSIS
+.B extractattr
+\fB\-\-attr=\fP\fIname\fP
+[ \fB\-\-attr=\fP\fIname\fP ... ]
+[ \fB\-\-context=\fP\fIname\fP ]
+\fIfile\fP ...
+.PP
+.B extractattr \-\-help
+.SH DESCRIPTION
+\fBextractattr\fP finds all of the given element attributes within the
+given files.  It then writes the corresponding \fIi18n()\fP calls to
+standard output (usually redirected to rc.cpp) so that xgettext can parse
+them.  Only the attributes specified by \fB\-\-attr\fP will be extracted.
+.PP
+Both Qt designer (.ui) files and XML GUI (.rc) files are understood.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB\-\-attr=\fP\fIname\fP
+Specifies an attribute to be extracted.  This option may be used
+multiple times.
+.br
+The \fIname\fP argument must be of the form
+\fIElement\fP,\fIattribute\fP or
+\fIElement\fP,\fIattribute\fP,\fIcontext\fP.
+.br
+The context is optional, and is used in constructing the i18n() calls.
+If specified it will override the default context set by \fB\-\-context\fP.
+.TP
+\fB\-\-context=\fP\fIname\fP
+Give all i18n() calls the given context: i18n("\fIname\fP", ...).
+.TP
+\fB\-\-help\fP
+Display a summary of options.
+.SH EXAMPLE
+extractattr \-\-attr=Title,data \-\-attr=Description,data,Stencils file.ui
+.SH AUTHOR
+This utility was written by Richard Evans <rich@ridas.com> and others.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/extractrc.1 kdesdk/debian/extractrc.1
--- kdesdk.orig/debian/extractrc.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/extractrc.1	2005-03-20 12:29:18.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH EXTRACTRC 1 "January 31, 2004"
+.TH EXTRACTRC 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -16,28 +16,45 @@
 .\" .sp <n>    insert n+1 empty lines
 .\" for manpage-specific macros, see man(7)
 .SH NAME
-extractrc \- extract message strings from UI and GUI-RC files
+extractrc \- extract message strings from UI and XML GUI files
 .SH SYNOPSIS
 .B extractrc
+[ \fB\-\-tag\-group=\fP\fIgroup\fP ]
+[ \fB\-\-tag=\fP\fIname\fP ... ]
 [ \fB\-\-context=\fP\fIname\fP ]
-[ \fB\-\-tag=\fP\fIname\fP ]
 \fIfile\fP ...
+.PP
+.B extractrc \-\-help
 .SH DESCRIPTION
-\fBextractrc\fP finds all text tags and other message strings in the given
-files and writes the corresponding \fIi18n()\fP calls to standard output
-so that xgettext can parse them.
+\fBextractrc\fP finds all text tags and other message strings within the
+given files.  It then writes the corresponding \fIi18n()\fP calls to
+standard output (usually redirected to rc.cpp) so that xgettext can parse
+them.
 .PP
-It understands both (Qt/KDE)-designer's UI files and XML GUI-RC files.
+It understands both Qt designer (.ui) files and XML GUI (.rc) files.
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH OPTIONS
+Note that the old \fB\-\-lines\fP option is deprecated; source line
+numbers are now always included in comments.
+.TP
+\fB\-\-tag\-group=\fP\fIgroup\fP
+Use a predefined group of tags that we are interested in.
+Valid groups are default, koffice and none.
+The default group will be used if this option is omitted.
+.TP
+\fB\-\-tag=\fP\fIname\fP
+Extract also the contents of the tag \fIname\fP.
+This option may be used multiple times
+(e.g., \-\-tag=tag_one \-\-tag=tag_two).
 .TP
 \fB\-\-context=\fP\fIname\fP
 Give all i18n() calls the given context: i18n("\fIname\fP", ...).
 .TP
-\fB\-\-tag=\fP\fIname\fP
-Extract also the contents of the tag \fIname\fP (this option may be
-used multiple times).
+\fB\-\-help\fP
+Display a summary of options.
 .SH AUTHOR
+This utility was written by Richard Evans <rich@ridas.com> and others.
+.br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/fixuifiles.1 kdesdk/debian/fixuifiles.1
--- kdesdk.orig/debian/fixuifiles.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/fixuifiles.1	2005-03-20 08:05:09.000000000 +0100
@@ -0,0 +1,63 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH FIXUIFILES 1 "March 20, 2005"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+fixuifiles \- remove undesirable features from Qt/KDE .ui files
+.SH SYNOPSIS
+.B fixuifiles
+[ \fB\-v, \-\-verbose\fP ]
+[ \fB\-\-omitqtcheck\fP ]
+[ \fIfile\fP ... ]
+.br
+.B fixuifiles \-\-help
+.SH DESCRIPTION
+\fBfixuifiles\fP processes one or more Qt/KDE user interface definition
+files (.ui files) and tries to remove some of the insanities found
+therein.  If no filenames are given, fixuifiles will process all .ui
+files in or beneath the current directory.
+.PP
+The following problems are fixed:
+.PP
+.RS
+Too high minimum Qt version;
+.PP
+Hardcoded untranslatable Alt+Letter accels (auto-added by Qt Designer);
+.PP
+Captions that are equal to class names (auto-added by Qt Designer).
+.RE
+.PP
+The threshold Qt version can be set
+using either a \fI.qt_minversion\fP file (containing simply the Qt version
+number) or a \fIconfigure.in.in\fP file (containing an appropriate
+MIN_CONFIG macro).  These files may be in the directory containing the .ui
+file or any parent directory.  If no threshold Qt version is found,
+a sensible default will be used.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB\-v, \-\-verbose\fP
+Verbose mode.  Additional debugging information is written to standard output.
+.TP
+\fB\-\-omitqtcheck\fP
+Do not check the minimum Qt version.
+.SH AUTHOR
+fixuifiles was written by David Faure <faure@kde.org> and
+Dirk Mueller <mueller@kde.org>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/hotshot2calltree.1 kdesdk/debian/hotshot2calltree.1
--- kdesdk.orig/debian/hotshot2calltree.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/hotshot2calltree.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,57 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH HOTSHOT2CALLTREE 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+hotshot2calltree \- convert hotshot profiling data to KCachegrind calltree format
+.SH SYNOPSIS
+.B hotshot2calltree
+[ \fB\-\-file\-limit\fP \fIlimit\fP ]
+\fB\-o\fP \fIoutput\fP \fIinput\fP [ \fIinput\fP ... ]
+.SH DESCRIPTION
+\fBhotshot2calltree\fP reads one or more pstat profiling data files
+as output by the hotshot python profiler, and converts them into
+calltree format for use by KCachegrind.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB\-o\fP \fIoutput\fP
+Write the calltree output into the given file for use by KCachegrind.
+This may be \fB\-\fP if you wish to write to standard output.
+.TP
+\fIinput\fP ...
+Read the hotshot profiling data from the given file(s).
+.TP
+\fB\-\-file\-limit\fP \fIlimit\fP
+Stop after the given number of input files.
+.SH EXAMPLE
+Suppose that you have used hotshot to profile a python app, with results
+dumped to the file \fIpythongrind.prof\fP.  You may then work with this
+data in KCachegrind as follows.
+.PP
+.RS
+hotshot2cachegrind \-o cachegrind.out.0 pythongrind.prof
+.br
+kcachegrind cachegrind.out.0
+.RE
+.SH SEE ALSO
+.BR kcachegrind (1).
+.SH AUTHOR
+This converter was written by Jorg Beyer <job@webde-ag.de>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kbabel.1 kdesdk/debian/kbabel.1
--- kdesdk.orig/debian/kbabel.1	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kbabel.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH KBABEL 1 "January 31, 2004"
+.TH KBABEL 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -32,7 +32,8 @@
 program) is an advanced and easy to use PO-file editor with full navigational
 and editing capabilities, syntax checking and statistics.  CatalogManager is
 a multi functional catalog manager which allows you to keep track of many
-PO-files at once.  KBabelDict is a dictionary for translators.
+PO-files at once.  KBabelDict is a dictionary to assist with searching
+for common translations.
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH OPTIONS
@@ -64,8 +65,10 @@
 .SH AUTHOR
 KBabel was written by Matthias Kiefer <kiefer@kde.org>,
 Wolfram Diestel <wolfram@steloj.de>, Andrea Rizzi <rizzi@kde.org>,
-Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>
-and Dwayne Bailey <dwayne@translate.org.za>.
+Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>,
+Asgeir Frimannsson <asgeirf@redhat.com>,
+Dwayne Bailey <dwayne@translate.org.za>,
+Bram Schoenmakers <bramschoenmakers@kde.nl> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kbabeldict.1 kdesdk/debian/kbabeldict.1
--- kdesdk.orig/debian/kbabeldict.1	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kbabeldict.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH KBABELDICT 1 "January 31, 2004"
+.TH KBABELDICT 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -30,7 +30,8 @@
 advanced and easy to use PO-file editor with full navigational and editing
 capabilities, syntax checking and statistics.  CatalogManager is a multi
 functional catalog manager which allows you to keep track of many
-PO-files at once.  KBabelDict (this program) is a dictionary for translators.
+PO-files at once.  KBabelDict (this program) is a dictionary to assist
+with searching for common translations.
 .PP
 This utility is part of the KDE Software Development Kit.
 .SH OPTIONS
@@ -56,8 +57,10 @@
 .SH AUTHOR
 KBabel was written by Matthias Kiefer <kiefer@kde.org>,
 Wolfram Diestel <wolfram@steloj.de>, Andrea Rizzi <rizzi@kde.org>,
-Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>
-and Dwayne Bailey <dwayne@translate.org.za>.
+Stanislav Visnovsky <visnovsky@kde.org>, Marco Wegner <dubbleu@web.de>,
+Asgeir Frimannsson <asgeirf@redhat.com>,
+Dwayne Bailey <dwayne@translate.org.za>,
+Bram Schoenmakers <bramschoenmakers@kde.nl> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kbabel.install kdesdk/debian/kbabel.install
--- kdesdk.orig/debian/kbabel.install	2004-08-02 00:38:28.000000000 +0200
+++ kdesdk/debian/kbabel.install	2005-03-10 22:15:11.000000000 +0100
@@ -15,7 +15,9 @@
 usr/share/apps/catalogmanager
 usr/share/apps/kbabel
 usr/share/apps/kconf_update/kbabel-project.upd
+usr/share/apps/kconf_update/kbabel-projectrename.upd
 usr/share/config.kcfg/kbabel.kcfg
+usr/share/config.kcfg/kbprojectsettings.kcfg
 usr/share/doc/kde/HTML/en/kbabel/*.bz2
 usr/share/doc/kde/HTML/en/kbabel/common
 usr/share/doc/kde/HTML/en/kbabel/*.docbook
diff -urN -x CVS kdesdk.orig/debian/kbabel.menu kdesdk/debian/kbabel.menu
--- kdesdk.orig/debian/kbabel.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kbabel.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
         needs="x11"\
         section="Apps/Programming"\
         hints="KDE"\
-        kderemove="1"\
         title="KBabel"\
         longtitle="KBabel (Translation Tool)"\
         icon="/usr/share/pixmaps/kbabel.xpm"\
@@ -12,8 +11,8 @@
         needs="x11"\
         section="Apps/Programming"\
         hints="KDE"\
-        kderemove="1"\
         title="KBabel Dictionary"\
+        longtitle="KBabel Dictionary (Translation Tool Dictionary)"\
         icon="/usr/share/pixmaps/kbabeldict.xpm"\
         command="/usr/bin/kbabeldict"
 
@@ -21,8 +20,8 @@
         needs="x11"\
         section="Apps/Programming"\
         hints="KDE"\
-        kderemove="1"\
         title="KBabel Catalog Manager"\
+        longtitle="KBabel Catalog Manager (Translation Tool Catalog Manager)"\
         icon="/usr/share/pixmaps/catalogmanager.xpm"\
         command="/usr/bin/catalogmanager"
 
diff -urN -x CVS kdesdk.orig/debian/kbabel.override kdesdk/debian/kbabel.override
--- kdesdk.orig/debian/kbabel.override	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/kbabel.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,4 +0,0 @@
-# Menu items
-kbabel: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kbabel:9
-kbabel: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kbabel:18
-kbabel: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kbabel:27
diff -urN -x CVS kdesdk.orig/debian/kbabel.shlibs kdesdk/debian/kbabel.shlibs
--- kdesdk.orig/debian/kbabel.shlibs	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kbabel.shlibs	2005-03-20 01:14:00.000000000 +0100
@@ -1,2 +1,2 @@
-libkbabelcommon 3 kbabel (>= 4:3.1.95-0)
-libkbabeldictplugin 1 kbabel (>= 3.0.8-0)
+libkbabelcommon 3 kbabel (>= 4:3.4.0)
+libkbabeldictplugin 1 kbabel (>= 4:3.4.0)
diff -urN -x CVS kdesdk.orig/debian/kbugbuster.install kdesdk/debian/kbugbuster.install
--- kdesdk.orig/debian/kbugbuster.install	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kbugbuster.install	2005-03-10 22:15:11.000000000 +0100
@@ -1,4 +1,6 @@
 usr/bin/kbugbuster
+usr/lib/kde3/kcal_bugzilla.la
+usr/lib/kde3/kcal_bugzilla.so
 usr/share/applications/kde/kbugbuster.desktop
 usr/share/apps/kbugbuster
 usr/share/doc/kde/HTML/en/kbugbuster/*.bz2
@@ -6,8 +8,12 @@
 usr/share/doc/kde/HTML/en/kbugbuster/*.docbook
 usr/share/doc/kde/HTML/en/kbugbuster/*.png
 usr/share/icons/crystalsvg/16x16/apps/kbugbuster.png
+usr/share/icons/crystalsvg/22x22/apps/kbugbuster.png
 usr/share/icons/crystalsvg/32x32/apps/kbugbuster.png
-usr/share/icons/crystalsvg/48x48/apps/kbugbuster.png 
+usr/share/icons/crystalsvg/48x48/apps/kbugbuster.png
+usr/share/icons/crystalsvg/64x64/apps/kbugbuster.png
+usr/share/icons/crystalsvg/128x128/apps/kbugbuster.png
 usr/share/icons/locolor/16x16/apps/kbugbuster.png
 usr/share/icons/locolor/32x32/apps/kbugbuster.png
+usr/share/services/kresources/kcal/bugzilla.desktop
 ../kbugbuster.xpm usr/share/pixmaps
diff -urN -x CVS kdesdk.orig/debian/kbugbuster.menu kdesdk/debian/kbugbuster.menu
--- kdesdk.orig/debian/kbugbuster.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kbugbuster.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
         needs="x11"\
         section="Apps/Programming"\
         hints="KDE"\
-        kderemove="1"\
         title="KBugBuster"\
         longtitle="KBugBuster (KDE Bug Management)"\
         icon="/usr/share/pixmaps/kbugbuster.xpm"\
diff -urN -x CVS kdesdk.orig/debian/kbugbuster.override kdesdk/debian/kbugbuster.override
--- kdesdk.orig/debian/kbugbuster.override	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/kbugbuster.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-# Menu items
-kbugbuster: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kbugbuster:9
diff -urN -x CVS kdesdk.orig/debian/kbugbuster.xpm kdesdk/debian/kbugbuster.xpm
--- kdesdk.orig/debian/kbugbuster.xpm	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kbugbuster.xpm	2005-03-10 23:05:22.000000000 +0100
@@ -2,290 +2,290 @@
 static char * kbugbuster_xpm[] = {
 "32 32 256 2",
 "  	c None",
-". 	c #000427",
-"+ 	c #00122E",
-"@ 	c #00133A",
-"# 	c #001340",
-"$ 	c #01153C",
-"% 	c #03163E",
-"& 	c #0B133C",
-"* 	c #0D153E",
-"= 	c #08286E",
-"- 	c #152667",
-"; 	c #033075",
-"> 	c #073083",
-", 	c #222F54",
-"' 	c #0F3380",
-") 	c #192F7D",
-"! 	c #113481",
-"~ 	c #1B307E",
-"{ 	c #1B3274",
-"] 	c #273258",
-"^ 	c #22345E",
-"/ 	c #133582",
-"( 	c #243660",
-"_ 	c #253761",
-": 	c #273667",
-"< 	c #223874",
-"[ 	c #293869",
-"} 	c #1D3B82",
-"| 	c #2A396A",
-"1 	c #253C72",
-"2 	c #24427E",
-"3 	c #2B4077",
-"4 	c #2C4178",
-"5 	c #1D4492",
-"6 	c #2D4279",
-"7 	c #2E417E",
-"8 	c #294486",
-"9 	c #2F447B",
-"0 	c #304380",
-"a 	c #34477F",
-"b 	c #274998",
-"c 	c #374970",
-"d 	c #2F4791",
-"e 	c #2B4C9B",
-"f 	c #4360AB",
-"g 	c #546084",
-"h 	c #4E62A9",
-"i 	c #4F63AA",
-"j 	c #4F65A6",
-"k 	c #596992",
-"l 	c #5367AE",
-"m 	c #506DB2",
-"n 	c #576AB2",
-"o 	c #536FB6",
-"p 	c #5B6EB6",
-"q 	c #5B70B1",
-"r 	c #626EB1",
-"s 	c #647391",
-"t 	c #5B73AE",
-"u 	c #5E73B5",
-"v 	c #6176A5",
-"w 	c #6D7494",
-"x 	c #6E7595",
-"y 	c #6176B8",
-"z 	c #6B779B",
-"A 	c #6A7997",
-"B 	c #707797",
-"C 	c #6D799D",
-"D 	c #727A9A",
-"E 	c #6B7AB7",
-"F 	c #707CA0",
-"G 	c #747B9B",
-"H 	c #777B95",
-"I 	c #757D9C",
-"J 	c #727EA2",
-"K 	c #737FA4",
-"L 	c #6980BC",
-"M 	c #6F7EBB",
-"N 	c #7581A6",
-"O 	c #7783A8",
-"P 	c #7183BA",
-"Q 	c #7482C0",
-"R 	c #7585AF",
-"S 	c #7486BD",
-"T 	c #7888B3",
-"U 	c #7C88AD",
-"V 	c #7A8AB5",
-"W 	c #7889C1",
-"X 	c #7C8CB7",
-"Y 	c #7E8EB9",
-"Z 	c #7C8DC4",
-"` 	c #828FC1",
-" .	c #8692B8",
-"..	c #8491C3",
-"+.	c #8693C5",
-"@.	c #8595C1",
-"#.	c #8894C7",
-"$.	c #8C97BE",
-"%.	c #8F96C4",
-"&.	c #9797AD",
-"*.	c #8F9AB4",
-"=.	c #8D99BF",
-"-.	c #929AAE",
-";.	c #8C98CB",
-">.	c #909BB5",
-",.	c #939BAF",
-"'.	c #8C9CC8",
-").	c #939BC9",
-"!.	c #929DC4",
-"~.	c #8F9ECA",
-"{.	c #949FB9",
-"].	c #9AA1B6",
-"^.	c #97A2BC",
-"/.	c #979FCD",
-"(.	c #97A2C9",
-"_.	c #99A4BF",
-":.	c #98A3CA",
-"<.	c #9EA2CA",
-"[.	c #9AA5CC",
-"}.	c #96A6D2",
-"|.	c #9FA6BB",
-"1.	c #9BA7C1",
-"2.	c #9CA7CE",
-"3.	c #9AA9C9",
-"4.	c #A1A5CD",
-"5.	c #A1A8BD",
-"6.	c #9EAAC4",
-"7.	c #9EAAD1",
-"8.	c #A4A8D1",
-"9.	c #A4ABCD",
-"0.	c #A2ADC8",
-"a.	c #A5ADC1",
-"b.	c #A0AFCF",
-"c.	c #A8ABD4",
-"d.	c #A7AFD0",
-"e.	c #A9B1D3",
-"f.	c #A8B3CE",
-"g.	c #B0AFD3",
-"h.	c #B1B5C4",
-"i.	c #ADB4D6",
-"j.	c #ABB6D1",
-"k.	c #AAB9D9",
-"l.	c #B0B7D9",
-"m.	c #B3B7D3",
-"n.	c #ACBBDB",
-"o.	c #B6B9D5",
-"p.	c #B0BCD6",
-"q.	c #AEBDDE",
-"r.	c #B4BBDE",
-"s.	c #B8BBD8",
-"t.	c #B1C0E1",
-"u.	c #BABDDA",
-"v.	c #C1BFC3",
-"w.	c #BFBFD6",
-"x.	c #C4C1C5",
-"y.	c #C2C4C1",
-"z.	c #C6C3C8",
-"A.	c #BAC5E0",
-"B.	c #C1C6C8",
-"C.	c #C3C2DA",
-"D.	c #C4C6C3",
-"E.	c #C7C4C9",
-"F.	c #C2C7CA",
-"G.	c #C5C7C4",
-"H.	c #C8C5CA",
-"I.	c #C9C7CB",
-"J.	c #C7C9C6",
-"K.	c #C5CACD",
-"L.	c #CAC8CC",
-"M.	c #CBC9CD",
-"N.	c #C9CBC8",
-"O.	c #CCCACE",
-"P.	c #C4CCE1",
-"Q.	c #CDCBCF",
-"R.	c #CECCD0",
-"S.	c #CDCFCB",
-"T.	c #D0CDD1",
-"U.	c #CCCCE3",
-"V.	c #CBD0D2",
-"W.	c #CED0CD",
-"X.	c #D2CFD4",
-"Y.	c #D0D2CF",
-"Z.	c #CFD3E3",
-"`.	c #D5D3D7",
-" +	c #D3D5D2",
-".+	c #D7D4D9",
-"++	c #D6D8D5",
-"@+	c #D0D8ED",
-"#+	c #D9D7DB",
-"$+	c #D6DAEA",
-"%+	c #DDDBDF",
-"&+	c #DBE0E2",
-"*+	c #E0DEE2",
-"=+	c #DFE1DD",
-"-+	c #DFE0EA",
-";+	c #E2E0E4",
-">+	c #E0E2DF",
-",+	c #DDE3E5",
-"'+	c #E0E1EB",
-")+	c #E4E1E6",
-"!+	c #E1E4E0",
-"~+	c #DFE4E7",
-"{+	c #E2E2ED",
-"]+	c #E3E3EE",
-"^+	c #E4E6E3",
-"/+	c #E4E5EF",
-"(+	c #E8E5EA",
-"_+	c #E5E6F0",
-":+	c #E6E8E5",
-"<+	c #E6E7F1",
-"[+	c #E4E9EC",
-"}+	c #E7E9E6",
-"|+	c #E7E8F2",
-"1+	c #E8E9F3",
-"2+	c #E9EBE8",
-"3+	c #E9EAF4",
-"4+	c #EAECE9",
-"5+	c #EDEAEF",
-"6+	c #EAEBF6",
-"7+	c #ECEEEB",
-"8+	c #ECECF7",
-"9+	c #EFECF1",
-"0+	c #EDEDF8",
-"a+	c #F0EDF2",
-"b+	c #F1EEF3",
-"c+	c #EFF1EE",
-"d+	c #F2EFF4",
-"e+	c #F3F1F5",
-"f+	c #F1F3F0",
-"g+	c #F4F2F6",
-"h+	c #F2F4F1",
-"i+	c #F5F3F7",
-"j+	c #F0F6F8",
-"k+	c #F6F4F8",
-"l+	c #F9F4F2",
-"m+	c #FAF5F3",
-"n+	c #F8F5FA",
-"o+	c #F3F9FB",
-"p+	c #F9F6FB",
-"q+	c #FAF7FC",
-"r+	c #FDF7F6",
-"s+	c #F5FAFD",
-"t+	c #FBF8FD",
-"u+	c #F9FCF8",
-"v+	c #FCFAFE",
-"w+	c #FFFAF8",
-"x+	c #F7FDFF",
-"y+	c #FDFBFF",
-"z+	c #FBFDFA",
-"A+	c #F9FEFF",
-"B+	c #FFFCFA",
-"C+	c #FEFCFF",
-"D+	c #FFFDFB",
-"E+	c #FCFFFB",
-"F+	c #FFFDFF",
-"G+	c #FEFFFC",
+". 	c #000200",
+"+ 	c #000307",
+"@ 	c #080100",
+"# 	c #150300",
+"$ 	c #090F11",
+"% 	c #0F0E0B",
+"& 	c #151100",
+"* 	c #251302",
+"= 	c #1D2000",
+"- 	c #0F212A",
+"; 	c #461B09",
+"> 	c #4A190A",
+", 	c #502006",
+"' 	c #502413",
+") 	c #642803",
+"! 	c #602B0B",
+"~ 	c #672A00",
+"{ 	c #642D00",
+"] 	c #732900",
+"^ 	c #2F414B",
+"/ 	c #324439",
+"( 	c #6F3000",
+"_ 	c #6E3A02",
+": 	c #3A505F",
+"< 	c #703F27",
+"[ 	c #9B3700",
+"} 	c #963F00",
+"| 	c #9B3D00",
+"1 	c #695520",
+"2 	c #585A36",
+"3 	c #77511B",
+"4 	c #954700",
+"5 	c #B83801",
+"6 	c #794E3D",
+"7 	c #865312",
+"8 	c #765B21",
+"9 	c #B84200",
+"0 	c #AC4B05",
+"a 	c #C14200",
+"b 	c #B84800",
+"c 	c #6C6537",
+"d 	c #BD4602",
+"e 	c #7F594B",
+"f 	c #7A6327",
+"g 	c #BA4A02",
+"h 	c #B74E01",
+"i 	c #C34A00",
+"j 	c #906016",
+"k 	c #B55201",
+"l 	c #0E80D2",
+"m 	c #BF4E00",
+"n 	c #CB4902",
+"o 	c #0088E0",
+"p 	c #BE5300",
+"q 	c #C55200",
+"r 	c #1882DB",
+"s 	c #CF4E00",
+"t 	c #078BE3",
+"u 	c #807720",
+"v 	c #597887",
+"w 	c #AB6A00",
+"x 	c #2488DB",
+"y 	c #906A5B",
+"z 	c #298CD8",
+"A 	c #258FE1",
+"B 	c #2D8BE5",
+"C 	c #2195E1",
+"D 	c #D46400",
+"E 	c #868145",
+"F 	c #8C8930",
+"G 	c #3895E2",
+"H 	c #2E99EC",
+"I 	c #3C95E9",
+"J 	c #B57E1E",
+"K 	c #3B99DF",
+"L 	c #DE7200",
+"M 	c #4295F8",
+"N 	c #3D9DDD",
+"O 	c #519ABC",
+"P 	c #A2930D",
+"Q 	c #C48401",
+"R 	c #4996F2",
+"S 	c #D87908",
+"T 	c #B78239",
+"U 	c #9B991E",
+"V 	c #47A1E8",
+"W 	c #889962",
+"X 	c #BC9301",
+"Y 	c #48A4E5",
+"Z 	c #579DF4",
+"` 	c #EA8100",
+" .	c #58A3EC",
+"..	c #6BA5B0",
+"+.	c #8E9B8F",
+"@.	c #A7A320",
+"#.	c #5DA0FE",
+"$.	c #E88B00",
+"%.	c #CA9C00",
+"&.	c #DA9500",
+"*.	c #E48D13",
+"=.	c #D69800",
+"-.	c #62A6FD",
+";.	c #4FB0FE",
+">.	c #D29627",
+",.	c #C7A111",
+"'.	c #6CA4FD",
+").	c #66A9FF",
+"!.	c #C99F29",
+"~.	c #ED9500",
+"{.	c #5AB3F4",
+"].	c #B3A35A",
+"^.	c #A1AC5B",
+"/.	c #9AA2AA",
+"(.	c #91AAA2",
+"_.	c #8DA9B3",
+":.	c #E99C00",
+"<.	c #9DA6A2",
+"[.	c #6AAFFF",
+"}.	c #7AACE6",
+"|.	c #95A8B4",
+"1.	c #82ACD3",
+"2.	c #72ACFF",
+"3.	c #A6A791",
+"4.	c #79AEF5",
+"5.	c #81B0DD",
+"6.	c #A9AF7F",
+"7.	c #EA9F2E",
+"8.	c #78B4F6",
+"9.	c #77B3FF",
+"0.	c #90B0CC",
+"a.	c #A6B677",
+"b.	c #DEA637",
+"c.	c #E9A32B",
+"d.	c #80B1FF",
+"e.	c #9DB1BD",
+"f.	c #83B4FB",
+"g.	c #8AB5EA",
+"h.	c #ADAEB2",
+"i.	c #84B8FF",
+"j.	c #9FB6C8",
+"k.	c #B2BB8A",
+"l.	c #B5B895",
+"m.	c #B5B2B6",
+"n.	c #CBB760",
+"o.	c #87BEFF",
+"p.	c #BAC26A",
+"q.	c #E6C000",
+"r.	c #8EBFF9",
+"s.	c #90BDFF",
+"t.	c #EFBD00",
+"u.	c #ABBBC7",
+"v.	c #98BEED",
+"w.	c #C6C359",
+"x.	c #9FBFDC",
+"y.	c #9DC5C7",
+"z.	c #F6B43F",
+"A.	c #93C4FE",
+"B.	c #B0C1C0",
+"C.	c #B6C0BB",
+"D.	c #B9C0B5",
+"E.	c #93C8FB",
+"F.	c #C3C0AB",
+"G.	c #BFC3B2",
+"H.	c #BFC1BE",
+"I.	c #9DC8FD",
+"J.	c #BEC3C5",
+"K.	c #A0CAF2",
+"L.	c #F3BF4D",
+"M.	c #A7C9E9",
+"N.	c #8FD2FC",
+"O.	c #A0CBFF",
+"P.	c #C0D385",
+"Q.	c #BBC8CF",
+"R.	c #BAD1A3",
+"S.	c #D3C6A0",
+"T.	c #F9D005",
+"U.	c #FECF00",
+"V.	c #E3D23A",
+"W.	c #EFC465",
+"X.	c #CBC9AE",
+"Y.	c #A1D0FE",
+"Z.	c #CCD186",
+"`.	c #C9CAB4",
+" +	c #E9D32E",
+".+	c #A8CEFE",
+"++	c #B3CEE6",
+"@+	c #C0CDCE",
+"#+	c #F9D700",
+"$+	c #9BD8FD",
+"%+	c #DACA9F",
+"&+	c #B5D7C0",
+"*+	c #CFCBBC",
+"=+	c #DACC9A",
+"-+	c #C2D1C4",
+";+	c #C1D8A9",
+">+	c #C9D0C5",
+",+	c #C9CED1",
+"'+	c #ACD6FF",
+")+	c #B3D4FE",
+"!+	c #B1D6F9",
+"~+	c #D6D0BB",
+"{+	c #D5D1C3",
+"]+	c #BEDCCC",
+"^+	c #C7DCBA",
+"/+	c #D4D3CA",
+"(+	c #CBD2E8",
+"_+	c #FADA3F",
+":+	c #C0D8EA",
+"<+	c #FDE020",
+"[+	c #DDD4BA",
+"}+	c #BDD9FE",
+"|+	c #FFE700",
+"1+	c #EDDB73",
+"2+	c #B8DCFF",
+"3+	c #ECD3A3",
+"4+	c #FBEA00",
+"5+	c #CFD9D4",
+"6+	c #D3DBBF",
+"7+	c #DDD9B7",
+"8+	c #E5D7B1",
+"9+	c #D0D9E1",
+"0+	c #E4DAA9",
+"a+	c #EDE45C",
+"b+	c #BFDFFD",
+"c+	c #C5DDFC",
+"d+	c #CDDDEB",
+"e+	c #EADDA3",
+"f+	c #FEDA7E",
+"g+	c #DAE4AB",
+"h+	c #FBE06C",
+"i+	c #CCDFF9",
+"j+	c #CAE2F4",
+"k+	c #FFE368",
+"l+	c #C8E4FC",
+"m+	c #F4E0A7",
+"n+	c #D0E4FE",
+"o+	c #EDE1C1",
+"p+	c #F2E2B6",
+"q+	c #FEFE00",
+"r+	c #FCF058",
+"s+	c #CDE9FF",
+"t+	c #DEE6EF",
+"u+	c #FEE797",
+"v+	c #EDEF9C",
+"w+	c #FBFB38",
+"x+	c #F1E7BF",
+"y+	c #D9E9FD",
+"z+	c #D4ECFE",
+"A+	c #F3EDB0",
+"B+	c #E0F0FE",
+"C+	c #F8F0D8",
+"D+	c #FCF1C9",
+"E+	c #FAF2D0",
+"F+	c #FBF7C0",
+"G+	c #FFFD9D",
 "                                                                ",
-"  > / ! ! ! ' ' ' ' ' ' ' ' ~ ~ ~ ~ ~ ) ) ) ) ) =               ",
-"  L i.8.4.<./.).%.#.` ` W S L L E y u q m n l h 5 $             ",
-"& #.r.i.7.}.4./.;.;.#.Z ` W P M y y u p n j h f d *             ",
-"% 4.U.C.C.u.u.s.m.l.m.g.g.g.7.9.9.<.:././.'.%.).t %             ",
-"% k.}+n+l+h+h+h+j+l+e+j+j+j+l+j+n+o+m+l+j+k+j+G+p.#             ",
-"% l.c+x+A+G+G+w+x+C+z+l+;+:+w+G+g+[+j+q+t+q+k+w+j.@             ",
-"% p.e+B+G+G+G+A+B+G+B+~+y.O.A+u+Y.E.I.5+o+l+j+A+a.@             ",
-"$ j.d+G+G+G+G+G+4+7+B+:+J.S.C+*+G.E.&+p+j+g+e+C+a.#             ",
-"% n.c+G+G+G+G+t+T.O. +.+O.X.~+I.B. +g+u+0+i+0+C+a.{ e b d 5 -   ",
-"% k.d+G+G+G+G+G+!+H.=+!+J.Q.J.H.X.i+k+n+0+i+a+C+a.0 y p r h }   ",
-"% j.c+G+G+G+G+z+)+++w+(+L.J.I.G.#+j+e+j+g+0+0+t+_.8 y q l j }   ",
-"% k.d+G+G+G+5+S.M.j+G+!+H.O.`.G.I..+M.{+j+[+3+q+&.k P.P.P.$+v   ",
-"% m.c+G+G+G+=+G.G.4+G+)+y.N.5+L.x.K.Q.&+a+b+9+r+>.I B+C+p+C+U   ",
-"% l.e+G+G+G+v+l+`.&+G+)+x.J.k+=+x.B.O.3+a+3+1+t+>.G A+n+k+G+O   ",
-"% p.l+G+G+G+G+x+:+M.a+,+L.T.[+.+K.x.Q.(+3+1+<+n+&.A G+j+g+G+N   ",
-"% q.m+G+G+G+B+m+S.y.I.S.#+#+O.v.I.-+3+8+1+<+_+s+>.B C+s+a+G+J   ",
-"% p.o+G+G+G+G+j+X.#+2+.+B.B.-+-+F.%+0+[+<+]+_+0+,.A w+0+0+G+J   ",
-"# r.w+G+G+y+y+w+p+n+v+3+v.K.[+0+3+9+1+<+]+]+/+d+,.A C+j+9+B+F   ",
-"% A.z+G+G+x+v+x+h+n+j+e+X.%+0+9+3+3+]+|+]+]+{+0+&.A x+5+8+C+G   ",
-"& t.G+C+B+G+C+A+G+C+G+A+A+B+x+w+z+C+t+y+t+q+w+G+&.w t+[+a+x+C   ",
-"  j !.=.$.@. .Y X V T T T R O R J J J I I G G H c ,.o+0+3+v+x   ",
-"    . . . . { $.6.b.b.0.0.d.0.3.0.6._.^.].{.^.,.h.0+9+1+|+v+x   ",
-"            7 5+B+B+G+A+C+G+G+G+B+w+B+G+A+w+t+y+q+a+1+|+_+t+x   ",
-"            2 ]+n+G+G+G+x+v+v+t+x+n+k+i+s+[+0+0+3+1+|+_+/+o+x   ",
-"            7 ]+u+G+G+A+w+x+x+h+k+j+j+d+0+d+e+[+3+|+<+]+]+t+s   ",
-"            2 /+s+G+x+C+v+q+v+n+k+g+6+i+a+8+0+5+|+_+]+]+'+t+w   ",
-"            0 0+w+G+B+A+C+z+x+u+t+p+u+j+j+g+g+0+0+8+0+3+]+x+H   ",
-"            < @+i+d+d+b+8+8+1+1+|+/+_+/+]+'+~+,+)+;+-+{+{+-+g   ",
-"              < 9 9 9 9 4 4 7 4 2 7 3 1 | [ [ : : | ^ ] ] , +   ",
-"                                                                ",
-"                                                                "};
+"                        (             (                         ",
+"                          (         (                           ",
+"                            ~     (                             ",
+"      p                     {     ~                             ",
+"      m                     , } k )                     m       ",
+"        p               > 6 6 T W.< y '                 m       ",
+"        m p             ; ' ' !._+! ; >               m         ",
+"          m g b b m     | } Q <+T.=.4 }       g g m m p         ",
+"                  b m     S ~.*.*.$.` D     9 p                 ",
+"                    9 b   h 7.u+u+f+S   m 9 m                   ",
+"                      a 9 E n.7.7.b.a.j 5 g                     ",
+"                        f -+].z.L.b.l.l.8                       ",
+"  p           p m i n c y.C+^+h+h+1+&+D+..7 n m                 ",
+"    m m g b b i s 0 1 3.x+E+Z. +<+V.6+D+o++.3 h n d m m m q     ",
+"                    E.t+0+F+p.c.:.,.g+A+8+B+{.                  ",
+"                  {.B+/+%+m+6.>.7.J =+0+[+z+y+H                 ",
+"                Y n+d+S.%+x+&+v+G+Z.6+3+%+/+l+!+z               ",
+"              N c+c+~+%+0+C+R.a+r+w.]+p+%+S.j+b+Y.z             ",
+"            K )+2+@+X.>+[+C+Z.w+w+V.6+x+*+~+/+c+c+E.z           ",
+"          V .+.+Q.G.d+Q.<.5+W U @.u (.H.J.y+`.@+!+'+I.C         ",
+"         ..+K.B.D.:+s+,+/.u.^ $ % % v m.J.B+d+G.H.M..+I.z       ",
+"       .A.v.j.x.)+}+n+9+/.|.- + + @ : m.,+z+c+2+++u.x.A.s.G     ",
+"    I i.s.0.v.O.)+2+}+(+F.<.% @ @ . / `.9+c+b+'+.+I.e.r.o.d.x   ",
+"  l 2.9.f.0.A.A.O.'+2+}+{+k.X %.%.&.P `.n+c+}+)+O.I.j.g.f.9.Z   ",
+"  B '.2.}.1.o.A.O..+'+c+(+^.t.|+4+U.X B.l+2+)+.+I.A.g.5.9.d.-.  ",
+"  o -.2.4.4.i.s.I.O..+'+2+F q.q+q+#+w _.b+)+.+O.s.s.f.8.4.-.#.  ",
+"  l #.'.[.9.9.o.s.O..+}+$+2 * = = & _ O b+'+.+I.A.o.f.9.).'.R   ",
+"    M #.'.9.9.8.s.A.I.)+;.  [ # @ ]     E.)+I.A.o.8.9.2.).#.B   ",
+"    r #.-.).2.d.o.s.O.I.r                ..+I.o.i.d.d.).'.R     ",
+"      r R '.9.9.s.s.8.A                   G o.o.i.9.2.#.R       ",
+"          x B I G z                           G I I I l         "};
diff -urN -x CVS kdesdk.orig/debian/kcachegrind.1 kdesdk/debian/kcachegrind.1
--- kdesdk.orig/debian/kcachegrind.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/kcachegrind.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH KCACHEGRIND 1 "January 31, 2004"
+.TH KCACHEGRIND 1 "March 25, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -27,6 +27,10 @@
 profiled using calltree without being recompiled, and shared libraries
 and plugin architectures are supported.
 .PP
+For visualising the output from other profiling tools, several converters
+are available.  On Debian systems these can be found in the
+\fIkcachegrind-converters\fP package.
+.PP
 This application is part of the KDE Software Development Kit.
 .SH OPTIONS
 Below are the kcachegrind-specific options.
@@ -39,6 +43,11 @@
 Visualise data from the given trace.
 .SH SEE ALSO
 .BR calltree (1),
+.BR dprof2calltree (1),
+.BR hotshot2calltree (1),
+.BR memprof2calltree (1),
+.BR op2calltree (1),
+.BR pprof2calltree (1),
 .BR valgrind (1).
 .PP
 Full user documentation is available through the KDE Help Centre.
diff -urN -x CVS kdesdk.orig/debian/kcachegrind-converters.manpages kdesdk/debian/kcachegrind-converters.manpages
--- kdesdk.orig/debian/kcachegrind-converters.manpages	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/kcachegrind-converters.manpages	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,5 @@
+debian/dprof2calltree.1
+debian/hotshot2calltree.1
+debian/memprof2calltree.1
+debian/op2calltree.1
+debian/pprof2calltree.1
diff -urN -x CVS kdesdk.orig/debian/kcachegrind.menu kdesdk/debian/kcachegrind.menu
--- kdesdk.orig/debian/kcachegrind.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kcachegrind.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
   needs="x11"\
   section="Apps/Programming"\
   hints="KDE"\
-  kderemove="1"\
   title="KCachegrind"\
   longtitle="KCachegrind (Profiler Frontend)"\
   icon="/usr/share/pixmaps/kcachegrind.xpm"\
diff -urN -x CVS kdesdk.orig/debian/kcachegrind.override kdesdk/debian/kcachegrind.override
--- kdesdk.orig/debian/kcachegrind.override	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kcachegrind.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-# Menu item
-kcachegrind: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kcachegrind:9
diff -urN -x CVS kdesdk.orig/debian/kdemangen.pl.1 kdesdk/debian/kdemangen.pl.1
--- kdesdk.orig/debian/kdemangen.pl.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/kdemangen.pl.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,51 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH KDEMANGEN.PL 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+kdemangen.pl \- automatically create a draft manpage for a KDE app
+.SH SYNOPSIS
+.B kdemangen.pl
+.I /path/to/application
+.SH DESCRIPTION
+\fBkdemangen.pl\fP will automatically create a draft manpage for a KDE
+application.  Manpages are always better when hand-tailored, but this
+should give you a fairly good start.
+.PP
+To create the manpage, it will use the \-\-author and \-\-help\-all
+output for the application passed on the command line.
+It will also use the description in the
+Debian control file if one is available.  To make use of this additional
+feature, you must run kdemangen.pl from within the \fIdebian/\fP
+subdirectory of the application sources.
+.PP
+The new manpage will be written to standard output.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH WARNING
+This utility will only work for a full KDE application that uses
+KCmdLineArgs (which most full KDE applications do).
+.SH EXAMPLE
+.RS
+cd /path/to/kde/srcs/kdeedu/debian
+.br
+kdemangen /usr/bin/kstars > kstars.1
+.RE
+.SH AUTHOR
+kdemangen.pl was written by Dominique Devriese <devriese@kde.org>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kdesdk-doc-html.doc-base.cervisia kdesdk/debian/kdesdk-doc-html.doc-base.cervisia
--- kdesdk.orig/debian/kdesdk-doc-html.doc-base.cervisia	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/kdesdk-doc-html.doc-base.cervisia	2005-03-07 08:15:19.000000000 +0100
@@ -1,6 +1,6 @@
 Document: kdesdk-doc-html-cervisia
 Title: Cervisia Manual
-Author: Bernd Gehrmann <bernd@mail.berlios.de>
+Author: Bernd Gehrmann <bernd@mail.berlios.de> and Carlos Woelz <carloswoelz@imap-mail.com>
 Abstract: Cervisia provides a graphical view of CVS.
 Section: Apps/Programming
 
diff -urN -x CVS kdesdk.orig/debian/kdesdk-doc-html.doc-base.kcachegrind kdesdk/debian/kdesdk-doc-html.doc-base.kcachegrind
--- kdesdk.orig/debian/kdesdk-doc-html.doc-base.kcachegrind	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/kdesdk-doc-html.doc-base.kcachegrind	2005-03-07 08:15:19.000000000 +0100
@@ -1,7 +1,8 @@
 Document: kdesdk-doc-html-kcachegrind
 Title: KCachegrind Handbook
 Author: Josef Weidendorfer <Josef.Weidendorfer@gmx.de>
-Abstract: KCachegrind is a KDE Frontend for Cachegrind, part of Valgrind.
+Abstract: KCachegrind is a profile data visualization tool, written
+ using the KDE environment.
 Section: Apps/Programming
 
 Format: HTML
diff -urN -x CVS kdesdk.orig/debian/kdesdk-misc.install kdesdk/debian/kdesdk-misc.install
--- kdesdk.orig/debian/kdesdk-misc.install	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kdesdk-misc.install	2005-03-10 22:15:11.000000000 +0100
@@ -1,10 +1,16 @@
 usr/include/kde/kprofilemethod.h
 usr/lib/kde3/kabcformat_kdeaccounts.*
+usr/lib/kde3/kded_ksvnd.la
+usr/lib/kde3/kded_ksvnd.so
+usr/lib/kde3/kio_svn.la
+usr/lib/kde3/kio_svn.so
 usr/lib/kde3/plugins/styles/scheck.so
 usr/lib/kde3/plugins/styles/scheck.la
 usr/share/apps/kabc/formats/kdeaccountsplugin.desktop
 usr/share/apps/kstyle/themes/scheck.themerc
 usr/share/doc/kdesdk-misc
+usr/share/services/kded/ksvnd.desktop
+usr/share/services/svn*.protocol
 ../../kdepalettes/kde_xpaintrc usr/share/kdepalettes
 ../../kdepalettes/KDE_Gimp usr/share/kdepalettes
 ../../kdepalettes/README usr/share/kdepalettes
diff -urN -x CVS kdesdk.orig/debian/kdesdk-scripts.docs kdesdk/debian/kdesdk-scripts.docs
--- kdesdk.orig/debian/kdesdk-scripts.docs	2002-11-21 05:57:28.000000000 +0100
+++ kdesdk/debian/kdesdk-scripts.docs	2005-03-07 08:15:19.000000000 +0100
@@ -1,3 +1,2 @@
 scripts/README
-scripts/kdecompile.README
 scripts/kde-emacs/kde-emacs-tips.texi
diff -urN -x CVS kdesdk.orig/debian/kdesdk-scripts.install kdesdk/debian/kdesdk-scripts.install
--- kdesdk.orig/debian/kdesdk-scripts.install	2004-08-02 00:38:28.000000000 +0200
+++ kdesdk/debian/kdesdk-scripts.install	2005-03-10 22:15:11.000000000 +0100
@@ -9,12 +9,14 @@
 usr/bin/cvsbackport
 usr/bin/cvsblame
 usr/bin/cvscheck
+usr/bin/cvsforwardport
 usr/bin/cvslastchange
 usr/bin/cvslastlog
 usr/bin/cvsrevertlast
 usr/bin/cvsversion
 usr/bin/cxxmetric
 usr/bin/extend_dmalloc
+usr/bin/extractattr
 usr/bin/extractrc
 usr/bin/findmissingcrystal
 usr/bin/fixkdeincludes
@@ -33,6 +35,7 @@
 usr/bin/pruneemptydirs
 usr/bin/qtdoc
 usr/bin/zonetab2pot.py
+usr/share/doc/kdesdk-scripts
 usr/share/man/man1/cvsblame.1
 usr/share/man/man1/cvsversion.1
 usr/share/man/man1/kde-build.1
diff -urN -x CVS kdesdk.orig/debian/kdesdk-scripts.manpages kdesdk/debian/kdesdk-scripts.manpages
--- kdesdk.orig/debian/kdesdk-scripts.manpages	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/kdesdk-scripts.manpages	2005-03-20 12:29:18.000000000 +0100
@@ -6,20 +6,27 @@
 debian/create_makefiles.1
 debian/cvs-clean.1
 debian/cvs2dist.1
+debian/cvsbackport.1
 debian/cvscheck.1
+debian/cvsforwardport.1
 debian/cvslastchange.1
 debian/cvslastlog.1
 debian/cvsrevertlast.1
 debian/cxxmetric.1
 debian/extend_dmalloc.1
+debian/extractattr.1
 debian/extractrc.1
 debian/fixkdeincludes.1
+debian/fixuifiles.1
 debian/findmissingcrystal.1
 debian/kdedoc.1
 debian/kdekillall.1
 debian/kdelnk2desktop.py.1
+debian/kdemangen.pl.1
 debian/licensecheck.1
 debian/makeobj.1
+debian/package_crystalsvg.1
+debian/png2mng.pl.1
 debian/pruneemptydirs.1
 debian/qtdoc.1
 debian/zonetab2pot.py.1
diff -urN -x CVS kdesdk.orig/debian/kdesdk-scripts.README.Debian kdesdk/debian/kdesdk-scripts.README.Debian
--- kdesdk.orig/debian/kdesdk-scripts.README.Debian	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kdesdk-scripts.README.Debian	2005-03-07 08:15:19.000000000 +0100
@@ -28,9 +28,12 @@
     (setq kde-full-name "Your Name")
     (setq kde-email "Your Email")
 
+  See the file /usr/share/emacs/site-lisp/kdesdk-scripts/kde-emacs.el for
+  further information regarding emacs.
+
 Shell completion controls:
 
-  Completion controls are provided in /usr/share/kdesdk-scripts/completion/
+  Completion controls are provided in /usr/share/kdesdk-scripts/completions/
   for a variety of shells.
 
   To enable completion controls for zsh, you need to add the following
@@ -59,4 +62,4 @@
 
     --suppressions=/usr/lib/valgrind/kde.supp
 
- -- Ben Burton <bab@debian.org>, Sat, 31 Jan 2004 12:08:48 +1100
+ -- Ben Burton <bab@debian.org>, Fri, 15 Oct 2004 09:55:26 +1000
diff -urN -x CVS kdesdk.orig/debian/kminspector.1 kdesdk/debian/kminspector.1
--- kdesdk.orig/debian/kminspector.1	2004-08-01 16:36:12.000000000 +0200
+++ kdesdk/debian/kminspector.1	2005-03-07 08:15:19.000000000 +0100
@@ -37,8 +37,8 @@
 This utility is part of the KDE Software Development Kit.
 .SH SEE ALSO
 .BR demangle (1),
-.BR kmmatch (1).
-.BR kmtrace (1),
+.BR kmmatch (1),
+.BR kmtrace (1).
 .PP
 Much more extensive documentation for KMtrace can be found in
 \fI/usr/share/doc/kmtrace/README\fP.
diff -urN -x CVS kdesdk.orig/debian/kmtrace.install kdesdk/debian/kmtrace.install
--- kdesdk.orig/debian/kmtrace.install	2003-02-26 06:11:58.000000000 +0100
+++ kdesdk/debian/kmtrace.install	2005-03-07 08:15:19.000000000 +0100
@@ -3,5 +3,5 @@
 usr/bin/kmmatch
 usr/bin/kmtrace
 usr/include/kde/ktrace.h
-usr/lib/libktrace*
+usr/lib/kmtrace
 usr/share/apps/kmtrace
diff -urN -x CVS kdesdk.orig/debian/kmtrace.override kdesdk/debian/kmtrace.override
--- kdesdk.orig/debian/kmtrace.override	2002-05-13 13:33:33.000000000 +0200
+++ kdesdk/debian/kmtrace.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-# There is no -dev package.
-kmtrace: non-dev-pkg-with-shlib-symlink usr/lib/libktrace.so.1.0.0 usr/lib/libktrace.so
diff -urN -x CVS kdesdk.orig/debian/kmtrace.README.Debian kdesdk/debian/kmtrace.README.Debian
--- kdesdk.orig/debian/kmtrace.README.Debian	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/kmtrace.README.Debian	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-KMtrace for Debian
-------------------
-
-The utility /usr/bin/match that is shipped with KMtrace has been renamed
-to /usr/bin/kmmatch in Debian to avoid conflicts with unrelated packages.
-
- -- Ben Burton <bab@debian.org>, Wed, 26 Feb 2003 18:52:09 +1100
diff -urN -x CVS kdesdk.orig/debian/kmtrace.shlibs kdesdk/debian/kmtrace.shlibs
--- kdesdk.orig/debian/kmtrace.shlibs	2002-09-23 06:50:40.000000000 +0200
+++ kdesdk/debian/kmtrace.shlibs	1970-01-01 01:00:00.000000000 +0100
@@ -1 +0,0 @@
-libktrace 1 kmtrace (>= 3.0.8-0)
diff -urN -x CVS kdesdk.orig/debian/kompare.1 kdesdk/debian/kompare.1
--- kdesdk.orig/debian/kompare.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/kompare.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH KOMPARE 1 "January 31, 2004"
+.TH KOMPARE 1 "March 25, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -30,8 +30,8 @@
 .B kompare
 [ \fIgeneric-options\fP ] \fB\-b\fP \fIURL diff\fP
 .SH DESCRIPTION
-\fBKompare\fP is a KDE GUI for viewing the differences between two files.
-It will also optionally create a diff file.
+\fBKompare\fP is a graphical user interface for viewing the differences
+between two files.  It will also optionally create a diff file.
 .PP
 Depending upon what is passed on the command line, Kompare can compare
 documents, display diff files and blend diff files back into original
@@ -72,8 +72,8 @@
 The original documentation from the program author
 is available in \fI/usr/share/doc/kompare/\fP.
 .SH AUTHOR
-Kompare was written by John Firebaugh <jfirebaugh@kde.org> and
-Otto Bruggeman <otto.bruggeman@home.nl>.
+Kompare was written by John Firebaugh <jfirebaugh@kde.org>,
+Otto Bruggeman <otto.bruggeman@home.nl> and others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kompare.install kdesdk/debian/kompare.install
--- kdesdk.orig/debian/kompare.install	2004-08-02 00:38:28.000000000 +0200
+++ kdesdk/debian/kompare.install	2005-03-10 22:15:12.000000000 +0100
@@ -1,7 +1,6 @@
 usr/bin/kompare
-usr/lib/libkompareinterface.so.*
-usr/lib/kde3/libdialogpages.la
-usr/lib/kde3/libdialogpages.so*
+usr/lib/libkompareinterface.so.0
+usr/lib/libkompareinterface.so.0.0.0
 usr/lib/kde3/libkompare*
 usr/share/applications/kde/kompare.desktop
 usr/share/apps/kompare
diff -urN -x CVS kdesdk.orig/debian/kompare.menu kdesdk/debian/kompare.menu
--- kdesdk.orig/debian/kompare.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kompare.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
         needs="x11"\
         section="Apps/Programming"\
         hints="KDE"\
-        kderemove="1"\
         title="Kompare"\
         longtitle="Kompare (Diff/Patch Frontend)"\
         icon="/usr/share/pixmaps/kompare.xpm"\
diff -urN -x CVS kdesdk.orig/debian/kompare.override kdesdk/debian/kompare.override
--- kdesdk.orig/debian/kompare.override	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/kompare.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,7 +0,0 @@
-# Menu items
-kompare: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kompare:9
-# These are modules in /usr/lib/kde3/.
-kompare: binary-or-shlib-defines-rpath ./usr/bin/kompare /usr/lib/kde3
-kompare: binary-or-shlib-defines-rpath ./usr/lib/kde3/libkomparenavtreepart.so /usr/lib/kde3
-kompare: binary-or-shlib-defines-rpath ./usr/lib/kde3/libkomparepart.so /usr/lib/kde3
-
diff -urN -x CVS kdesdk.orig/debian/kuiviewer.1 kdesdk/debian/kuiviewer.1
--- kdesdk.orig/debian/kuiviewer.1	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kuiviewer.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH KUIVIEWER 1 "February 6, 2004"
+.TH KUIVIEWER 1 "March 25, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -20,20 +20,46 @@
 .SH SYNOPSIS
 .B kuiviewer
 .RI "[ " generic-options " ]"
-.RI "[ " ui-file " ]"
+.RI "[ " ui-file ... " ]"
+.PP
+.B kuiviewer
+.RI "[ " generic-options " ]"
+{ \fB\-s, \-\-takescreenshot\fP \fIfilename\fP }
+[ \fB\-w, \-\-screenshotwidth\fP \fIint\fP ]
+[ \fB\-h, \-\-screenshotheight\fP \fIint\fP ]
+.I ui-file
 .SH DESCRIPTION
 \fBKUIViewer\fP is a utility to display and test the user interface (.ui)
 files generated by \fBQt Designer\fP.  The interfaces can be displayed in a
 variety of different widget styles.
 .PP
+Normally KUIViewer launches a full GUI, allowing the user to interact with
+the given interface.
+By passing the \fB\-\-takescreenshot\fP option, you can make KUIViewer dump a
+screenshot of the interface instead and exit immediately.  Other options
+are available to control precisely how this screenshot is constructed.
+.PP
 This application is part of the KDE Software Development Kit.
 .SH OPTIONS
+Below are the kuiviewer-specific options.
 For a full summary of options, run \fIkuiviewer \-\-help\fP.
+.TP
+\fB\-s, \-\-takescreenshot\fP \fIfilename\fP
+Take a screenshot of the given interface and exit immediately.
+The \fIfilename\fP argument specifies where the screenshot will be saved.
+This screenshot will be saved in PNG format.
+.TP
+\fB\-w, \-\-screenshotwidth\fP \fIint\fP
+Before taking a screenshot, resize the interface to the given width.
+.TP
+\fB\-h, \-\-screenshotheight\fP \fIint\fP
+Before taking a screenshot, resize the interface to the given height.
 .SH SEE ALSO
 .BR designer (1).
 .SH AUTHOR
-KUIViewer was written by Richard Moore <rich@kde.org> and
-Ian Reinhart Geiser <geiseri@kde.org>.
+KUIViewer was written by Richard Moore <rich@kde.org>,
+Ian Reinhart Geiser <geiseri@kde.org> and
+Benjamin C. Meyer <ben+kuiviewer@meyerhome.net>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/kuiviewer.install kdesdk/debian/kuiviewer.install
--- kdesdk.orig/debian/kuiviewer.install	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kuiviewer.install	2005-03-10 22:15:12.000000000 +0100
@@ -4,8 +4,8 @@
 usr/lib/kde3/quithumbnail.so
 usr/lib/kde3/quithumbnail.la
 usr/share/applications/kde/kuiviewer.desktop
-usr/share/apps/kuiviewer/kuiviewer.rc
-usr/share/apps/kuiviewerpart/kuiviewer_part.rc
+usr/share/apps/kuiviewer
+usr/share/apps/kuiviewerpart
 usr/share/icons/hicolor/16x16/apps/kuiviewer.png
 usr/share/icons/hicolor/32x32/apps/kuiviewer.png
 usr/share/icons/hicolor/48x48/apps/kuiviewer.png
diff -urN -x CVS kdesdk.orig/debian/kuiviewer.menu kdesdk/debian/kuiviewer.menu
--- kdesdk.orig/debian/kuiviewer.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/kuiviewer.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
   needs="x11"\
   section="Apps/Programming"\
   hints="KDE"\
-  kderemove="1"\
   title="KUIViewer"\
   longtitle="KUIViewer (Qt Designer UI File Viewer)"\
   icon="/usr/share/pixmaps/kuiviewer.xpm"\
diff -urN -x CVS kdesdk.orig/debian/kuiviewer.override kdesdk/debian/kuiviewer.override
--- kdesdk.orig/debian/kuiviewer.override	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/kuiviewer.override	1970-01-01 01:00:00.000000000 +0100
@@ -1,2 +0,0 @@
-# Menu item
-kuiviewer: menu-item-contains-unknown-tag kderemove /usr/lib/menu/kuiviewer:9
diff -urN -x CVS kdesdk.orig/debian/libcvsservice0.shlibs kdesdk/debian/libcvsservice0.shlibs
--- kdesdk.orig/debian/libcvsservice0.shlibs	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/libcvsservice0.shlibs	2005-03-20 01:14:00.000000000 +0100
@@ -1 +1 @@
-libcvsservice 0 libcvsservice0 (>= 4:3.1.95-0)
+libcvsservice 0 libcvsservice0 (>= 4:3.4.0-0)
diff -urN -x CVS kdesdk.orig/debian/makeobj.1 kdesdk/debian/makeobj.1
--- kdesdk.orig/debian/makeobj.1	2003-12-10 07:08:45.000000000 +0100
+++ kdesdk/debian/makeobj.1	2005-03-20 08:33:28.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH MAKEOBJ 1 "September 27, 2002"
+.TH MAKEOBJ 1 "March 20, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -27,9 +27,12 @@
 .PP
 The command-line arguments will (generally) be passed directly to make.
 .PP
-This script is only useful if the source directory is different from the
+This script is useful if the source directory is different from the
 build directory and the Makefiles are kept in the build directory, as is
-common for instance when building the KDE sources.
+common for instance when building the KDE sources.  This script can however
+be used in more standard scenarios (such as non-KDE projects for which the
+source and build directories are the same), where it will behave just like
+make.
 .PP
 One of the environment variables OBJ_SUBDIR or OBJ_REPLACEMENT
 should be set to indicate where the build directory is in relation to
@@ -52,7 +55,7 @@
 into the build directory.
 For instance, if the source directory is \fI~/src/kdesdk\fP and the
 build directory is \fI~/src/kdesdk-obj\fP, then OBJ_REPLACEMENT could
-be set to \fIs#kdesdk#kdesdk-obj#\fP.
+be set to \fIs#src/kdesdk#src/kdesdk-obj#\fP.
 .SH SEE ALSO
 .BR make (1),
 .BR sed (1).
diff -urN -x CVS kdesdk.orig/debian/memprof2calltree.1 kdesdk/debian/memprof2calltree.1
--- kdesdk.orig/debian/memprof2calltree.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/memprof2calltree.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,36 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH MEMPROF2CALLTREE 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+memprof2calltree \- convert memprof profiling data to KCachegrind calltree format
+.SH SYNOPSIS
+.B memprof2calltree
+.SH DESCRIPTION
+\fBmemprof2calltree\fP reads the memory profiles of memprof and
+converts them into calltree format for use by KCachegrind.
+.PP
+The memprof data must be supplied on standard input, and the
+corresponding calltree data will be written to standard output.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH SEE ALSO
+.BR kcachegrind (1).
+.SH AUTHOR
+This converter was written by Josef Weidendorfer <Josef.Weidendorfer@gmx.de>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/op2calltree.1 kdesdk/debian/op2calltree.1
--- kdesdk.orig/debian/op2calltree.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/op2calltree.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,43 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH OP2CALLTREE 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+op2calltree \- convert OProfile profiling data to KCachegrind calltree format
+.SH SYNOPSIS
+.B op2calltree
+.SH DESCRIPTION
+\fBop2calltree\fP reads the profiling data output by OProfile v0.8 and
+converts it into calltree format for use by KCachegrind.
+.PP
+The OProfile data must be supplied on standard input, and should be
+obtained by running:
+.PP
+.RS
+opreport \-gdf
+.RE
+.PP
+This converter will then write a separate calltree data file for each
+application, to a file of the form \fIoprof.out.<app>\fP.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH SEE ALSO
+.BR kcachegrind (1).
+.SH AUTHOR
+This converter was written by Josef Weidendorfer <Josef.Weidendorfer@gmx.de>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/package_crystalsvg.1 kdesdk/debian/package_crystalsvg.1
--- kdesdk.orig/debian/package_crystalsvg.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/package_crystalsvg.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,41 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH PACKAGE_CRYSTALSVG 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+package_crystalsvg \- bundle up Crystal SVG sources from a KDE checkout
+.SH SYNOPSIS
+.B package_crystalsvg
+.SH DESCRIPTION
+\fBpackage_crystalsvg\fP assumes that the current directory contains one
+or more checked-out KDE modules.  It searches these modules for Crystal
+SVG vector sources (.svgz or .svg.gz files)
+and packages them up into a tarball.  The tarball will also
+contain \fIFILES\fP (describing the contents of the tarball and which
+KDE modules/paths they were copied from) as well as some other bits and
+pieces.
+.PP
+Note that you must at least have kdelibs checked out for this utility to
+run.
+.PP
+The final tarball will be created in the current working directory.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH AUTHOR
+package_crystalsvg was written by Frans Englich <frans.englich@telia.com>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/patches/env.diff kdesdk/debian/patches/env.diff
--- kdesdk.orig/debian/patches/env.diff	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/patches/env.diff	2005-03-20 08:04:58.000000000 +0100
@@ -0,0 +1,40 @@
+--- kdesdk/scripts/create_makefile	18 Jan 2005 15:50:01 -0000	1.25
++++ kdesdk/scripts/create_makefile	20 Mar 2005 07:03:39 -0000
+@@ -1,4 +1,4 @@
+-#!/usr/bin/env bash
++#!/bin/bash
+ 
+ # Create Makefile.in and Makefile in a directory (containing a Makefile.am !)
+ # Saves time compared to re-running configure completely
+--- kdesdk/scripts/kdelnk2desktop.py	1999/07/07 02:19:18	1.1
++++ kdesdk/scripts/kdelnk2desktop.py	2002/11/14 03:35:17
+@@ -1,4 +1,4 @@
+-#! /usr/bin/env python
++#!/usr/bin/python
+ 
+ import os, sys, string
+ 
+--- kdesdk/scripts/zonetab2pot.py	2002/09/19 08:59:32	1.1
++++ kdesdk/scripts/zonetab2pot.py	2002/11/14 03:35:17
+@@ -1,4 +1,4 @@
+-#!/usr/bin/env python
++#!/usr/bin/python
+ '''This script reads timezone list as its first argument
+ or from /usr/share/zoneinfo/zone.tab, and converts it
+ to a PO file template.
+--- kdesdk/kcachegrind/converters/hotshot2calltree	28 Apr 2004 19:35:54 -0000	1.1
++++ kdesdk/kcachegrind/converters/hotshot2calltree	15 Oct 2004 05:50:05 -0000
+@@ -1,4 +1,4 @@
+-#!/usr/bin/env python
++#!/usr/bin/python
+ # _*_ coding: latin1 _*_
+ 
+ #
+--- kdesdk/kcachegrind/converters/pprof2calltree	28 Apr 2004 19:35:54 -0000	1.1
++++ kdesdk/kcachegrind/converters/pprof2calltree	15 Oct 2004 05:50:05 -0000
+@@ -1,4 +1,4 @@
+-#!/usr/bin/env php
++#!/usr/bin/php
+ # Redistribution and use in source and binary forms, with or without
+ # modification, are permitted provided that the following conditions are met:
+ #
diff -urN -x CVS kdesdk.orig/debian/patches/kde-buildrc.diff kdesdk/debian/patches/kde-buildrc.diff
--- kdesdk.orig/debian/patches/kde-buildrc.diff	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/patches/kde-buildrc.diff	2005-03-07 22:59:27.000000000 +0100
@@ -0,0 +1,12 @@
+--- kdesdk/scripts/kde-build	17 Mar 2004 01:54:37 -0000	1.107
++++ kdesdk/scripts/kde-build	15 Oct 2004 06:56:51 -0000
+@@ -953,6 +953,9 @@ The following error codes are returned b
+ 
+         cd ~/scripts/; vi ./kde-buildrc; ./kde-build
+ 
++On Debian systems, an example F<kde-buildrc> can be found in
++the directory /usr/share/doc/kdesdk-scripts/.
++
+ =head1 BUGS
+ 
+ Probably.
diff -urN -x CVS kdesdk.orig/debian/patches/kmtrace.diff kdesdk/debian/patches/kmtrace.diff
--- kdesdk.orig/debian/patches/kmtrace.diff	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/patches/kmtrace.diff	2005-03-07 22:59:27.000000000 +0100
@@ -0,0 +1,51 @@
+--- kdesdk/kmtrace/Makefile.am	28 Apr 2003 06:52:31 -0000	1.18
++++ kdesdk/kmtrace/Makefile.am	15 Oct 2004 03:50:07 -0000
+@@ -33,13 +33,15 @@ kmmatch_LDFLAGS = $(all_libraries)
+ 
+ bin_SCRIPTS = kminspector
+ 
+-lib_LIBRARIES = libktrace_s.a
++kmtracelibdir = $(libdir)/kmtrace
++
++kmtracelib_LIBRARIES = libktrace_s.a
+ libktrace_s_a_SOURCES = ktrace_s.c
+ 
+ ktrace_s.c: $(srcdir)/ktrace.c
+ 	$(LN_S) $(srcdir)/ktrace.c $@
+ 
+-lib_LTLIBRARIES = libktrace.la
++kmtracelib_LTLIBRARIES = libktrace.la
+ libktrace_la_LDFLAGS = -avoid-version
+ libktrace_la_SOURCES = ksotrace.cpp ktrace.c
+ libktrace_la_LIBADD = $(LIBDL)
+--- kdesdk/kmtrace/README	24 May 2002 12:45:53 -0000	1.13
++++ kdesdk/kmtrace/README	15 Oct 2004 03:50:07 -0000
+@@ -23,7 +23,7 @@ friends.
+ 
+ You can activate malloc logging by starting yourApplication as:
+ 
+-	MALLOC_TRACE=/tmp/ktrace.out LD_PRELOAD=$KDEDIR/lib/libktrace.so yourApplication
++	MALLOC_TRACE=/tmp/ktrace.out LD_PRELOAD=/usr/lib/kmtrace/libktrace.so yourApplication
+ 
+ 2) The manual way
+ 
+@@ -37,7 +37,7 @@ Add as first statement in main():
+ 
+ Add ktrace_s.a to the LDADD line in your Makefile.am like:
+ 
+-	kicker_LDADD = kicker.la /opt/kde/lib/libktrace_s.a
++	kicker_LDADD = kicker.la /usr/lib/kmtrace/libktrace_s.a
+ 
+ Note that the static library is used.
+ You can now activate malloc logging by starting yourApplication as:
+--- kdesdk/kmtrace/kminspector.in	27 Nov 2001 01:44:01 -0000	1.2
++++ kdesdk/kmtrace/kminspector.in	15 Oct 2004 23:05:03 -0000
+@@ -2,7 +2,7 @@
+ 
+ export MALLOC_TREE=kminspector.tree
+ export MALLOC_THRESHOLD=2000
+-export LD_PRELOAD=@kde_libraries@/libktrace.so
++export LD_PRELOAD=@kde_libraries@/kmtrace/libktrace.so
+ 
+ $*
+ 
diff -urN -x CVS kdesdk.orig/debian/patches/pod2man.diff kdesdk/debian/patches/pod2man.diff
--- kdesdk.orig/debian/patches/pod2man.diff	2004-08-01 16:38:01.000000000 +0200
+++ kdesdk/debian/patches/pod2man.diff	2005-03-07 22:59:27.000000000 +0100
@@ -4,23 +4,23 @@
  #%.1: %
  #	pod2man $< $@
  
-+pod2man_options = "--center=K Desktop Environment (SDK)" "--release=KDE 3.2"
++pod2man_options = "--center=K Desktop Environment (SDK)" "--release=KDE 3.3"
 +
  kde-build.1: kde-build
--	pod2man $< > $@
+-	pod2man $(srcdir)/kde-build > $@
 +	pod2man $(pod2man_options) $< > $@
  cvsversion.1: cvsversion
--	pod2man $< > $@
+-	pod2man $(srcdir)/cvsversion > $@
 +	pod2man $(pod2man_options) $< > $@
  cvscheck.1: cvscheck
--	pod2man $< > $@
+-	pod2man $(srcdir)/cvscheck > $@
 +	pod2man $(pod2man_options) $< > $@
  noncvslist.1: noncvslist
--	pod2man $< > $@
+-	pod2man $(srcdir)/noncvslist > $@
 +	pod2man $(pod2man_options) $< > $@
  cvsblame.1: cvsblame
--	pod2man $< > $@
+-	pod2man $(srcdir)/cvsblame > $@
 +	pod2man $(pod2man_options) $< > $@
  includemocs.1: includemocs
--	pod2man $< > $@
+-	pod2man $(srcdir)/includemocs > $@
 +	pod2man $(pod2man_options) $< > $@
diff -urN -x CVS kdesdk.orig/debian/patches/python.diff kdesdk/debian/patches/python.diff
--- kdesdk.orig/debian/patches/python.diff	2002-11-14 04:38:48.000000000 +0100
+++ kdesdk/debian/patches/python.diff	1970-01-01 01:00:00.000000000 +0100
@@ -1,16 +0,0 @@
---- kdesdk/scripts/kdelnk2desktop.py	1999/07/07 02:19:18	1.1
-+++ kdesdk/scripts/kdelnk2desktop.py	2002/11/14 03:35:17
-@@ -1,4 +1,4 @@
--#! /usr/bin/env python
-+#!/usr/bin/python
- 
- import os, sys, string
- 
---- kdesdk/scripts/zonetab2pot.py	2002/09/19 08:59:32	1.1
-+++ kdesdk/scripts/zonetab2pot.py	2002/11/14 03:35:17
-@@ -1,4 +1,4 @@
--#!/usr/bin/env python
-+#!/usr/bin/python
- '''This script reads timezone list as its first argument
- or from /usr/share/zoneinfo/zone.tab, and converts it
- to a PO file template.
diff -urN -x CVS kdesdk.orig/debian/png2mng.pl.1 kdesdk/debian/png2mng.pl.1
--- kdesdk.orig/debian/png2mng.pl.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/png2mng.pl.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,49 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH PNG2MNG.PL 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+png2mng.pl \- combine a set of PNG images into an animated MNG image
+.SH SYNOPSIS
+.B png2mng.pl
+.I basename width height
+.SH DESCRIPTION
+\fBpng2mng.pl\fP reads a sequence of PNG images and combines them into
+a single animated MNG image.
+.PP
+The individual PNG images should be numbered consecutively from zero up,
+and should have names of the form
+.I basenameXXXX
+where
+.I XXXX
+is the four-digit sequence number (0000, 0001, 0002, etc).
+The width and height of the PNG images should
+also be included on the command line.
+.PP
+The final animated MNG image will be written to standard output.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH EXAMPLE
+The following example will combine the files hi32-action-kde-0000.png,
+hi32-action-kde-0001.png, hi32-action-kde-0002.png, etc., and write
+the resulting animated image to hi32-action-kde.mng:
+.PP
+.RS
+png2mng.pl hi32-action-kde- 32 32 > hi32-action-kde.mng
+.RE
+.SH AUTHOR
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/po2xml.1 kdesdk/debian/po2xml.1
--- kdesdk.orig/debian/po2xml.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/po2xml.1	2005-03-18 23:56:22.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH PO2XML 1 "January 31, 2004"
+.TH PO2XML 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -33,7 +33,8 @@
 .BR transxx (1),
 .BR xml2pot (1).
 .SH AUTHOR
-The PO-XML tools were written by Stephan Kulow <coolo@kde.org>.
+The PO-XML tools were written by Stephan Kulow <coolo@kde.org> and
+Peter Wells <pete@yamuna.demon.co.uk>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/poxml.README.Debian kdesdk/debian/poxml.README.Debian
--- kdesdk.orig/debian/poxml.README.Debian	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/poxml.README.Debian	2005-03-24 23:49:43.000000000 +0100
@@ -0,0 +1,39 @@
+PO/XML tools for Debian
+-----------------------
+
+Overview:
+
+  This package contains several tools for working with PO-files and
+  DocBook XML files.
+
+  Binaries included are:
+
+    po2xml:   translates a DocBook XML file using a PO-file
+    split2po: creates a PO-file from two DocBook XML files
+    swappo:   swaps msgid and msgstr fields in a PO-file
+    transxx:  creates a basic fleshed-out PO-file from a PO-template file
+    xml2pot:  creates a PO-template file from a DocBook XML file
+
+  Please see the relevant manpages for further information on each tool.
+
+Warning:
+
+  The PO/XML tools are fussy about system identifiers (unlike some other
+  XML processing tools).  When writing DocBook XML files, if a DTD is
+  declared then a system identifier must be included also.
+
+  Thus (for example) the following declaration is invalid, and will cause
+  the PO/XML tools to break:
+
+    <!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
+
+  On the other hand, both of the following declarations are acceptable:
+
+    <!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.1//EN"
+        "http://www.oasis-open.org/docbook/xml/4.1/docbookx.dtd">
+    <!DOCTYPE article>
+
+  See "DocBook: The Definitive Guide" (in the docbook-defguide package)
+  for further information.
+
+ -- Ben Burton <bab@debian.org>, Thu, 24 Mar 2005 07:59:47 +1100
diff -urN -x CVS kdesdk.orig/debian/pprof2calltree.1 kdesdk/debian/pprof2calltree.1
--- kdesdk.orig/debian/pprof2calltree.1	1970-01-01 01:00:00.000000000 +0100
+++ kdesdk/debian/pprof2calltree.1	2005-03-07 08:15:19.000000000 +0100
@@ -0,0 +1,52 @@
+.\"                                      Hey, EMACS: -*- nroff -*-
+.\" First parameter, NAME, should be all caps
+.\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
+.\" other parameters are allowed: see man(7), man(1)
+.TH PPROF2CALLTREE 1 "October 15, 2004"
+.\" Please adjust this date whenever revising the manpage.
+.\"
+.\" Some roff macros, for reference:
+.\" .nh        disable hyphenation
+.\" .hy        enable hyphenation
+.\" .ad l      left justify
+.\" .ad b      justify to both left and right margins
+.\" .nf        disable filling
+.\" .fi        enable filling
+.\" .br        insert line break
+.\" .sp <n>    insert n+1 empty lines
+.\" for manpage-specific macros, see man(7)
+.SH NAME
+pprof2calltree \- convert APD profiling data to KCachegrind calltree format
+.SH SYNOPSIS
+.B pprof2calltree
+\fB\-f\fP \fIinput\fP
+.SH DESCRIPTION
+\fBpprof2calltree\fP reads the pprof profiling data output by
+APD (http://pecl.php.net/apd/), and converts it into calltree format
+for use by KCachegrind.
+.PP
+This utility is part of the KDE Software Development Kit.
+.SH OPTIONS
+.TP
+\fB\-f\fP \fIinput\fP
+Specifies the APD pprof trace file to convert.  This generally has a
+name of the form \fIpprof.XXXXX.Y\fP.  The calltree output for
+KCachegrind will then be written to the file \fIcachegrind.out.XXXXX.Y\fP.
+.SH EXAMPLE
+Suppose you profile a script with APD and obtain the pprof trace file
+\fIpprof.12345.1\fP.  You can then work with this data in KCachegrind as
+follows.
+.PP
+.RS
+pprof2calltree -f pprof.12345.1
+.br
+kcachegrind cachegrind.out.12345.1
+.RE
+.PP
+.SH SEE ALSO
+.BR kcachegrind (1).
+.SH AUTHOR
+This converter was written by George Schlossnagle <george@omniti.com>.
+.br
+This manual page was prepared by Ben Burton <bab@debian.org>
+for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/rules kdesdk/debian/rules
--- kdesdk.orig/debian/rules	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/rules	2005-03-20 01:14:00.000000000 +0100
@@ -45,6 +45,14 @@
 configure-stamp:
 	dh_testdir
 
+	# Make absolutely sure these aren't left around from the .orig.tar.gz.
+	-rm -f debian/kmtrace.shlibs debian/kmtrace.override
+	-rm -f debian/kmtrace.README.Debian
+	-rm -f debian/patches/python.diff debian/patches/poxml.diff
+	-rm -f debian/kuiviewer.override debian/kbabel.override
+	-rm -f debian/kbugbuster.override debian/kcachegrind.override
+	-rm -f debian/kompare.override
+
 	# Apply Debian specific patches
 	if test ! -f patch-stamp; then \
 		for patch in $(CURDIR)/debian/patches/*.diff ;\
@@ -56,9 +64,13 @@
 	fi
 
 	# KDE CVS does not have aclocal.m4 or configure
-	if test ! -f configure; then \
-		$(MAKE) -f admin/Makefile.common ;\
-	fi
+	# if test ! -f configure; then \
+	# 	$(MAKE) -f admin/Makefile.common ;\
+	# fi
+
+	# Force a rerun of Makefile.common, since the debian patches touch
+	# the Makefile.ams.
+	$(MAKE) -f admin/Makefile.common
 
 	# make build directory
 	mkdir $(objdir)
@@ -135,18 +147,22 @@
 	$(INSTALL_DIR) debian/tmp/usr/share/doc/kdesdk-misc
 	$(INSTALL_FILE) kdeaccounts-plugin/README \
 	  debian/tmp/usr/share/doc/kdesdk-misc/README.kdeaccounts-plugin
+	$(INSTALL_FILE) kioslave/svn/AUTHORS \
+	  debian/tmp/usr/share/doc/kdesdk-misc/AUTHORS.kioslave-svn
+	$(INSTALL_FILE) kioslave/svn/README \
+	  debian/tmp/usr/share/doc/kdesdk-misc/README.kioslave-svn
 	$(INSTALL_FILE) kprofilemethod/README \
 	  debian/tmp/usr/share/doc/kdesdk-misc/README.kprofilemethod
 	$(INSTALL_FILE) scheck/README \
 	  debian/tmp/usr/share/doc/kdesdk-misc/README.scheck
 
-	# Rename /usr/bin/match to /usr/bin/kmmatch.
-	if test -e debian/tmp/usr/bin/match; then \
-		mv debian/tmp/usr/bin/match debian/tmp/usr/bin/kmmatch; \
-	fi
-	
+	$(INSTALL_DIR) debian/tmp/usr/share/doc/kdesdk-scripts
+	$(INSTALL_FILE) scripts/kde-buildrc \
+	  debian/tmp/usr/share/doc/kdesdk-scripts/kde-buildrc.example
+
 	# Split into separate binary packages.
-	dh_install --sourcedir=debian/tmp --list-missing
+	dh_install --sourcedir=debian/tmp --list-missing \
+	  -Xusr/share/man/man1/cvscheck.1
 
 	# Remove spurious CVS directories.
 	rm -rf `find debian/kdesdk-scripts -type d -name CVS`
@@ -203,12 +219,17 @@
 	for pkg in `dh_listpackages`; do \
 	  case "$$pkg" in \
 	    kdesdk-scripts ) \
+	      mv debian/kdesdk-scripts/usr/share/man/pl/man1/kdemangen.1 \
+	        debian/kdesdk-scripts/usr/share/man/man1/kdemangen.pl.1; \
+	      mv debian/kdesdk-scripts/usr/share/man/pl/man1/png2mng.1 \
+	        debian/kdesdk-scripts/usr/share/man/man1/png2mng.pl.1; \
 	      mv debian/kdesdk-scripts/usr/share/man/py/man1/kdelnk2desktop.1 \
 	        debian/kdesdk-scripts/usr/share/man/man1/kdelnk2desktop.py.1; \
 	      mv debian/kdesdk-scripts/usr/share/man/py/man1/zonetab2pot.1 \
 	        debian/kdesdk-scripts/usr/share/man/man1/zonetab2pot.py.1; \
 	      mv debian/kdesdk-scripts/usr/share/man/sh/man1/build-progress.1 \
 	        debian/kdesdk-scripts/usr/share/man/man1/build-progress.sh.1; \
+	      rm -rf debian/kdesdk-scripts/usr/share/man/pl; \
 	      rm -rf debian/kdesdk-scripts/usr/share/man/py; \
 	      rm -rf debian/kdesdk-scripts/usr/share/man/sh; \
 	    ;; \
diff -urN -x CVS kdesdk.orig/debian/source.lintian-overrides kdesdk/debian/source.lintian-overrides
--- kdesdk.orig/debian/source.lintian-overrides	2004-08-01 10:29:31.000000000 +0200
+++ kdesdk/debian/source.lintian-overrides	2005-03-07 08:15:19.000000000 +0100
@@ -1,2 +1,2 @@
-kdesdk source: cvsignore-file-in-source
-kdesdk source: source-contains-CVS-dir
+cvsignore-file-in-source
+source-contains-CVS-dir
diff -urN -x CVS kdesdk.orig/debian/split2po.1 kdesdk/debian/split2po.1
--- kdesdk.orig/debian/split2po.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/split2po.1	2005-03-20 13:08:27.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH SPLIT2PO 1 "January 31, 2004"
+.TH SPLIT2PO 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -33,13 +33,28 @@
 PO-file will represent.
 .PP
 This utility is part of the KDE Software Development Kit.
+.SH ENVIRONMENT VARIABLES
+.TP
+NO_CREDITS
+If set, the "ROLES_OF_TRANSLATORS" and "CREDIT_FOR_TRANSLATORS" messages
+will be omitted.  By default these are always included at the end of
+the PO-file, with empty message strings.
+.br
+These messages are used with KDE documentation, so you may wish to set
+NO_CREDITS if you are working with some other type of non-KDE documentation.
+.TP
+REPORT_MISMATCHES
+Set this variable to "no" if you wish mismatch reporting to be
+suppressed.  By default, any apparent mismatches between the two XML
+files will be noted on standard error.
 .SH SEE ALSO
 .BR po2xml (1),
 .BR swappo (1),
 .BR transxx (1),
 .BR xml2pot (1).
 .SH AUTHOR
-The PO-XML tools were written by Stephan Kulow <coolo@kde.org>.
+The PO-XML tools were written by Stephan Kulow <coolo@kde.org> and
+Peter Wells <pete@yamuna.demon.co.uk>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/swappo.1 kdesdk/debian/swappo.1
--- kdesdk.orig/debian/swappo.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/swappo.1	2005-03-18 23:56:22.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH SWAPPO 1 "January 31, 2004"
+.TH SWAPPO 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -37,7 +37,8 @@
 .BR transxx (1),
 .BR xml2pot (1).
 .SH AUTHOR
-The PO-XML tools were written by Stephan Kulow <coolo@kde.org>.
+The PO-XML tools were written by Stephan Kulow <coolo@kde.org> and
+Peter Wells <pete@yamuna.demon.co.uk>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/transxx.1 kdesdk/debian/transxx.1
--- kdesdk.orig/debian/transxx.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/transxx.1	2005-03-18 23:56:22.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH TRANSXX 1 "January 31, 2004"
+.TH TRANSXX 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -40,7 +40,8 @@
 .BR swappo (1),
 .BR xml2pot (1).
 .SH AUTHOR
-The PO-XML tools were written by Stephan Kulow <coolo@kde.org>.
+The PO-XML tools were written by Stephan Kulow <coolo@kde.org> and
+Peter Wells <pete@yamuna.demon.co.uk>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/umbrello.1 kdesdk/debian/umbrello.1
--- kdesdk.orig/debian/umbrello.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/umbrello.1	2005-03-25 01:58:46.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH UMBRELLO 1 "January 31, 2004"
+.TH UMBRELLO 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -23,9 +23,9 @@
 [ \fIfile\fP ]
 .SH DESCRIPTION
 \fBUmbrello UML Modeller\fP is a Unified Modelling Language editor for KDE.
-With UML you can create diagrams of software and other systems in a
-standard format.  Umbrello can also generate code from your UML diagrams
-in a number of programming languages.
+With UML you can create diagrams of software and other systems in an
+industry standard format.  Umbrello can also generate code from your
+UML diagrams in a number of programming languages.
 .PP
 The program supports class diagrams, sequence diagrams, collaboration
 diagrams, use case diagrams, state diagrams, activity diagrams, component
@@ -46,8 +46,8 @@
 \fIkdesdk-doc-html\fP and read this documentation in HTML format from
 \fI/usr/share/doc/kde/HTML/en/umbrello/\fP.
 .SH AUTHOR
-Umbrello was written by Paul Hensgen <phensgen@sourceforge.net> and
-several others.
+Umbrello was written by Paul Hensgen <phensgen@users.sourceforge.net> and
+many others.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/debian/umbrello.docs kdesdk/debian/umbrello.docs
--- kdesdk.orig/debian/umbrello.docs	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/umbrello.docs	2005-03-20 00:30:04.000000000 +0100
@@ -1,3 +1,4 @@
 umbrello/AUTHORS
 umbrello/README
+umbrello/THANKS
 umbrello/TODO
diff -urN -x CVS kdesdk.orig/debian/umbrello.menu kdesdk/debian/umbrello.menu
--- kdesdk.orig/debian/umbrello.menu	2004-03-08 00:59:39.000000000 +0100
+++ kdesdk/debian/umbrello.menu	2005-03-11 23:48:41.000000000 +0100
@@ -2,7 +2,6 @@
   needs="x11"\
   section="Apps/Programming"\
   hints="KDE"\
-  kderemove="1"\
   title="Umbrello"\
   longtitle="Umbrello (UML Modeller)"\
   icon="/usr/share/pixmaps/umbrello.xpm"\
diff -urN -x CVS kdesdk.orig/debian/umbrello.override kdesdk/debian/umbrello.override
--- kdesdk.orig/debian/umbrello.override	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/umbrello.override	2005-03-11 23:48:41.000000000 +0100
@@ -1,4 +1,2 @@
-# Menu items
-umbrello: menu-item-contains-unknown-tag kderemove /usr/lib/menu/umbrello:9
 # this is not a script but a template, so it should not be executable
 umbrello: script-not-executable ./usr/share/apps/umbrello/headings/heading.py
diff -urN -x CVS kdesdk.orig/debian/umbrello.xpm kdesdk/debian/umbrello.xpm
--- kdesdk.orig/debian/umbrello.xpm	2004-01-31 11:41:56.000000000 +0100
+++ kdesdk/debian/umbrello.xpm	2005-03-07 08:15:19.000000000 +0100
@@ -1,45 +1,103 @@
 /* XPM */
-static char *umbrello[] = {
-/* columns rows colors chars-per-pixel */
-"32 32 7 1",
-"  c black",
-". c red",
-"X c #FF4030",
-"o c #FF8060",
-"O c #FFBF90",
-"+ c #FFFFC0",
-"@ c None",
-/* pixels */
-"@@.......@@@@@@@@@@@@@@@@@@@@@@@",
-"@@.......@@@@@@@@@@@@@@@@@@@@@@@",
-"....XoX....@@@@@@@@@@@@@@@@@@@@@",
-"....o+o....@@@@@@@@@@@@@@@@@@@@@",
-"..XoO+OoX..@@@@@@@@@@@@@@@@@@@@@",
-"..o+++++o..@@@@@@@@@@@@@@@@@@@@@",
-"..XoO+OoX..@@@@@@@@@@@@@@@@@@@@@",
-"....o+o....@@@@@@@@@@@@@@@@@@@@@",
-"....XoX......@@@@@@@@@@@@@@@@@@@",
-"@@.......@...@@@@@@@@@@@@@@@@@@@",
-"@@.......@.....@@@@@@@@@@@@@@@@@",
-"@@@@...@@@@@...@@@@@@@@@@@@@@@@@",
-"...........@.....@@@@@@@@@@@@@@@",
-"...........@@@...@@@@@@@@@@@@@@@",
-"...........@@@.....@@@@@@@@@@@@@",
-"@@@@...@@@@@@@@@...@@@@@@@@@@@@@",
-"@@@@...@@@@@@@@@.....@@@@@@@@@@@",
-"@@@@...@@@@@@@@@@@...@@@@@@@@@@@",
-"@@.......@@@@@@@.............@@@",
-"@@.......@@@@@@@.............@@@",
-"...........@@@....XoooooooX....@",
-"...@@@@@...@@@....o+++++++o....@",
-"...@@@@@...@@@..XoO+++++++OoX..@",
-"...@@@@@...@@@..o+++++++++++o..@",
-"...@@@@@...@@@..o+++++++++++o..@",
-"@@@@@@@@@@@@@@..o+++++++++++o..@",
-"@@@@@@@@@@@@@@..XoO+++++++OoX..@",
-"@@@@@@@@@@@@@@....o+++++++o....@",
-"@@@@@@@@@@@@@@....XoooooooX....@",
-"@@@@@@@@@@@@@@@@.............@@@",
-"@@@@@@@@@@@@@@@@.............@@@",
-"@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
-};
+static char * umbrello_xpm[] = {
+"32 32 68 1",
+" 	c None",
+".	c #FF0000",
+"+	c #FF0100",
+"@	c #FF0101",
+"#	c #FF0503",
+"$	c #FF0605",
+"%	c #FF0E0A",
+"&	c #FF100C",
+"*	c #FF140F",
+"=	c #FF1712",
+"-	c #FF1813",
+";	c #FF1913",
+">	c #FF1F17",
+",	c #FF1F18",
+"'	c #FF2019",
+")	c #FF221A",
+"!	c #FF241C",
+"~	c #FF261D",
+"{	c #FF291F",
+"]	c #FF2A20",
+"^	c #FF2C22",
+"/	c #FF3025",
+"(	c #FF3629",
+"_	c #FF372B",
+":	c #FF4233",
+"<	c #FF4837",
+"[	c #FF4938",
+"}	c #FF4939",
+"|	c #FF4C3B",
+"1	c #FF4E3C",
+"2	c #FF5945",
+"3	c #FF5E48",
+"4	c #FF604A",
+"5	c #FF624C",
+"6	c #FF6850",
+"7	c #FF745A",
+"8	c #FF775C",
+"9	c #FF7B60",
+"0	c #FF7F63",
+"a	c #FF8C6D",
+"b	c #FF8F6F",
+"c	c #FF9775",
+"d	c #FF9976",
+"e	c #FFA07C",
+"f	c #FFAD86",
+"g	c #FFAF87",
+"h	c #FFB38B",
+"i	c #FFB98F",
+"j	c #FFBC92",
+"k	c #FFC498",
+"l	c #FFC89B",
+"m	c #FFCFA1",
+"n	c #FFD3A3",
+"o	c #FFD9A8",
+"p	c #FFDBAA",
+"q	c #FFDFAD",
+"r	c #FFE2AF",
+"s	c #FFE8B4",
+"t	c #FFEBB6",
+"u	c #FFEDB8",
+"v	c #FFEFB9",
+"w	c #FFEFBA",
+"x	c #FFF4BD",
+"y	c #FFF9C1",
+"z	c #FFFBC2",
+"A	c #FFFDC4",
+"B	c #FFFEC5",
+"C	c #FFFFC6",
+"    ...                         ",
+"  .......                       ",
+" +.}hme!..                      ",
+"..2CCCCw'.                      ",
+"..lCCCCC0.                      ",
+"..kCCCCC9.                      ",
+" .|BCCCs;.                      ",
+" @._eja-...                     ",
+"  ..........                    ",
+"    ...   ...                   ",
+"    ..     ...                  ",
+"    ..      ...                 ",
+"...........  ...                ",
+"...........   ...               ",
+"..........      ...             ",
+"    ..           ...            ",
+"    ..            ...           ",
+"    ...            ...          ",
+"   .....            ...         ",
+"  ... ..         ..........     ",
+"  ..  ...      ......=>#.....   ",
+" ..    ...    .../dpyCCArg<...  ",
+"...     ..   ..&iCCCCCCCCCCo].. ",
+"             .%nCCCCCCCCCCCCu^..",
+"            ..3CCCCCCCCCCCCCCc..",
+"            ..7CCCCCCCCCCCCCCf..",
+"             .,xCCCCCCCCCCCCC1..",
+"             ..(tCCCCCCCCCCz4.. ",
+"              ..*8qCCCCCCvb~..  ",
+"               ...@):56[{$...   ",
+"                 ..........     ",
+"                     ..         "};
diff -urN -x CVS kdesdk.orig/debian/xml2pot.1 kdesdk/debian/xml2pot.1
--- kdesdk.orig/debian/xml2pot.1	2004-02-01 08:06:59.000000000 +0100
+++ kdesdk/debian/xml2pot.1	2005-03-18 23:56:22.000000000 +0100
@@ -2,7 +2,7 @@
 .\" First parameter, NAME, should be all caps
 .\" Second parameter, SECTION, should be 1-8, maybe w/ subsection
 .\" other parameters are allowed: see man(7), man(1)
-.TH XML2POT 1 "January 31, 2004"
+.TH XML2POT 1 "March 19, 2005"
 .\" Please adjust this date whenever revising the manpage.
 .\"
 .\" Some roff macros, for reference:
@@ -38,7 +38,8 @@
 .BR swappo (1),
 .BR transxx (1).
 .SH AUTHOR
-The PO-XML tools were written by Stephan Kulow <coolo@kde.org>.
+The PO-XML tools were written by Stephan Kulow <coolo@kde.org> and
+Peter Wells <pete@yamuna.demon.co.uk>.
 .br
 This manual page was prepared by Ben Burton <bab@debian.org>
 for the Debian GNU/Linux system (but may be used by others).
diff -urN -x CVS kdesdk.orig/kbabel/addons/kfile-plugins/kfile_po.desktop kdesdk/kbabel/addons/kfile-plugins/kfile_po.desktop
--- kdesdk.orig/kbabel/addons/kfile-plugins/kfile_po.desktop	2005-02-01 06:44:34.000000000 +0100
+++ kdesdk/kbabel/addons/kfile-plugins/kfile_po.desktop	2005-03-07 15:20:00.000000000 +0100
@@ -4,6 +4,7 @@
 Name=Catalog Information
 Name[af]=Katalogus Informasie
 Name[bg]=Каталог от съобщения
+Name[br]=Titouroù diwar-benn ar c'hatalog
 Name[bs]=Katalog informacije
 Name[ca]=Informació de catàleg
 Name[cs]=Informace o katalogu
@@ -46,7 +47,6 @@
 Name[tr]=Katalog Bilgisi
 Name[uk]=Інформація каталогу
 Name[xh]=Ulwazi Lwencwadi yemifanekiso
-Name[xx]=xxCatalog Informationxx
 Name[zh_CN]=目录信息
 Name[zh_TW]=類別資訊
 ServiceTypes=KFilePlugin
diff -urN -x CVS kdesdk.orig/kbabel/addons/preview/pothumbnail.desktop kdesdk/kbabel/addons/preview/pothumbnail.desktop
--- kdesdk.orig/kbabel/addons/preview/pothumbnail.desktop	2005-02-01 06:44:34.000000000 +0100
+++ kdesdk/kbabel/addons/preview/pothumbnail.desktop	2005-03-07 15:20:00.000000000 +0100
@@ -54,7 +54,6 @@
 Name[ven]=Khathalogo dza mulaedza
 Name[vi]=Mục lục các thông điệp 
 Name[xh]=Umyalezo wemifanekiso esencwadini
-Name[xx]=xxMessage Catalogsxx
 Name[zh_CN]=消息目录
 Name[zh_TW]=訊息類別
 Name[zu]=Umyalezo Wemifanekiso esencwadini
diff -urN -x CVS kdesdk.orig/kbabel/catalogmanager/catalogmanager.desktop kdesdk/kbabel/catalogmanager/catalogmanager.desktop
--- kdesdk.orig/kbabel/catalogmanager/catalogmanager.desktop	2005-02-23 06:06:43.000000000 +0100
+++ kdesdk/kbabel/catalogmanager/catalogmanager.desktop	2005-03-28 09:03:01.000000000 +0200
@@ -13,7 +13,7 @@
 Name[fr]=Gestionnaire de catalogues de KBabel
 Name[ga]=KBabel - Bainisteoir na gCatalóg
 Name[hu]=KBabel listakezelő
-Name[is]=KBabel Þýðingastjóri
+Name[is]=KBabel Þýðingarstjóri
 Name[it]=Gestore dei cataloghi di KBabel
 Name[nl]=KBabel catalogusbeheer
 Name[pa]=KBabel ਸੂਚੀ ਪ੍ਰਬੰਧਕ
@@ -21,21 +21,24 @@
 Name[pt]=Gestor de Catálogos do KBabel
 Name[pt_BR]=Gerenciador de Catálogos do KBabel
 Name[ru]=KBabel - Менеджер каталогов
+Name[sr]=KBabel-ов Менаџер каталога
+Name[sr@Latn]=KBabel-ov Menadžer kataloga
 Name[sv]=Kbabel kataloghanterare
 Name[uk]=Менеджер каталогів KBabel
-Name[xx]=xxKBabel Catalog Managerxx
 GenericName=Translation Tool Catalog Manager
 GenericName[bg]=Инструмент за превод
 GenericName[ca]=Gestor de catàlegs de l'eina de traducció
+GenericName[cs]=Správce katalogů překladů
 GenericName[da]=Kataloghåndtering til oversættelsesværktøj
 GenericName[de]=Katalogmanager für Übersetzungsprogramm
 GenericName[en_GB]=Translation Tool Catalogue Manager
 GenericName[es]=Administrador de catálogos de la herramienta de traducción
 GenericName[et]=Tõlkimisrakenduse kataloogihaldur
+GenericName[eu]=Itzulpen tresnen katalogo kudeatzailea
 GenericName[fr]=Gestionnaire de catalogues de traduction
 GenericName[ga]=Uirlis Aistriúcháin - Bainisteoir na gCatalóg
 GenericName[hu]=Fordítássegítő
-GenericName[is]=Þýðingaforrit - Þýðingastjóri
+GenericName[is]=Þýðingarforrit - Þýðingarstjóri
 GenericName[it]=Gestore dei cataloghi di uno strumento di traduzione
 GenericName[nl]=Vertaalhulpmiddel catalogusbeheer
 GenericName[pa]=ਅਨੁਵਾਦ ਸੰਦ ਲਈ ਸੂਚੀ ਪ੍ਰਬੰਧਕ
@@ -43,9 +46,10 @@
 GenericName[pt]=Gestor de Catálogos de Ferramenta de Tradução
 GenericName[pt_BR]=Gerenciador de Catálogo da Ferramenta de Tradução
 GenericName[ru]=Утилита локализации приложений
+GenericName[sr]=Менаџер каталога преводилачких алата
+GenericName[sr@Latn]=Menadžer kataloga prevodilačkih alata
 GenericName[sv]=Översättningsverktyg kataloghanterare
 GenericName[uk]=Менеджер каталогів засобу для перекладів
-GenericName[xx]=xxTranslation Tool Catalog Managerxx
 Exec=catalogmanager %i %m -caption "%c" %U
 Icon=catalogmanager
 Type=Application
diff -urN -x CVS kdesdk.orig/kbabel/common/kbabelfilter.desktop kdesdk/kbabel/common/kbabelfilter.desktop
--- kdesdk.orig/kbabel/common/kbabelfilter.desktop	2005-02-01 06:44:35.000000000 +0100
+++ kdesdk/kbabel/common/kbabelfilter.desktop	2005-03-07 15:20:01.000000000 +0100
@@ -36,7 +36,6 @@
 Comment[tg]=Филтри KBabel
 Comment[tr]=KBabel filtresi
 Comment[uk]=Фільтр KBabel
-Comment[xx]=xxKBabel filterxx
 Comment[zh_CN]=KBabel 过滤器
 
 [PropertyDef::X-KDE-Import]
diff -urN -x CVS kdesdk.orig/kbabel/commonui/kbabel_validator.desktop kdesdk/kbabel/commonui/kbabel_validator.desktop
--- kdesdk.orig/kbabel/commonui/kbabel_validator.desktop	2005-02-01 06:44:35.000000000 +0100
+++ kdesdk/kbabel/commonui/kbabel_validator.desktop	2005-03-07 15:20:01.000000000 +0100
@@ -37,7 +37,6 @@
 Comment[tg]=Маълумоти асбоби KDE барои KBabel
 Comment[tr]=KBabel için KDE Veri Aracı
 Comment[uk]=Засіб роботи з даними KDE для KBabel
-Comment[xx]=xxKDE Data Tool for KBabelxx
 Comment[zh_CN]=KBabel 的 KDE 数据工具
 
 [PropertyDef::Shortcuts]
diff -urN -x CVS kdesdk.orig/kbabel/datatools/accelerators/kbabel_accelstool.desktop kdesdk/kbabel/datatools/accelerators/kbabel_accelstool.desktop
--- kdesdk.orig/kbabel/datatools/accelerators/kbabel_accelstool.desktop	2005-02-01 06:44:35.000000000 +0100
+++ kdesdk/kbabel/datatools/accelerators/kbabel_accelstool.desktop	2005-03-07 15:20:02.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலுக்கு தருமதிப்பு செல்லுபடிச் சோதனை
 Name[tg]=Тафтиши акселаторҳо барои KBabel
 Name[uk]=Перевірка акселератора для KBabel
-Name[xx]=xxAccelerator Validation for KBabelxx
 Name[zh_CN]=KBabel 的快捷键检查器
 ValidationString=accelerator
 X-KDE-Library=kbabel_accelstool
@@ -72,7 +71,6 @@
 Comment[ta]=தருமதிப்பு சரிபார்ப்பு
 Comment[tg]=Тафтиши акселаторҳо
 Comment[uk]=Перевірити акселератори
-Comment[xx]=xxCheck Acceleratorsxx
 Comment[zh_CN]=检查快捷键
 Shortcuts=Ctrl+H
 ServiceTypes=KBabelValidator,KDataTool
diff -urN -x CVS kdesdk.orig/kbabel/datatools/arguments/kbabel_argstool.desktop kdesdk/kbabel/datatools/arguments/kbabel_argstool.desktop
--- kdesdk.orig/kbabel/datatools/arguments/kbabel_argstool.desktop	2005-02-01 06:44:36.000000000 +0100
+++ kdesdk/kbabel/datatools/arguments/kbabel_argstool.desktop	2005-03-07 15:20:02.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலுக்கு தருமதிப்பு செல்லுபடிச் சோதனை
 Name[tg]=Тафтиши далелҳо барои KBabel
 Name[uk]=Перевірка аргументів для KBabel
-Name[xx]=xxArgument Validation for KBabelxx
 Name[zh_CN]=KBabel 的参数检查器
 X-KDE-Library=kbabel_argstool
 Type=Service
@@ -73,7 +72,6 @@
 Comment[tg]=Тафтиш кардани далелҳо
 Comment[tr]=Argüman Denetimi
 Comment[uk]=Перевірити аргументи
-Comment[xx]=xxCheck Argumentsxx
 Comment[zh_CN]=检查参数
 Shortcuts=Ctrl+D
 ValidationString=arguments
diff -urN -x CVS kdesdk.orig/kbabel/datatools/context/kbabel_contexttool.desktop kdesdk/kbabel/datatools/context/kbabel_contexttool.desktop
--- kdesdk.orig/kbabel/datatools/context/kbabel_contexttool.desktop	2005-02-01 06:44:36.000000000 +0100
+++ kdesdk/kbabel/datatools/context/kbabel_contexttool.desktop	2005-03-07 15:20:02.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலுக்கு மொழிபெயர்ப்பு சூழல் தகவல் செல்லுபடியாக்கம்
 Name[tg]=Тафтиши ахбороти тарҷумашудаи матнӣ барои KBabel
 Name[uk]=Перевірка інформації контексту перекладу для KBabel
-Name[xx]=xxTranslated Context Info Validation for KBabelxx
 Name[zh_CN]=KBabel 的上下文信息翻译检查器
 ValidationString=context information
 X-KDE-Library=kbabel_contexttool
@@ -72,7 +71,6 @@
 Comment[ta]= மொழிபெயர்ப்பு சூழல் தகவலை பார்
 Comment[tg]=Ҷустуҷӯи ахбороти тарҷумашудаи матнӣ 
 Comment[uk]=Пошук за інформацією контексту перекладу
-Comment[xx]=xxLook for Translated Context Infoxx
 Comment[zh_CN]=查找翻译的上下文信息
 Shortcuts=Ctrl+L
 ServiceTypes=KDataTool,KBabelValidator
diff -urN -x CVS kdesdk.orig/kbabel/datatools/equations/kbabel_equationstool.desktop kdesdk/kbabel/datatools/equations/kbabel_equationstool.desktop
--- kdesdk.orig/kbabel/datatools/equations/kbabel_equationstool.desktop	2005-02-01 06:44:36.000000000 +0100
+++ kdesdk/kbabel/datatools/equations/kbabel_equationstool.desktop	2005-03-07 15:20:02.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலுக்கு சமன்பாடு செல்லுபடிச் சோதனை
 Name[tg]=Тафтиши баробар барои KBabel
 Name[uk]=Перевірка рівнянь для KBabel
-Name[xx]=xxEquation Validation for KBabelxx
 Name[zh_CN]=KBabel 的等式检查器
 X-KDE-Library=kbabel_equationstool
 Type=Service
@@ -72,7 +71,6 @@
 Comment[tg]=Тафтиш кардани баробарҳо
 Comment[tr]=Eşitlik Denetimi
 Comment[uk]=Перевірити рівняння
-Comment[xx]=xxCheck Equationsxx
 Comment[zh_CN]=检查等式
 ServiceTypes=KDataTool,KBabelValidator
 Shortcuts=Ctrl+J
diff -urN -x CVS kdesdk.orig/kbabel/datatools/length/kbabel_lengthtool.desktop kdesdk/kbabel/datatools/length/kbabel_lengthtool.desktop
--- kdesdk.orig/kbabel/datatools/length/kbabel_lengthtool.desktop	2005-02-13 05:30:44.000000000 +0100
+++ kdesdk/kbabel/datatools/length/kbabel_lengthtool.desktop	2005-03-07 15:20:03.000000000 +0100
@@ -24,12 +24,11 @@
 Name[sk]=Kontrola dĺžky preložených textov pre KBabel
 Name[sl]=Potrjevalnik dolžin prevedenih sporočil za KBabel
 Name[sr]=Оверивач дужине преведених порука за KBabel
-Name[sr@Latn]=Оверивач дужине преведених порука за KBabel
+Name[sr@Latn]=Overivač dužine prevedenih poruka za KBabel
 Name[sv]=Validering av meddelandelängd för översättningar i Kbabel
 Name[ta]= Kபாபேலுக்கான மொழிபெயர்ப்பு செய்தி அளவு மதிப்பீட்டாளர்
 Name[tg]=Утилитаи тафтиши дарозии ахборҳои тарҷумакунанда барои KBabel
 Name[uk]=Перевірка довжини перекладених фраз для KBabel
-Name[xx]=xxTranslated Message Length Validator for KBabelxx
 Name[zh_CN]=KBabel 已翻译消息的长度检查器
 ValidationString=length checking
 X-KDE-Library=kbabel_lengthtool
@@ -68,7 +67,6 @@
 Comment[ta]= மொழிபெயர் செய்தி நீளம் சரிபார்ப்பு 
 Comment[tg]=Тафтиш кардани дарозии хабарҳои тарҷумашуда
 Comment[uk]=Перевірити довжину перекладених фраз
-Comment[xx]=xxCheck Translated Message Lengthxx
 Comment[zh_CN]=检查已翻译消息的长度
 ServiceTypes=KDataTool,KBabelValidator
 DataType=CatalogItem
diff -urN -x CVS kdesdk.orig/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop kdesdk/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop
--- kdesdk.orig/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop	2005-02-01 06:44:37.000000000 +0100
+++ kdesdk/kbabel/datatools/not-translated/kbabel_nottranslatedtool.desktop	2005-03-07 15:20:03.000000000 +0100
@@ -24,12 +24,11 @@
 Name[sk]=Kontrola anglického textu v preklade pre KBabel
 Name[sl]=Preveri prevedene nize, ki vsebujejo angleščino; za KBabel
 Name[sr]=Провера за преведене низове знакова који садрже енглески за KBabel
-Name[sr@Latn]=Провера за преведене низове знакова који садрже енглески за KBabel
+Name[sr@Latn]=Provera za prevedene nizove znakova koji sadrže engleski za KBabel
 Name[sv]=Kontrollera översatta strängar som innehåller engelska för Kbabel
 Name[ta]=கேபாபேலுக்கான ஆங்கில மொழிபெயர்ப்பு சரங்களை சோதிக்கவும். 
 Name[tg]=Тафтиши сатрҳои тарҷумашуда ба баробарии аслӣ барои KBabel
 Name[uk]=Перевірка перекладених фраз на вміст англійської для KBabel
-Name[xx]=xxCheck for Translated Strings Containing English for KBabelxx
 Name[zh_CN]=KBabel 检查已翻译字符串包含英语的工具
 ValidationString=whitespace checking
 X-KDE-Library=kbabel_nottranslatedtool
@@ -67,7 +66,6 @@
 Comment[ta]= ஆங்கிலத்தின் மொழிபெயர்ப்பு  
 Comment[tg]=Тарҷумаҳое, ки англисӣ доранд
 Comment[uk]=Переклади, які містять англійську
-Comment[xx]=xxTranslations Containing Englishxx
 Comment[zh_CN]=翻译包含英语
 ServiceTypes=KDataTool,KBabelValidator
 DataType=CatalogItem
diff -urN -x CVS kdesdk.orig/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop kdesdk/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop
--- kdesdk.orig/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop	2005-02-01 06:44:37.000000000 +0100
+++ kdesdk/kbabel/datatools/pluralforms/kbabel_pluralformstool.desktop	2005-03-07 15:20:03.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலலுக்கு தருமதிப்பு பன்மை வடிவம்
 Name[tg]=Тафтиши шаклҳои бисёр барои KBabel
 Name[uk]=Перевірка форм множини для KBabel
-Name[xx]=xxPlural Form Validation for KBabelxx
 Name[zh_CN]=KBabel 的复数形式检查器
 ValidationString=plural forms
 X-KDE-Library=kbabel_pluraltool
@@ -72,7 +71,6 @@
 Comment[ta]=  சரிபார்ப்பு
 Comment[tg]=Тафтиш кардани шаклҳои бисёр
 Comment[uk]=Перевірити форми множини
-Comment[xx]=xxCheck Plural Formsxx
 Comment[zh_CN]=检查复数形式
 ServiceTypes=KDataTool,KBabelValidator
 DataType=CatalogItem
diff -urN -x CVS kdesdk.orig/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop kdesdk/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop
--- kdesdk.orig/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop	2005-02-01 06:44:37.000000000 +0100
+++ kdesdk/kbabel/datatools/punctuation/kbabel_punctuationtool.desktop	2005-03-07 15:20:04.000000000 +0100
@@ -32,7 +32,6 @@
 Name[ta]= Kபாபேலுக்கு தருமதிப்பு குறிகள்
 Name[tg]=Тафтиши пунктуатсия барои KBabel
 Name[uk]=Перевірка пунктуації для KBabel
-Name[xx]=xxPunctuation Validation for KBabelxx
 Name[zh_CN]=KBabel 的标点检查器
 ValidationString=accelerator
 X-KDE-Library=kbabel_punctuationtool
@@ -70,7 +69,6 @@
 Comment[ta]=  நிறுத்தக்குறியிடுதல் சரிபார்ப்பு
 Comment[tg]=Тафтиш кардани пунктуатсия
 Comment[uk]=Перевірити пунктуацію
-Comment[xx]=xxCheck Punctuationxx
 Comment[zh_CN]=检查标点
 Shortcuts=Ctrl+P
 ServiceTypes=KBabelValidator,KDataTool
diff -urN -x CVS kdesdk.orig/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop kdesdk/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop
--- kdesdk.orig/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop	2005-02-21 19:18:21.000000000 +0100
+++ kdesdk/kbabel/datatools/setfuzzy/kbabel_setfuzzytool.desktop	2005-03-07 15:20:04.000000000 +0100
@@ -32,7 +32,6 @@
 Name[ta]= Kபாபேலுக்கு நிலைமாற்றி இடைநிலை கருவி
 Name[tg]=Утилита барои сиёҳнависӣ дар KBabel
 Name[uk]=Засіб перемикання неточних фраз для KBabel
-Name[xx]=xxToggle Fuzzy Tool for KBabelxx
 Name[zh_CN]=KBabel 切换模糊工具
 X-KDE-Library=kbabel_setfuzzytool
 Type=Service
@@ -71,7 +70,6 @@
 Comment[ta]= எல்லா இடைநிலையையும் அமை
 Comment[tg]=Барқарор кардани ҳолати "сиёҳнависҳо" барои ҳамаи сабтҳо
 Comment[uk]=Встановити всі фрази як "неточні"
-Comment[xx]=xxSet All Fuzzyxx
 Comment[zh_CN]=全部设为模糊
 ServiceTypes=KDataTool,KBabelTool
 DataType=Catalog
diff -urN -x CVS kdesdk.orig/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop kdesdk/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop
--- kdesdk.orig/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop	2005-02-21 19:18:21.000000000 +0100
+++ kdesdk/kbabel/datatools/whitespace/kbabel_whitespacetool.desktop	2005-03-07 15:20:04.000000000 +0100
@@ -24,12 +24,11 @@
 Name[sk]=Kontrola textu preloženého ako prázdny pre KBabel
 Name[sl]=Potrjevalnik nizov, prevedenih kot presledki, za KBabel
 Name[sr]=Оверивач за низове знакова преведене као празан простор за KBabel
-Name[sr@Latn]=Оверивач за низове знакова преведене као празан простор за KBabel
+Name[sr@Latn]=Overivač za nizove znakova prevedene kao prazan prostor za KBabel
 Name[sv]=Validering av sträng översatt som blanktecken för Kbabel
 Name[ta]=Kபாபேலுக்கு சரம் மொழிபெயர்ப்பு இடைவேலை மதிப்பீட்டாளர்
 Name[tg]=Тафтиши сатр, ки мисли фосила барои KBabel, тарҷума шудааст
 Name[uk]=Перевірка фраз, перекладених як пропуски, для KBabel
-Name[xx]=xxString Translated as Whitespace Validator for KBabelxx
 Name[zh_CN]=KBabel 的字符串译为空格的检查器
 ValidationString=whitespace checking
 X-KDE-Library=kbabel_whitespacetool
@@ -68,7 +67,6 @@
 Comment[ta]= இடைவேலை பெயர்ப்பு
 Comment[tg]=Тарҷумаҳои холӣ
 Comment[uk]=Порожні переклади
-Comment[xx]=xxWhitespace Translationsxx
 Comment[zh_CN]=空白翻译
 ServiceTypes=KDataTool,KBabelValidator
 DataType=CatalogItem
diff -urN -x CVS kdesdk.orig/kbabel/datatools/xml/kbabel_xmltool.desktop kdesdk/kbabel/datatools/xml/kbabel_xmltool.desktop
--- kdesdk.orig/kbabel/datatools/xml/kbabel_xmltool.desktop	2005-02-13 05:30:45.000000000 +0100
+++ kdesdk/kbabel/datatools/xml/kbabel_xmltool.desktop	2005-03-07 15:20:04.000000000 +0100
@@ -33,7 +33,6 @@
 Name[ta]= Kபாபேலுக்கு XML செல்லுபடி சோதனை
 Name[tg]=Тафтиши XML барои KBabel
 Name[uk]=Перевірка XML для KBabel
-Name[xx]=xxXML Validation for KBabelxx
 Name[zh_CN]=KBabel 的 XML 检查器
 ValidationString=XML tags
 X-KDE-Library=kbabel_xmltool
@@ -74,7 +73,6 @@
 Comment[tg]=Тафтиш кардани тегҳо
 Comment[tr]=Etiketleri Sına
 Comment[uk]=Перевірити мітки
-Comment[xx]=xxCheck Tagsxx
 Comment[zh_CN]=检查标签
 ServiceTypes=KDataTool,KBabelValidator
 DataType=CatalogItem
diff -urN -x CVS kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_export.desktop kdesdk/kbabel/filters/gettext/kbabel_gettext_export.desktop
--- kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_export.desktop	2005-02-01 06:44:38.000000000 +0100
+++ kdesdk/kbabel/filters/gettext/kbabel_gettext_export.desktop	2005-03-07 15:20:05.000000000 +0100
@@ -35,7 +35,6 @@
 Name[ta]=Kபாபேல் GNU உரை எடு ஏற்றுமதி வடிகட்டி
 Name[tg]=Филтри содироти хабарҳо GNU Gettext
 Name[uk]=Фільтр експорту GNU Gettext для KBabel
-Name[xx]=xxKBabel GNU Gettext Export Filterxx
 Name[zh_CN]=KBabel GNU Gettext 导出过滤器
 X-KDE-Library=kbabel_gettextexport
 X-KDE-Export=application/x-gettext
diff -urN -x CVS kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_import.desktop kdesdk/kbabel/filters/gettext/kbabel_gettext_import.desktop
--- kdesdk.orig/kbabel/filters/gettext/kbabel_gettext_import.desktop	2005-02-01 06:44:38.000000000 +0100
+++ kdesdk/kbabel/filters/gettext/kbabel_gettext_import.desktop	2005-03-07 15:20:05.000000000 +0100
@@ -35,7 +35,6 @@
 Name[ta]=Kபாபேல் GNU உரை எடு இறக்குமதி வடிகட்டி
 Name[tg]=Филтри воридоти хабарҳо GNU Gettext
 Name[uk]=Фільтр імпорту GNU Gettext для KBabel
-Name[xx]=xxKBabel GNU Gettext Import Filterxx
 Name[zh_CN]=KBabel GNU Gettext 导入过滤器
 X-KDE-Library=kbabel_gettextimport
 X-KDE-Import=application/x-gettext
diff -urN -x CVS kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_export.desktop kdesdk/kbabel/filters/linguist/kbabel_linguist_export.desktop
--- kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_export.desktop	2005-02-01 06:44:38.000000000 +0100
+++ kdesdk/kbabel/filters/linguist/kbabel_linguist_export.desktop	2005-03-07 15:20:05.000000000 +0100
@@ -35,7 +35,6 @@
 Name[ta]=Kபாபேல் மொழியியல் ஏற்றுமதி வடிகட்டி
 Name[tg]=Филтри содироти хабарҳои лингвистӣ
 Name[uk]=Фільтр експорту Linguist для KBabel
-Name[xx]=xxKBabel Linguist Export Filterxx
 Name[zh_CN]=KBabel Linguist 导出过滤器
 X-KDE-Library=kbabel_linguistexport
 X-KDE-Export=application/x-linguist
diff -urN -x CVS kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_import.desktop kdesdk/kbabel/filters/linguist/kbabel_linguist_import.desktop
--- kdesdk.orig/kbabel/filters/linguist/kbabel_linguist_import.desktop	2005-02-01 06:44:38.000000000 +0100
+++ kdesdk/kbabel/filters/linguist/kbabel_linguist_import.desktop	2005-03-07 15:20:05.000000000 +0100
@@ -35,7 +35,6 @@
 Name[ta]=Kபாபேல் மொழியியல் இறக்குமதி வடிகட்டி
 Name[tg]=Филтри воридоти хабарҳои лингвистӣ
 Name[uk]=Фільтр імпорту Linguist для KBabel
-Name[xx]=xxKBabel Linguist Import Filterxx
 Name[zh_CN]=KBabel Linguist 导入过滤器
 X-KDE-Library=kbabel_linguistimport
 X-KDE-Import=application/x-linguist
diff -urN -x CVS kdesdk.orig/kbabel/filters/xliff/kbabel_xliff_export.desktop kdesdk/kbabel/filters/xliff/kbabel_xliff_export.desktop
--- kdesdk.orig/kbabel/filters/xliff/kbabel_xliff_export.desktop	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kbabel/filters/xliff/kbabel_xliff_export.desktop	2005-03-28 09:03:01.000000000 +0200
@@ -19,9 +19,10 @@
 Name[pt]=Filtro de Exportação XLIFF para o KBabel
 Name[pt_BR]=Filtro de Exportação XLIFF do KBabel
 Name[ru]=Фильтр экспорта XLIFF
+Name[sr]=KBabel-ов XLIFF филтер за извоз
+Name[sr@Latn]=KBabel-ov XLIFF filter za izvoz
 Name[sv]=Kbabel exportfilter för XLIFF
 Name[uk]=Фільтр експорту XLIFF для KBabel
-Name[xx]=xxKBabel XLIFF Export Filterxx
 X-KDE-Library=kbabel_xliffexport
 X-KDE-Export=application/x-xliff
 ServiceTypes=KBabelFilter
diff -urN -x CVS kdesdk.orig/kbabel/filters/xliff/kbabel_xliff_import.desktop kdesdk/kbabel/filters/xliff/kbabel_xliff_import.desktop
--- kdesdk.orig/kbabel/filters/xliff/kbabel_xliff_import.desktop	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kbabel/filters/xliff/kbabel_xliff_import.desktop	2005-03-28 09:03:01.000000000 +0200
@@ -19,9 +19,10 @@
 Name[pt]=Filtro de Importação XLIFF para o KBabel
 Name[pt_BR]=Filtro de Importação XLIFF para o KBabel
 Name[ru]=Фильтр импорта XLIFF
+Name[sr]=KBabel-ов XLIFF филтер за увоз
+Name[sr@Latn]=KBabel-ov XLIFF filter za uvoz
 Name[sv]=Kbabel importfilter för XLIFF
 Name[uk]=Фільтр імпорту XLIFF для KBabel
-Name[xx]=xxKBabel XLIFF Import Filterxx
 X-KDE-Library=kbabel_xliffimport
 X-KDE-Import=application/x-xliff
 ServiceTypes=KBabelFilter
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/kbabel.desktop kdesdk/kbabel/kbabel/kbabel.desktop
--- kdesdk.orig/kbabel/kbabel/kbabel.desktop	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kbabel/kbabel/kbabel.desktop	2005-03-07 15:20:05.000000000 +0100
@@ -10,7 +10,6 @@
 Name[pt_BR]=Editor de POTFiles
 Name[sv]=Kbabel
 Name[ta]=Kபாபேல்
-Name[xx]=xxKBabelxx
 Exec=kbabel %i %m -caption "%c" %U
 Icon=kbabel
 Type=Application
@@ -69,7 +68,6 @@
 GenericName[ven]=Zwishumiswa zwau Dologa
 GenericName[vi]=Công cụ dịch 
 GenericName[xh]=Isixhobo Soguqulelo lomsebenzi kolunye ulwimi
-GenericName[xx]=xxTranslation Toolxx
 GenericName[zh_CN]=翻译工具
 GenericName[zh_TW]=翻譯工具
 GenericName[zu]=Ithuluzi Lokuguqulela
diff -urN -x CVS kdesdk.orig/kbabel/kbabel/mime/x-gettext.desktop kdesdk/kbabel/kbabel/mime/x-gettext.desktop
--- kdesdk.orig/kbabel/kbabel/mime/x-gettext.desktop	2005-02-01 06:44:39.000000000 +0100
+++ kdesdk/kbabel/kbabel/mime/x-gettext.desktop	2005-03-07 15:20:06.000000000 +0100
@@ -39,7 +39,6 @@
 Comment[tg]=Каталоги хабарҳо GNU Gettext
 Comment[tr]=GNU Gettext İleti Kataloğu
 Comment[uk]=Каталог фраз GNU Gettext
-Comment[xx]=xxGNU Gettext Message Catalogxx
 Comment[zh_CN]=GNU Gettext 消息编目
 Icon=gettext
 Type=MimeType
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/kbabeldict.desktop kdesdk/kbabel/kbabeldict/kbabeldict.desktop
--- kdesdk.orig/kbabel/kbabeldict/kbabeldict.desktop	2005-02-23 06:06:43.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/kbabeldict.desktop	2005-03-28 09:03:01.000000000 +0200
@@ -21,16 +21,19 @@
 Name[pt]=Dicionário do KBabel
 Name[pt_BR]=Dicionário do KBabel
 Name[ru]=KBabel - Словарь
+Name[sr]=KBabel-ов Речник
+Name[sr@Latn]=KBabel-ov Rečnik
 Name[sv]=Kbabel ordlista
 Name[uk]=Словник KBabel
-Name[xx]=xxKBabel Dictionaryxx
 GenericName=Translation Tool Dictionary
 GenericName[bg]=Инструмент за превод
 GenericName[ca]=Diccionari de l'eina de traducció
+GenericName[cs]=Překladový slovník
 GenericName[da]=Ordbog til oversættelsesværktøj
 GenericName[de]=Wörterbuch für Übersetzungsprogramm
 GenericName[es]=Diccionario de la herramienta de traducción
 GenericName[et]=Tõlkimisrakenduse sõnaraamat
+GenericName[eu]=Itzulpen tresnen hiztegia
 GenericName[fr]=Dictionnaire d'un outil de traduction
 GenericName[ga]=Uirlis Aistriúcháin - Foclóir
 GenericName[hu]=Fordítássegítő szótár
@@ -42,9 +45,10 @@
 GenericName[pt]=Dicionário da Ferramenta de Tradução
 GenericName[pt_BR]=Dicionário da Ferramenta de Tradução
 GenericName[ru]=Поиск в готовых переводах
+GenericName[sr]=Речник преводилачких алата
+GenericName[sr@Latn]=Rečnik prevodilačkih alata
 GenericName[sv]=Översättningsverktyg ordlista
 GenericName[uk]=Словник засобу для перекладів
-GenericName[xx]=xxTranslation Tool Dictionaryxx
 Exec=kbabeldict %i %m -caption "%c"
 Icon=kbabeldict
 Type=Application
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/kbabeldict_module.desktop kdesdk/kbabel/kbabeldict/kbabeldict_module.desktop
--- kdesdk.orig/kbabel/kbabeldict/kbabeldict_module.desktop	2005-02-21 19:18:21.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/kbabeldict_module.desktop	2005-03-07 15:20:06.000000000 +0100
@@ -35,7 +35,6 @@
 Comment[ta]=  Kபாபேலுக்கான அகராதி கூறு
 Comment[tg]=Модули луғат барои KBabelDict
 Comment[uk]=Модуль словника для KBabelDict
-Comment[xx]=xxDictionary module for KBabelDictxx
 Comment[zh_CN]=KBabelDict 的词典模块
 
 [PropertyDef::Applications]
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop kdesdk/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop	2005-02-21 19:18:21.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/modules/dbsearchengine/dbsearchengine.desktop	2005-03-07 15:20:06.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]=Kபாபேலுக்கான மொழிபெயர்ப்பு தரவுத்தளம்
 Name[tg]=Базаи маълумоти тарҷумаҳо барои KBabelDict
 Name[uk]=База даних перекладів для KBabelDict
-Name[xx]=xxTranslation Database for KBabelDictxx
 Name[zh_CN]=KBabelDict 的翻译数据库
 X-KDE-Library=kbabeldict_dbsearchengine
 ServiceTypes=KBabelDictModule
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop kdesdk/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop	2005-02-21 19:18:22.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/modules/dbsearchengine2/dbsearchengine2.desktop	2005-03-07 15:20:07.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]= Kபாபேலுக்கான மொழிபெயர்ப்பு தரவுத்தளம் v2
 Name[tg]=Тафсири 2 базаи маълумоти тарҷумаҳо барои KBabelDict
 Name[uk]=Версія 2 бази даних перекладів для KBabelDict
-Name[xx]=xxTranslation Database v2 for KBabelDictxx
 Name[zh_CN]=KBabelDict 的翻译数据库 v2
 X-KDE-Library=kbabeldict_dbsearchengine2
 ServiceTypes=KBabelDictModule
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop kdesdk/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop	2005-02-21 19:18:22.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/modules/poauxiliary/poauxiliary.desktop	2005-03-07 15:20:07.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]=Kபாபேலுக்கான இரண்டாம் PO  கூறு
 Name[tg]=Модули ёрирасони PO барои KBabelDict
 Name[uk]=Модуль допоміжного словника PO для KBabelDict
-Name[xx]=xxAuxiliary PO Module for KBabelDictxx
 Name[zh_CN]=KBabelDict 的 PO 辅助词典模块
 X-KDE-Library=kbabeldict_poauxiliary
 ServiceTypes=KBabelDictModule
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop kdesdk/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop	2005-02-21 19:18:22.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/modules/pocompendium/pocompendium.desktop	2005-03-07 15:20:07.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]=Kபாபேலுக்கான காம்பென்டியம் PO  கூறு
 Name[tg]=Модули тасвири PO барои KBabelDict
 Name[uk]=Модуль збірки перекладів PO для KBabelDict
-Name[xx]=xxPO Compendium Module for KBabelDictxx
 Name[zh_CN]=KBabelDict 的 PO 概要词典模块
 X-KDE-Library=kbabeldict_pocompendium
 ServiceTypes=KBabelDictModule
diff -urN -x CVS kdesdk.orig/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop kdesdk/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop
--- kdesdk.orig/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop	2005-02-21 19:18:23.000000000 +0100
+++ kdesdk/kbabel/kbabeldict/modules/tmx/tmxcompendium.desktop	2005-03-07 15:20:07.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]=Kபாபேலுக்கான காம்பென்டியம் TMX   கூறு 
 Name[tg]=Модули тасвири TMX барои KBabelDict
 Name[uk]=Модуль збірки перекладів TMX для KBabelDict
-Name[xx]=xxTMX Compendium Module for KBabelDictxx
 Name[zh_CN]=KBabelDict 的 TMX 概要词典模块
 X-KDE-Library=kbabeldict_tmxcompendium
 ServiceTypes=KBabelDictModule
diff -urN -x CVS kdesdk.orig/kbugbuster/kbugbuster.desktop kdesdk/kbugbuster/kbugbuster.desktop
--- kdesdk.orig/kbugbuster/kbugbuster.desktop	2005-02-19 05:27:50.000000000 +0100
+++ kdesdk/kbugbuster/kbugbuster.desktop	2005-03-07 15:20:08.000000000 +0100
@@ -54,7 +54,6 @@
 GenericName[ven]=Malangulele a Bug a KDE
 GenericName[vi]=Trình quản lí bug KDE
 GenericName[xh]=Umxholo Wokuxoxwa We KDE
-GenericName[xx]=xxKDE Bug Managementxx
 GenericName[zh_CN]=KDE 除错管理
 GenericName[zh_TW]=KDE 臭蟲管理
 GenericName[zu]=KDE Ukuphathwa Kwegciwane
@@ -70,5 +69,4 @@
 Name[ta]= Kபக்பஸ்டர்
 Name[th]=บักบัสเตอร์
 Name[ven]=Mupandeli wa Baga wa K
-Name[xx]=xxKBugBusterxx
 Categories=Qt;KDE;Development;
diff -urN -x CVS kdesdk.orig/kbugbuster/kresources/bugzilla.desktop kdesdk/kbugbuster/kresources/bugzilla.desktop
--- kdesdk.orig/kbugbuster/kresources/bugzilla.desktop	2005-02-01 06:44:41.000000000 +0100
+++ kdesdk/kbugbuster/kresources/bugzilla.desktop	2005-03-07 15:20:08.000000000 +0100
@@ -24,12 +24,11 @@
 Name[sk]=Zoznam úloh v Bugzille
 Name[sl]=Seznam »za-narediti« v Bugzilli
 Name[sr]=Листа за-урадити Bugzilla-е
-Name[sr@Latn]=Листа за-урадити Bugzilla-е
+Name[sr@Latn]=Lista za-uraditi Bugzilla-e
 Name[sv]=Bugzilla uppgiftslista
 Name[ta]=பக்சிலா டோடோஸ் பட்டியல்
 Name[tg]=Рӯйхати Todo Bugzilla
 Name[uk]=Список завдань Bugzilla
-Name[xx]=xxBugzilla Todo Listxx
 Name[zh_CN]=Bugzilla 待办列表
 X-KDE-Library=kcal_bugzilla
 Type=Service
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/callgraphview.cpp kdesdk/kcachegrind/kcachegrind/callgraphview.cpp
--- kdesdk.orig/kcachegrind/kcachegrind/callgraphview.cpp	2005-01-27 03:30:44.000000000 +0100
+++ kdesdk/kcachegrind/kcachegrind/callgraphview.cpp	2005-03-21 22:52:38.000000000 +0100
@@ -579,7 +579,7 @@
       break;
     }
     if (f)
-      *stream << QString("  center=F%1;\n").arg((int)f, 0, 16);
+      *stream << QString("  center=F%1;\n").arg((long)f, 0, 16);
     *stream << QString("  overlap=false;\n  splines=true;\n");
   }
 
@@ -630,7 +630,7 @@
       if ((int)abr.length() > Configuration::maxSymbolLength())
 	abr = abr.left(Configuration::maxSymbolLength()) + "...";
       
-      *stream << QString("  F%1 [").arg((int)f, 0, 16);
+      *stream << QString("  F%1 [").arg((long)f, 0, 16);
       if (_useBox) {
 	// make label 3 lines for CallGraphView
 	*stream << QString("shape=box,label=\"** %1 **\\n**\\n%2\"];\n")
@@ -673,9 +673,9 @@
     to.callers.removeRef(&e);
 
     *stream << QString("  F%1 -> F%2 [weight=%3")
-      .arg((int)e.from(), 0, 16)
-      .arg((int)e.to(), 0, 16)
-      .arg((int)log(log(e.cost)));
+      .arg((long)e.from(), 0, 16)
+      .arg((long)e.to(), 0, 16)
+      .arg((long)log(log(e.cost)));
 
     if (_go->detailLevel() ==1)
 	*stream << QString(",label=\"%1\"")
@@ -712,10 +712,10 @@
 	      e->count = countSum;
 
 	      *stream << QString("  R%1 [shape=point,label=\"\"];\n")
-		  .arg((int)n.function(), 0, 16);
+		  .arg((long)n.function(), 0, 16);
 	      *stream << QString("  R%1 -> F%2 [label=\"%3\\n%4 x\",weight=%5];\n")
-		  .arg((int)n.function(), 0, 16)
-		  .arg((int)n.function(), 0, 16)
+		  .arg((long)n.function(), 0, 16)
+		  .arg((long)n.function(), 0, 16)
 		  .arg(SubCost(costSum).pretty())
 		  .arg(SubCost(countSum).pretty())
 		  .arg((int)log(costSum));
@@ -735,10 +735,10 @@
 	      e->count = countSum;
 
 	      *stream << QString("  S%1 [shape=point,label=\"\"];\n")
-		  .arg((int)n.function(), 0, 16);
+		  .arg((long)n.function(), 0, 16);
 	      *stream << QString("  F%1 -> S%2 [label=\"%3\\n%4 x\",weight=%5];\n")
-		  .arg((int)n.function(), 0, 16)
-		  .arg((int)n.function(), 0, 16)
+		  .arg((long)n.function(), 0, 16)
+		  .arg((long)n.function(), 0, 16)
 		  .arg(SubCost(costSum).pretty())
 		  .arg(SubCost(countSum).pretty())
 		  .arg((int)log(costSum));
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/kcachegrind.desktop kdesdk/kcachegrind/kcachegrind/kcachegrind.desktop
--- kdesdk.orig/kcachegrind/kcachegrind/kcachegrind.desktop	2005-02-13 05:30:45.000000000 +0100
+++ kdesdk/kcachegrind/kcachegrind/kcachegrind.desktop	2005-03-17 09:39:15.000000000 +0100
@@ -11,7 +11,6 @@
 Name[hi]=के-केश-ग्रिंड
 Name[sv]=Kcachegrind
 Name[ta]=  இடைமாற்றகட்டம்
-Name[xx]=xxKCachegrindxx
 GenericName=Profiler Frontend
 GenericName[bs]=Profiler frontend
 GenericName[ca]=Interfície de Profiler
@@ -21,6 +20,7 @@
 GenericName[de]=Profiler Oberfläche
 GenericName[es]=Interfaz de Profiler
 GenericName[et]=Profileerimisrakendus
+GenericName[eu]=Profilatzailearen interfazea
 GenericName[fi]=Profiloijan käyttöliittymä
 GenericName[fr]=Interface de profilage
 GenericName[hi]=प्रोफ़ाइलर फ्रन्टएण्ड
@@ -42,7 +42,6 @@
 GenericName[ta]= விவரக்குறிப்பு முன்பகுதி
 GenericName[tg]=Интерфейс ба профилкунанда
 GenericName[uk]=Інтерфейс до Profiler
-GenericName[xx]=xxProfiler Frontendxx
 GenericName[zh_CN]=个性数据前端
 Comment=Visualization of Performance Profiling Data
 Comment[bs]=Vizualizacija podataka za profiliranje performansi
@@ -75,7 +74,6 @@
 Comment[ta]= விவர தகவலை செயல்பாட்டு காட்சியாளிப்பு
 Comment[tg]=Утилита барои гузориши профили визуалӣ
 Comment[uk]=Візуалізація даних профілювання швидкодії
-Comment[xx]=xxVisualization of Performance Profiling Dataxx
 Comment[zh_CN]=性能个性数据的可视化表现
 X-DCOP-ServiceType=Multi
 Categories=Qt;KDE;Development;
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/kwidgetaction.cpp kdesdk/kcachegrind/kcachegrind/kwidgetaction.cpp
--- kdesdk.orig/kcachegrind/kcachegrind/kwidgetaction.cpp	2003-08-29 04:13:35.000000000 +0200
+++ kdesdk/kcachegrind/kcachegrind/kwidgetaction.cpp	1970-01-01 01:00:00.000000000 +0100
@@ -1,107 +0,0 @@
-// Copy of KWidgetAction from KDE 3.1
-
-#include "kwidgetaction.h"
-
-#if KDE_VERSION < 308
-
-#include <kapplication.h>
-#include <ktoolbar.h>
-#include <kdebug.h>
-
-KWidgetAction::KWidgetAction( QWidget* widget,
-    const QString& text, const KShortcut& cut,
-    const QObject* receiver, const char* slot,
-    KActionCollection* parent, const char* name )
-  : KAction( text, cut, receiver, slot, parent, name )
-  , m_widget( widget )
-  , m_autoSized( false )
-{
-}
-
-KWidgetAction::~KWidgetAction()
-{
-}
-
-void KWidgetAction::setAutoSized( bool autoSized )
-{
-  if( m_autoSized == autoSized )
-    return;
-
-  m_autoSized = autoSized;
-
-  if( !m_widget || !isPlugged() )
-    return;
-
-  KToolBar* toolBar = (KToolBar*)m_widget->parent();
-  int i = findContainer( toolBar );
-  if ( i == -1 )
-    return;
-  int id = itemId( i );
-
-  toolBar->setItemAutoSized( id, m_autoSized );
-}
-
-int KWidgetAction::plug( QWidget* w, int index )
-{
-  if (kapp && !kapp->authorizeKAction(name()))
-      return -1;
-
-  if ( !w->inherits( "KToolBar" ) ) {
-    kdError() << "KWidgetAction::plug: KWidgetAction must be plugged into KToolBar." << endl;
-    return -1;
-  }
-  if ( !m_widget ) {
-    kdError() << "KWidgetAction::plug: Widget was deleted or null!" << endl;
-    return -1;
-  }
-
-  KToolBar* toolBar = static_cast<KToolBar*>( w );
-
-  int id = KAction::getToolButtonID();
-
-  m_widget->reparent( toolBar, QPoint() );
-  toolBar->insertWidget( id, 0, m_widget, index );
-  toolBar->setItemAutoSized( id, m_autoSized );
-
-  addContainer( toolBar, id );
-
-  // signal not available in KDE 3.0.x
-  // connect( toolBar, SIGNAL( toolbarDestroyed() ), this, SLOT( slotToolbarDestroyed() ) );
-  connect( toolBar, SIGNAL( destroyed() ), this, SLOT( slotDestroyed() ) );
-
-  return containerCount() - 1;
-}
-
-void KWidgetAction::unplug( QWidget *w )
-{
-  if( !m_widget || !isPlugged() )
-    return;
-
-  KToolBar* toolBar = (KToolBar*)m_widget->parent();
-  if ( toolBar == w )
-  {
-      //disconnect( toolBar, SIGNAL( toolbarDestroyed() ), this, SLOT( slotToolbarDestroyed() ) );
-      m_widget->reparent( 0L, QPoint(), false /*showIt*/ );
-  }
-  KAction::unplug( w );
-}
-
-void KWidgetAction::slotToolbarDestroyed()
-{
-  Q_ASSERT( m_widget );
-  Q_ASSERT( isPlugged() );
-  if( !m_widget || !isPlugged() )
-    return;
-
-  // Don't let a toolbar being destroyed, delete my widget.
-  m_widget->reparent( 0L, QPoint(), false /*showIt*/ );
-}
-
-void KWidgetAction::virtual_hook( int id, void* data )
-{ KAction::virtual_hook( id, data ); }
-
-// needed for conditional compilation
-// otherwise, kwidgetaction.moc.o will even included in KDE 3.1 version
-#include "kwidgetaction.moc"
-
-#endif
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/kwidgetaction.h kdesdk/kcachegrind/kcachegrind/kwidgetaction.h
--- kdesdk.orig/kcachegrind/kcachegrind/kwidgetaction.h	2003-08-31 00:47:25.000000000 +0200
+++ kdesdk/kcachegrind/kcachegrind/kwidgetaction.h	1970-01-01 01:00:00.000000000 +0100
@@ -1,64 +0,0 @@
-// Copy of KWidgetAction from KDE 3.1
-
-#ifndef KWIDGETACTION_H
-#define KWIDGETACTION_H
-
-#include <kdeversion.h>
-#include <kaction.h>
-
-#if KDE_VERSION < 308
-
-#include <qguardedptr.h>
-
-/**
- * An action that automatically embeds a widget into a
- * toolbar.
- */
-class KWidgetAction : public KAction
-{
-    Q_OBJECT
-public:
-    /**
-     * Create an action that will embed widget into a toolbar
-     * when plugged. This action may only be plugged into
-     * a toolbar.
-     */
-    KWidgetAction( QWidget* widget, const QString& text,
-                   const KShortcut& cut,
-                   const QObject* receiver, const char* slot,
-                   KActionCollection* parent, const char* name );
-    virtual ~KWidgetAction();
-
-    /**
-     * Returns the widget associated with this action.
-     */
-    QWidget* widget() const { return m_widget; }
-
-    void setAutoSized( bool );
-
-    /**
-     * Plug the action. The widget passed to the constructor
-     * will be reparented to w, which must inherit KToolBar.
-     */
-    virtual int plug( QWidget* w, int index = -1 );
-    /**
-     * Unplug the action. Ensures that the action is not
-     * destroyed. It will be hidden and reparented to 0L instead.
-     */
-    virtual void unplug( QWidget *w );
-protected slots:
-    void slotToolbarDestroyed();
-private:
-    QGuardedPtr<QWidget> m_widget;
-    bool                 m_autoSized;
-protected:
-    virtual void virtual_hook( int id, void* data );
-private:
-    class KWidgetActionPrivate;
-    KWidgetActionPrivate *d;
-};
-
-#endif // KDE_VERSION
-
-#endif // KWIDGETACTION_H
-
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/Makefile.am kdesdk/kcachegrind/kcachegrind/Makefile.am
--- kdesdk.orig/kcachegrind/kcachegrind/Makefile.am	2005-01-07 22:26:53.000000000 +0100
+++ kdesdk/kcachegrind/kcachegrind/Makefile.am	2005-03-25 22:01:20.000000000 +0100
@@ -6,7 +6,7 @@
  partselectionbase.ui \
  configdlgbase.ui \
  loader.cpp cachegrindloader.cpp treemap.cpp pool.cpp \
- kwidgetaction.cpp main.cpp configuration.cpp \
+ main.cpp configuration.cpp \
  functionselection.cpp coverage.cpp partgraph.cpp \
  toplevel.cpp stackselection.cpp stackbrowser.cpp \
  subcost.cpp tracedata.cpp partselection.cpp configdlg.cpp \
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/toplevel.cpp kdesdk/kcachegrind/kcachegrind/toplevel.cpp
--- kdesdk.orig/kcachegrind/kcachegrind/toplevel.cpp	2005-01-19 17:04:54.000000000 +0100
+++ kdesdk/kcachegrind/kcachegrind/toplevel.cpp	2005-03-25 22:01:20.000000000 +0100
@@ -67,7 +67,6 @@
 #include "tracedata.h"
 #include "configuration.h"
 #include "configdlg.h"
-#include "kwidgetaction.h" // needed for KDE 3.0.x
 #include "multiview.h"
 #include "callgraphview.h"
 
@@ -802,27 +801,6 @@
   _taSplitDir->setToolTip( hint );
   _taSplitDir->setWhatsThis( hint );
 
-  queryLineEdit = new QLineEdit(0);
-  QLabel* label = new QLabel( i18n("&Search:"), this, "kde toolbar widget" );
-  label->setBuddy( queryLineEdit );
-  KWidgetAction* wa;
-  wa = new KWidgetAction( label, i18n("&Search:"), Key_F6,
-                          0, 0,
-                          actionCollection(), "query_label" );
-  //wa->setAutoSized(true);
-
-  action = new KWidgetAction(queryLineEdit, i18n("Function Query"),
-                             KShortcut(),
-                             this, SLOT(querySlot()),
-                             actionCollection(), "query");
-  connect(queryLineEdit, SIGNAL(returnPressed()),
-          this, SLOT(querySlot()));
-
-  QWhatsThis::add( queryLineEdit, i18n(
-                     "Type part of a function name (insensitive) to get "
-                     "a list of matching functions from current "
-                     "function group"));
-
   // copied from KMail...
 #if KDE_VERSION >= 308 // KDE 3.1
   KStdAction::tipOfDay( this, SLOT( slotShowTip() ), actionCollection() );
diff -urN -x CVS kdesdk.orig/kcachegrind/kcachegrind/x-kcachegrind.desktop kdesdk/kcachegrind/kcachegrind/x-kcachegrind.desktop
--- kdesdk.orig/kcachegrind/kcachegrind/x-kcachegrind.desktop	2005-02-01 06:44:42.000000000 +0100
+++ kdesdk/kcachegrind/kcachegrind/x-kcachegrind.desktop	2005-03-07 15:20:08.000000000 +0100
@@ -28,7 +28,6 @@
 Comment[ta]=இடைமாற்றகட்டம்/ அழைப்பு கட்டம் விவரக்குறி திணிப்பு
 Comment[tg]=Дампи профилкунии Cachegrind/Callgrind
 Comment[uk]=Звалювання профілювання Cachegrind/Callgrind
-Comment[xx]=xxCachegrind/Callgrind Profile Dumpxx
 Comment[zh_CN]=Cachegrind/Callgrind 配置文件转存
 DefaultApp=kcachegrind
 Icon=kcachegrind
diff -urN -x CVS kdesdk.orig/kdeaccounts-plugin/kdeaccountsplugin.desktop kdesdk/kdeaccounts-plugin/kdeaccountsplugin.desktop
--- kdesdk.orig/kdeaccounts-plugin/kdeaccountsplugin.desktop	2005-02-01 06:44:42.000000000 +0100
+++ kdesdk/kdeaccounts-plugin/kdeaccountsplugin.desktop	2005-03-07 15:20:09.000000000 +0100
@@ -41,7 +41,6 @@
 Name[tr]=KDE CVS Hesapları
 Name[uk]=Рахунки KDE CVS
 Name[xh]=KDE CVS Ichaza
-Name[xx]=xxKDE CVS Accountsxx
 Name[zh_CN]=KDE CVS 账号
 Name[zh_TW]=KDE CVS 帳號
 
diff -urN -x CVS kdesdk.orig/kfile-plugins/c++/kfile_cpp.desktop kdesdk/kfile-plugins/c++/kfile_cpp.desktop
--- kdesdk.orig/kfile-plugins/c++/kfile_cpp.desktop	2005-02-01 06:44:42.000000000 +0100
+++ kdesdk/kfile-plugins/c++/kfile_cpp.desktop	2005-03-07 15:20:09.000000000 +0100
@@ -46,7 +46,6 @@
 Name[tr]=C++ Bilgisi
 Name[uk]=Інформація про C++
 Name[xh]=C++ Ulwazi
-Name[xx]=xxC++ Infoxx
 Name[zh_CN]=C++ 信息
 Name[zh_TW]=C++ 資訊
 ServiceTypes=KFilePlugin
diff -urN -x CVS kdesdk.orig/kfile-plugins/c++/kfile_h.desktop kdesdk/kfile-plugins/c++/kfile_h.desktop
--- kdesdk.orig/kfile-plugins/c++/kfile_h.desktop	2005-02-21 19:18:23.000000000 +0100
+++ kdesdk/kfile-plugins/c++/kfile_h.desktop	2005-03-07 15:20:09.000000000 +0100
@@ -4,6 +4,7 @@
 Name=C/C++ Header Info
 Name[af]=C/C++ Opskrif Inligting
 Name[bg]=Заглавен файл на C/C++
+Name[br]=Titouriñ diwar-benn ar reollin C/C++
 Name[ca]=Informació de capçaleres C/C++
 Name[cs]=Informace o C/C++ hlavičce
 Name[cy]=Gwybodaeth Pennawd C/C++
@@ -44,7 +45,6 @@
 Name[tr]=C/C++ Başlık Bilgisi
 Name[uk]=Інформація по заголовкам C++
 Name[xh]=C/C++ Ulwazi lokubhaliweyo okuphezulu
-Name[xx]=xxC/C++ Header Infoxx
 Name[zh_CN]=C/C++ 头文件信息
 Name[zh_TW]=C/C++ 檔頭資訊
 ServiceTypes=KFilePlugin
diff -urN -x CVS kdesdk.orig/kfile-plugins/diff/kfile_diff.desktop kdesdk/kfile-plugins/diff/kfile_diff.desktop
--- kdesdk.orig/kfile-plugins/diff/kfile_diff.desktop	2005-02-01 06:44:42.000000000 +0100
+++ kdesdk/kfile-plugins/diff/kfile_diff.desktop	2005-03-07 15:20:09.000000000 +0100
@@ -42,7 +42,6 @@
 Name[th]=สถานะแตกต่าง
 Name[tr]=Diff İstatistikleri
 Name[uk]=Статистика відмінностей
-Name[xx]=xxDiff Statsxx
 Name[zh_CN]=Diff 统计
 Name[zh_TW]=Diff 狀態
 ServiceTypes=KFilePlugin
diff -urN -x CVS kdesdk.orig/kfile-plugins/ts/kfile_ts.desktop kdesdk/kfile-plugins/ts/kfile_ts.desktop
--- kdesdk.orig/kfile-plugins/ts/kfile_ts.desktop	2005-02-21 19:18:23.000000000 +0100
+++ kdesdk/kfile-plugins/ts/kfile_ts.desktop	2005-03-07 15:20:10.000000000 +0100
@@ -34,7 +34,6 @@
 Name[ta]=Qt  மொழியியல் கோப்புகள் தகவல்
 Name[tg]=Ахборот дар бораи файл дар формати Qt Linguist
 Name[uk]=інформація про файл формату Qt Linguist
-Name[xx]=xxQt Linguist File Infoxx
 Name[zh_CN]=Qt 语言大师文件信息
 ServiceTypes=KFilePlugin
 X-KDE-Library=kfile_ts
diff -urN -x CVS kdesdk.orig/kioslave/svn/ksvnd/ksvnd.desktop kdesdk/kioslave/svn/ksvnd/ksvnd.desktop
--- kdesdk.orig/kioslave/svn/ksvnd/ksvnd.desktop	2005-02-22 05:13:19.000000000 +0100
+++ kdesdk/kioslave/svn/ksvnd/ksvnd.desktop	2005-03-28 09:03:02.000000000 +0200
@@ -3,6 +3,7 @@
 Type=Service
 Name=KDED Subversion Module
 Name[ca]=Mòdul KDED de Subversion
+Name[cs]=KDED Subversion modul
 Name[da]=KDED Subversion modul
 Name[de]=KDED Subversion-Modul
 Name[es]=Módulo de Subversion de KDED
@@ -17,9 +18,10 @@
 Name[pt]=Módulo KDED Subversion
 Name[pt_BR]=Módulo de Sub-versão KDED
 Name[ru]=Моудль Subversion KDED
+Name[sr]=KDED модул за Subversion
+Name[sr@Latn]=KDED modul za Subversion
 Name[sv]=KDED Subversion-modul
 Name[uk]=Модуль KDED Subversion
-Name[xx]=xxKDED Subversion Modulexx
 ServiceTypes=KDEDModule
 X-KDE-ModuleType=Library
 X-KDE-Library=ksvnd
diff -urN -x CVS kdesdk.orig/kioslave/svn/svn+file.protocol kdesdk/kioslave/svn/svn+file.protocol
--- kdesdk.orig/kioslave/svn/svn+file.protocol	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kioslave/svn/svn+file.protocol	2005-03-28 09:03:01.000000000 +0200
@@ -14,6 +14,7 @@
 Icon=remote
 Description=Subversion ioslave
 Description[ca]=Ioslave de Subversion
+Description[cs]=Subversion protokol
 Description[de]=Subversion-Ioslave
 Description[es]=El ioslave de Subversion
 Description[et]=Subversioni IO-moodul
@@ -23,8 +24,9 @@
 Description[pl]=Wtyczka protokołu Subversion
 Description[pt]='Ioslave' para Subversion
 Description[pt_BR]=ioslave de Subversão
+Description[sr]=IOSlave за Subversion
+Description[sr@Latn]=IOSlave za Subversion
 Description[sv]=Subversion I/O-slav
 Description[uk]=Підлеглий В/В Subversion
-Description[xx]=xxSubversion ioslavexx
 maxInstances=5
 class=:internet
diff -urN -x CVS kdesdk.orig/kioslave/svn/svn+http.protocol kdesdk/kioslave/svn/svn+http.protocol
--- kdesdk.orig/kioslave/svn/svn+http.protocol	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kioslave/svn/svn+http.protocol	2005-03-28 09:03:01.000000000 +0200
@@ -14,6 +14,7 @@
 Icon=remote
 Description=Subversion ioslave
 Description[ca]=Ioslave de Subversion
+Description[cs]=Subversion protokol
 Description[de]=Subversion-Ioslave
 Description[es]=El ioslave de Subversion
 Description[et]=Subversioni IO-moodul
@@ -23,8 +24,9 @@
 Description[pl]=Wtyczka protokołu Subversion
 Description[pt]='Ioslave' para Subversion
 Description[pt_BR]=ioslave de Subversão
+Description[sr]=IOSlave за Subversion
+Description[sr@Latn]=IOSlave za Subversion
 Description[sv]=Subversion I/O-slav
 Description[uk]=Підлеглий В/В Subversion
-Description[xx]=xxSubversion ioslavexx
 maxInstances=5
 class=:internet
diff -urN -x CVS kdesdk.orig/kioslave/svn/svn+https.protocol kdesdk/kioslave/svn/svn+https.protocol
--- kdesdk.orig/kioslave/svn/svn+https.protocol	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kioslave/svn/svn+https.protocol	2005-03-28 09:03:02.000000000 +0200
@@ -14,6 +14,7 @@
 Icon=remote
 Description=Subversion ioslave
 Description[ca]=Ioslave de Subversion
+Description[cs]=Subversion protokol
 Description[de]=Subversion-Ioslave
 Description[es]=El ioslave de Subversion
 Description[et]=Subversioni IO-moodul
@@ -23,8 +24,9 @@
 Description[pl]=Wtyczka protokołu Subversion
 Description[pt]='Ioslave' para Subversion
 Description[pt_BR]=ioslave de Subversão
+Description[sr]=IOSlave за Subversion
+Description[sr@Latn]=IOSlave za Subversion
 Description[sv]=Subversion I/O-slav
 Description[uk]=Підлеглий В/В Subversion
-Description[xx]=xxSubversion ioslavexx
 maxInstances=5
 class=:internet
diff -urN -x CVS kdesdk.orig/kioslave/svn/svn.protocol kdesdk/kioslave/svn/svn.protocol
--- kdesdk.orig/kioslave/svn/svn.protocol	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kioslave/svn/svn.protocol	2005-03-28 09:03:02.000000000 +0200
@@ -14,6 +14,7 @@
 Icon=remote
 Description=Subversion ioslave
 Description[ca]=Ioslave de Subversion
+Description[cs]=Subversion protokol
 Description[de]=Subversion-Ioslave
 Description[es]=El ioslave de Subversion
 Description[et]=Subversioni IO-moodul
@@ -23,8 +24,9 @@
 Description[pl]=Wtyczka protokołu Subversion
 Description[pt]='Ioslave' para Subversion
 Description[pt_BR]=ioslave de Subversão
+Description[sr]=IOSlave за Subversion
+Description[sr@Latn]=IOSlave za Subversion
 Description[sv]=Subversion I/O-slav
 Description[uk]=Підлеглий В/В Subversion
-Description[xx]=xxSubversion ioslavexx
 maxInstances=5
 class=:internet
diff -urN -x CVS kdesdk.orig/kioslave/svn/svn+ssh.protocol kdesdk/kioslave/svn/svn+ssh.protocol
--- kdesdk.orig/kioslave/svn/svn+ssh.protocol	2005-02-22 05:13:18.000000000 +0100
+++ kdesdk/kioslave/svn/svn+ssh.protocol	2005-03-28 09:03:02.000000000 +0200
@@ -14,6 +14,7 @@
 Icon=remote
 Description=Subversion ioslave
 Description[ca]=Ioslave de Subversion
+Description[cs]=Subversion protokol
 Description[de]=Subversion-Ioslave
 Description[es]=El ioslave de Subversion
 Description[et]=Subversioni IO-moodul
@@ -23,8 +24,9 @@
 Description[pl]=Wtyczka protokołu Subversion
 Description[pt]='Ioslave' para Subversion
 Description[pt_BR]=ioslave de Subversão
+Description[sr]=IOSlave за Subversion
+Description[sr@Latn]=IOSlave za Subversion
 Description[sv]=Subversion I/O-slav
 Description[uk]=Підлеглий В/В Subversion
-Description[xx]=xxSubversion ioslavexx
 maxInstances=5
 class=:internet
diff -urN -x CVS kdesdk.orig/kompare/kompare.desktop kdesdk/kompare/kompare.desktop
--- kdesdk.orig/kompare/kompare.desktop	2005-02-01 06:44:43.000000000 +0100
+++ kdesdk/kompare/kompare.desktop	2005-03-07 15:20:11.000000000 +0100
@@ -10,7 +10,6 @@
 Name[lv]=Salīdzināt
 Name[ta]=கோம்பெர்
 Name[th]=เปรียบเทียบ
-Name[xx]=xxKomparexx
 GenericName=Diff/Patch Frontend
 GenericName[af]=Diff/Lap Voorprogram
 GenericName[ar]=واجهة Diff/Patch
@@ -54,7 +53,6 @@
 GenericName[th]=ฟรอนต์เอนด์ของ Diff/Patch
 GenericName[tr]=Diff/Patch Önyüzü
 GenericName[uk]=Інтерфейс до diff/patch
-GenericName[xx]=xxDiff/Patch Frontendxx
 GenericName[zh_CN]=Diff/Patch 前端
 GenericName[zh_TW]=Diff/Patch 前端
 GenericName[zu]=Diff/PatchIsiqalo sokugcina
diff -urN -x CVS kdesdk.orig/kompare/komparenavtreepart/komparenavtreepart.desktop kdesdk/kompare/komparenavtreepart/komparenavtreepart.desktop
--- kdesdk.orig/kompare/komparenavtreepart/komparenavtreepart.desktop	2004-11-22 05:42:22.000000000 +0100
+++ kdesdk/kompare/komparenavtreepart/komparenavtreepart.desktop	2005-03-07 15:20:11.000000000 +0100
@@ -5,7 +5,6 @@
 Name[pt_BR]=Componente da árvore do Kompare
 Name[sv]=Kompare-navigeringsträdsdel
 Name[ta]=கோம்பெர் மரம் பாகம்
-Name[xx]=xxKompareNavTreePartxx
 MimeType=text/x-diff
 ServiceTypes=Kompare/NavigationPart
 X-KDE-Library=libkomparenavtreepart
diff -urN -x CVS kdesdk.orig/kompare/komparepart/kompareconnectwidget.cpp kdesdk/kompare/komparepart/kompareconnectwidget.cpp
--- kdesdk.orig/kompare/komparepart/kompareconnectwidget.cpp	2004-09-11 21:25:50.000000000 +0200
+++ kdesdk/kompare/komparepart/kompareconnectwidget.cpp	2005-03-19 06:35:03.000000000 +0100
@@ -112,6 +112,7 @@
 //	connect( m_settings, SIGNAL( settingsChanged() ), this, SLOT( slotDelayedRepaint() ) );
 	setBackgroundMode( NoBackground );
 	setSizePolicy( QSizePolicy( QSizePolicy::Fixed, QSizePolicy::Minimum ) );
+	setFocusProxy( parent->parentWidget() );
 }
 
 KompareConnectWidget::~KompareConnectWidget()
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparelistview.cpp kdesdk/kompare/komparepart/komparelistview.cpp
--- kdesdk.orig/kompare/komparepart/komparelistview.cpp	2004-11-22 01:57:54.000000000 +0100
+++ kdesdk/kompare/komparepart/komparelistview.cpp	2005-03-19 06:35:03.000000000 +0100
@@ -125,6 +125,7 @@
 	setFocusPolicy( QWidget::NoFocus );
 	setFont( m_settings->m_font );
 	setSpaces( m_settings->m_tabToNumberOfSpaces );
+	setFocusProxy( parent->parentWidget() );
 }
 
 KompareListView::~KompareListView()
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparepart.desktop kdesdk/kompare/komparepart/komparepart.desktop
--- kdesdk.orig/kompare/komparepart/komparepart.desktop	2004-11-22 05:42:23.000000000 +0100
+++ kdesdk/kompare/komparepart/komparepart.desktop	2005-03-07 15:20:11.000000000 +0100
@@ -16,7 +16,6 @@
 Name[ta]=கோம்பெர் உறுப்பு
 Name[tg]=Қисмати утилитҳои баробаркунии файлҳо
 Name[th]=ส่วนเปรียบเทียบ
-Name[xx]=xxKomparePartxx
 Name[zu]=Ingxenye yeKompare
 MimeType=text/x-diff
 ServiceTypes=Kompare/ViewPart,KParts/ReadWritePart,KParts/ReadOnlyPart
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparesplitter.cpp kdesdk/kompare/komparepart/komparesplitter.cpp
--- kdesdk.orig/kompare/komparepart/komparesplitter.cpp	2005-01-25 18:46:51.000000000 +0100
+++ kdesdk/kompare/komparepart/komparesplitter.cpp	2005-03-19 06:35:03.000000000 +0100
@@ -64,6 +64,7 @@
 	setFrameStyle( QFrame::NoFrame );
 	setSizePolicy( QSizePolicy (QSizePolicy::Ignored, QSizePolicy::Ignored ));
 	setOpaqueResize( true );
+	setFocusPolicy( QWidget::WheelFocus );
 
 	connect( this, SIGNAL(configChanged()), SLOT(slotConfigChanged()) );
 	connect( this, SIGNAL(configChanged()), SLOT(slotDelayedRepaintHandles()) );
@@ -437,6 +438,37 @@
 	repaintHandles();
 }
 
+void KompareSplitter::keyPressEvent( QKeyEvent* e )
+{
+	//keyboard scrolling
+	switch ( e->key() ) {
+	case Key_Right:
+	case Key_L:
+		m_hScroll->addLine();
+		break;
+	case Key_Left:
+	case Key_H:
+		m_hScroll->subtractLine();
+		break;
+	case Key_Up:
+	case Key_K:
+		m_vScroll->subtractLine();
+		break;
+	case Key_Down:
+	case Key_J:
+		m_vScroll->addLine();
+		break;
+	case Key_PageDown:
+		m_vScroll->addPage();
+		break;
+	case Key_PageUp:
+		m_vScroll->subtractPage();
+		break;
+	}
+	e->accept();
+	repaintHandles();
+}
+
 void KompareSplitter::timerTimeout()
 {
 	if ( restartTimer )
diff -urN -x CVS kdesdk.orig/kompare/komparepart/komparesplitter.h kdesdk/kompare/komparepart/komparesplitter.h
--- kdesdk.orig/kompare/komparepart/komparesplitter.h	2004-09-11 19:44:07.000000000 +0200
+++ kdesdk/kompare/komparepart/komparesplitter.h	2005-03-19 06:35:03.000000000 +0100
@@ -73,6 +73,7 @@
 protected:
 	void childEvent( QChildEvent * );
 	void wheelEvent( QWheelEvent* e );
+	void keyPressEvent( QKeyEvent* e );
 
 	void moveSplitter( QCOORD pos, int id );
 
diff -urN -x CVS kdesdk.orig/kuiviewer/designerthumbnail.desktop kdesdk/kuiviewer/designerthumbnail.desktop
--- kdesdk.orig/kuiviewer/designerthumbnail.desktop	2005-02-01 06:44:43.000000000 +0100
+++ kdesdk/kuiviewer/designerthumbnail.desktop	2005-03-07 15:20:12.000000000 +0100
@@ -35,7 +35,6 @@
 Name[ta]=Qt வடிவமை கோப்புகள்
 Name[tg]=Файлҳои Qt Designer
 Name[uk]=Файли Qt Designer
-Name[xx]=xxQt Designer Filesxx
 Name[zh_CN]=Qt 设计师文件
 ServiceTypes=ThumbCreator
 MimeTypes=application/x-designer
diff -urN -x CVS kdesdk.orig/kuiviewer/kuiviewer.desktop kdesdk/kuiviewer/kuiviewer.desktop
--- kdesdk.orig/kuiviewer/kuiviewer.desktop	2005-02-01 06:44:43.000000000 +0100
+++ kdesdk/kuiviewer/kuiviewer.desktop	2005-03-07 15:20:12.000000000 +0100
@@ -6,7 +6,6 @@
 Name[ja]=KUI ビューア
 Name[sv]=KUIviewer
 Name[ta]=KUIவியூவர்
-Name[xx]=xxKUIViewerxx
 Exec=kuiviewer %i %m -caption "%c"
 Icon=kuiviewer
 Type=Application
@@ -35,12 +34,11 @@
 GenericName[sk]=Prehliadač súborov UI pre Qt Designer
 GenericName[sl]=Pregledovalnik datotek UI za Qt Designer
 GenericName[sr]=Приказивач UI фајлова Qt Designer-а
-GenericName[sr@Latn]=Приказивач UI фајлова Qt Designer-а
+GenericName[sr@Latn]=Prikazivač UI fajlova Qt Designer-a
 GenericName[sv]=Qt-designer UI-filvisning
 GenericName[ta]=Qt  வடிவமைப்பவர் UI கோப்புகள் காட்சியகம்
 GenericName[tg]=Намоишгари UI-файлҳо Qt Designer
 GenericName[uk]=Переглядач UI-файлів Qt Designer
-GenericName[xx]=xxQt Designer UI File Viewerxx
 GenericName[zh_CN]=Qt 设计师 UI 文件查看器
 MimeType=application/x-designer;
 Terminal=false
diff -urN -x CVS kdesdk.orig/kuiviewer/kuiviewer_part.desktop kdesdk/kuiviewer/kuiviewer_part.desktop
--- kdesdk.orig/kuiviewer/kuiviewer_part.desktop	2004-10-26 04:45:31.000000000 +0200
+++ kdesdk/kuiviewer/kuiviewer_part.desktop	2005-03-07 15:20:12.000000000 +0100
@@ -4,7 +4,6 @@
 Name[hi]=के-यूआई-व्यूअर-पार्ट
 Name[sv]=KUIviewer-del
 Name[ta]=KUIவியூவர் உறுப்பு
-Name[xx]=xxKUIViewerPartxx
 MimeType=application/x-designer;
 ServiceTypes=KParts/ReadOnlyPart
 X-KDE-Library=libkuiviewerpart
diff -urN -x CVS kdesdk.orig/scheck/scheck.themerc kdesdk/scheck/scheck.themerc
--- kdesdk.orig/scheck/scheck.themerc	2005-02-01 06:44:44.000000000 +0100
+++ kdesdk/scheck/scheck.themerc	2005-03-07 15:20:12.000000000 +0100
@@ -4,7 +4,6 @@
 Name[hi]=शेक
 Name[hu]=Stílusellenőrző
 Name[ta]=Sசரிபார்ப்பு 
-Name[xx]=xxScheckxx
 Comment=Development style for searching accelerator and style guide conflicts
 Comment[bs]=Stil razvoja za pretragu konflikata akceleratora i konflikata sa stilskim vodičem
 Comment[ca]=Estil de desenvolupament per a cercar conflictes amb acceleradors i la guia d'estil
@@ -37,7 +36,6 @@
 Comment[ta]=தேடுதல் முடுக்கி மற்றும் பாணி வழிகாட்டி எதிர்மறைகளுக்கு தேவையான மேம்பாடு.
 Comment[tg]=Навъи коркард барои ҷустуҷӯи низоии акселаторҳо ва навъи навишти барнома
 Comment[uk]=Стиль розробки для пошуку конфліктів акселераторів та правил стилю
-Comment[xx]=xxDevelopment style for searching accelerator and style guide conflictsxx
 Comment[zh_CN]=搜索加速键和样式指南冲突的开发样式
 
 [KDE]
diff -urN -x CVS kdesdk.orig/scripts/cvsbackport kdesdk/scripts/cvsbackport
--- kdesdk.orig/scripts/cvsbackport	2005-02-25 11:34:19.000000000 +0100
+++ kdesdk/scripts/cvsbackport	2005-03-04 23:17:38.000000000 +0100
@@ -13,7 +13,7 @@
 until test $# -eq 0; do
 
   echo "looking for last change to $1..."
-  cvslastchange $1 > $TMPFILE
+  CVSLASTCHANGE_KEEP_WHITESPACE=1 cvslastchange $1 > $TMPFILE
   echo "browsing last change to $1..."
   less $TMPFILE
   cvs up -r$BRANCH $1
diff -urN -x CVS kdesdk.orig/scripts/cvsforwardport kdesdk/scripts/cvsforwardport
--- kdesdk.orig/scripts/cvsforwardport	2005-02-25 11:46:46.000000000 +0100
+++ kdesdk/scripts/cvsforwardport	2005-03-04 23:17:38.000000000 +0100
@@ -13,7 +13,7 @@
 until test $# -eq 0; do
 
   echo "looking for last change to $1..."
-  cvslastchange $1 > $TMPFILE
+  CVSLASTCHANGE_KEEP_WHITESPACE=1 cvslastchange $1 > $TMPFILE
   echo "browsing last change to $1..."
   less $TMPFILE
   cvs up -A $1
diff -urN -x CVS kdesdk.orig/scripts/cvslastchange kdesdk/scripts/cvslastchange
--- kdesdk.orig/scripts/cvslastchange	2004-11-14 20:12:20.000000000 +0100
+++ kdesdk/scripts/cvslastchange	2005-03-04 23:17:38.000000000 +0100
@@ -48,6 +48,8 @@
 my $cmd = "cd $dir; cvs -f log -N -r$vnew $base";
 print "$cmd\n";
 system("$cmd");
-$cmd = "cd $dir; cvs -f diff -kk -bp -u -r$vold -r$vnew $base";
+my $whitespace = "";
+$whitespace = "-b" unless (defined $ENV{"CVSLASTCHANGE_KEEP_WHITESPACE"});
+$cmd = "cd $dir; cvs -f diff -kk $whitespace -p -u -r$vold -r$vnew $base";
 print "$cmd\n";
 system("$cmd");
diff -urN -x CVS kdesdk.orig/scripts/kde-emacs/kde-emacs-core.el kdesdk/scripts/kde-emacs/kde-emacs-core.el
--- kdesdk.orig/scripts/kde-emacs/kde-emacs-core.el	2005-03-01 15:39:01.000000000 +0100
+++ kdesdk/scripts/kde-emacs/kde-emacs-core.el	2005-03-08 23:09:58.000000000 +0100
@@ -142,7 +142,7 @@
 (defun kde-c++-mode-hook ()
   (font-lock-mode)
   (c-set-style kde-c++-style)
-  (define-key c++-mode-map "\C-m" 'newline-and-indent)
+  (define-key c++-mode-map "\C-m" 'c-context-line-break)
   (when (or
 	 (eq kde-tab-behavior 'default)
 	 (eq kde-tab-behavior 'abbrev-indent))
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/associationwidget.cpp kdesdk/umbrello/umbrello/associationwidget.cpp
--- kdesdk.orig/umbrello/umbrello/associationwidget.cpp	2005-02-23 00:22:07.000000000 +0100
+++ kdesdk/umbrello/umbrello/associationwidget.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -31,6 +31,7 @@
 #include "listpopupmenu.h"
 #include "classifier.h"
 #include "attribute.h"
+#include "operation.h"
 #include "association.h"
 #include "assocrules.h"
 #include "floatingtext.h"
@@ -417,7 +418,17 @@
 }
 
 void AssociationWidget::setMessageText(FloatingText *ft) {
-	ft->setText( getName() );
+	QString message;
+	if (getAssocType() == at_Coll_Message) {
+		if (m_pObject != NULL) {
+			message = getMulti(A) + ": " + getOperationText(m_pView);
+		} else {
+			message = getMulti(A) + ": " + getName();
+		}
+	} else {
+		message = getName();
+	}
+	ft->setText(message);
 }
 
 Scope AssociationWidget::getVisibility(Role_Type role) const {
@@ -2583,8 +2594,12 @@
 	}
 	if (role == A)
 		m_LinePath.setPoint( 0, pt );
-	else
+	else {
 		m_LinePath.setPoint( m_LinePath.count() - 1, pt );
+		LinePath::Region r = ( region == South || region == North ) ?
+			LinePath::TopBottom : LinePath::LeftRight;
+		m_LinePath.setDockRegion( r );
+	}
 }
 
 void AssociationWidget::setSelected(bool _select /* = true */) {
@@ -2793,7 +2808,19 @@
 	return  m_role[role].m_nTotalCount;
 }
 
-UMLClassifier *AssociationWidget::getOperationOwner(FloatingText *) {
+UMLOperation *AssociationWidget::getOperation() {
+	return dynamic_cast<UMLOperation*>(m_pObject);
+}
+
+void AssociationWidget::setOperation(UMLOperation *op) {
+	if (m_pObject)
+		disconnect(m_pObject, SIGNAL(modified()), m_pName, SLOT(setMessageText()));
+	m_pObject = op;
+	if (m_pObject)
+		connect(m_pObject, SIGNAL(modified()), m_pName, SLOT(setMessageText()));
+}
+
+UMLClassifier *AssociationWidget::getOperationOwner() {
 	Association_Type atype = getAssocType();
 	Role_Type role = (atype == at_Coll_Message ? B : A);
 	UMLObject *o = getWidget(role)->getUMLObject();
@@ -2808,7 +2835,8 @@
 }
 
 void AssociationWidget::setSeqNumAndOp(const QString &seqNum, const QString &op) {
-	setName(op);
+	if (! op.isEmpty())
+		setName(op);
 	setMulti(seqNum, A);
 }
 
@@ -2821,10 +2849,14 @@
 	return c;
 }
 
-void AssociationWidget::setOperationText(FloatingText *, const QString &opText) {
+void AssociationWidget::setCustomOpText(const QString &opText) {
 	setName(opText);
 }
 
+QString AssociationWidget::getCustomOpText() {
+	return getName();
+}
+
 void AssociationWidget::setWidget( UMLWidget* widget, Role_Type role) {
 	m_role[role].m_pWidget = widget;
 	if (widget) {
@@ -2999,15 +3031,18 @@
 			kdError() << "AssociationWidget::loadFromXMI: cannot find UMLObject "
 				  << ID2STR(nId) << endl;
 			return false;
-		} else if (myObj->getBaseType() == ot_Attribute) {
-			m_pObject = myObj;
-			QString type = qElement.attribute( "type", "-1" );
-			Uml::Association_Type aType = (Uml::Association_Type) type.toInt();
-			setAssocType(aType);
 		} else {
-			UMLAssociation * myAssoc = (UMLAssociation*)myObj;
-			setUMLAssociation(myAssoc);
-			m_LinePath.setAssocType( myAssoc->getAssocType() );
+			const Uml::Object_Type ot = myObj->getBaseType();
+			if (ot == ot_Attribute || ot == ot_Operation) {
+				m_pObject = myObj;
+				QString type = qElement.attribute( "type", "-1" );
+				Uml::Association_Type aType = (Uml::Association_Type) type.toInt();
+				setAssocType(aType);
+			} else {
+				UMLAssociation * myAssoc = (UMLAssociation*)myObj;
+				setUMLAssociation(myAssoc);
+				m_LinePath.setAssocType( myAssoc->getAssocType() );
+			}
 		}
 	}
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/associationwidget.h kdesdk/umbrello/umbrello/associationwidget.h
--- kdesdk.orig/umbrello/umbrello/associationwidget.h	2004-12-23 18:11:40.000000000 +0100
+++ kdesdk/umbrello/umbrello/associationwidget.h	2005-03-26 00:09:07.000000000 +0100
@@ -31,6 +31,7 @@
 class UMLView;
 class UMLAssociation;
 class UMLAttribute;
+class UMLOperation;
 
 /**
  * This class represents an association inside a diagram.
@@ -403,14 +404,33 @@
 	/**
 	 * Overrides operation from LinkWidget.
 	 * Required by FloatingText.
+	 * @todo Move to LinkWidget.
 	 */
-	UMLClassifier *getOperationOwner(FloatingText *ft);
+	UMLClassifier *getOperationOwner();
+
+	/**
+	 * Implements operation from LinkWidget.
+	 * Motivated by FloatingText.
+	 */
+	UMLOperation *getOperation();
+
+	/**
+	 * Implements operation from LinkWidget.
+	 * Motivated by FloatingText.
+	 */
+	void setOperation(UMLOperation *op);
+
+	/**
+	 * Overrides operation from LinkWidget.
+	 * Required by FloatingText.
+	 */
+	QString getCustomOpText();
 
 	/**
 	 * Overrides operation from LinkWidget.
 	 * Required by FloatingText.
 	 */
-	void setOperationText(FloatingText *ft, const QString &opText);
+	void setCustomOpText(const QString &opText);
 
 	/**
 	 * Overrides operation from LinkWidget.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/attribute.cpp kdesdk/umbrello/umbrello/attribute.cpp
--- kdesdk.orig/umbrello/umbrello/attribute.cpp	2005-02-12 21:59:54.000000000 +0100
+++ kdesdk/umbrello/umbrello/attribute.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -102,7 +102,7 @@
 		if (type) {
 			UMLPackage *typeScope = type->getUMLPackage();
 			if (typeScope != ownParent && typeScope != ownParent->getUMLPackage())
-				typeName = type->getFullyQualifiedName(".");
+				typeName = type->getFullyQualifiedName();
 			else
 				typeName = type->getName();
 		}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/attribute.h kdesdk/umbrello/umbrello/attribute.h
--- kdesdk.orig/umbrello/umbrello/attribute.h	2005-02-09 20:07:43.000000000 +0100
+++ kdesdk/umbrello/umbrello/attribute.h	2005-03-05 10:08:23.000000000 +0100
@@ -96,7 +96,7 @@
 	/**
 	 * Reimplement method from UMLObject.
 	 */
-	QString getFullyQualifiedName(const QString &separator = "::") const;
+	QString getFullyQualifiedName(const QString &separator = ".") const;
 
 	/**
 	 * Creates the <UML:Attribute> XMI element.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/class.cpp kdesdk/umbrello/umbrello/class.cpp
--- kdesdk.orig/umbrello/umbrello/class.cpp	2005-01-07 16:04:38.000000000 +0100
+++ kdesdk/umbrello/umbrello/class.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -12,17 +12,24 @@
  *                                                                         *
  ***************************************************************************/
 
+// own header
 #include "class.h"
+// qt/kde includes
+#include <kdebug.h>
+#include <klocale.h>
+#include <kmessagebox.h>
+// application specific includes
 #include "association.h"
 #include "attribute.h"
 #include "operation.h"
 #include "stereotype.h"
 #include "classifierlistitem.h"
 #include "template.h"
-#include "clipboard/idchangelog.h"
 #include "uml.h"
-#include <kdebug.h>
-#include <klocale.h>
+#include "umldoc.h"
+#include "optionstate.h"
+#include "clipboard/idchangelog.h"
+#include "dialogs/umlattributedialog.h"
 
 UMLClass::UMLClass(const QString & name, Uml::IDType id) : UMLClassifier (name, id)
 {
@@ -37,6 +44,48 @@
 	// already gives us clear()ed lists.)
 }
 
+UMLObject* UMLClass::createAttribute(const QString &name /*=null*/) {
+	UMLDoc *umldoc = UMLApp::app()->getDocument();
+	Uml::IDType id = umldoc->getUniqueID();
+	QString currentName;
+	if (name.isNull())  {
+		currentName = uniqChildName(Uml::ot_Attribute);
+	} else {
+		currentName = name;
+	}
+	const Settings::OptionState optionState = UMLApp::app()->getOptionState();
+	Uml::Scope scope = optionState.classState.defaultAttributeScope;
+	UMLAttribute* newAttribute = new UMLAttribute(this, currentName, id, scope);
+
+	int button = QDialog::Accepted;
+	bool goodName = false;
+
+	//check for name.isNull() stops dialogue being shown
+	//when creating attribute via list view
+	while (button == QDialog::Accepted && !goodName && name.isNull()) {
+		UMLAttributeDialog attributeDialogue(0, newAttribute);
+		button = attributeDialogue.exec();
+		QString name = newAttribute->getName();
+
+		if(name.length() == 0) {
+			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
+		} else if ( findChildObject(Uml::ot_Attribute, name).count() > 0 ) {
+			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
+		} else {
+			goodName = true;
+		}
+	}
+
+	if (button != QDialog::Accepted) {
+		return NULL;
+	}
+
+	addAttribute(newAttribute);
+
+	umldoc->signalUMLObjectCreated(newAttribute);
+	return newAttribute;
+}
+
 UMLAttribute* UMLClass::addAttribute(const QString &name, Uml::IDType id /* = Uml::id_None */) {
 	for (UMLClassifierListItemListIt lit(m_List); lit.current(); ++lit) {
 		UMLClassifierListItem *obj = lit.current();
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/class.h kdesdk/umbrello/umbrello/class.h
--- kdesdk.orig/umbrello/umbrello/class.h	2004-12-31 19:15:40.000000000 +0100
+++ kdesdk/umbrello/umbrello/class.h	2005-03-26 00:09:07.000000000 +0100
@@ -64,6 +64,14 @@
 	bool operator==( UMLClass & rhs );
 
 	/**
+	 * Creates an attribute for the class.
+	 *
+	 * @param name  An optional name, used by when creating through UMLListView
+	 * @return	The UMLAttribute created
+	 */
+	UMLObject* createAttribute(const QString &name = QString::null);
+
+	/**
 	 * Adds an attribute to the class.
 	 * If an attribute of the given name already exists, then
 	 * returns the existing attribute instead of creating a new one.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/classifier.cpp kdesdk/umbrello/umbrello/classifier.cpp
--- kdesdk.orig/umbrello/umbrello/classifier.cpp	2005-02-14 06:29:49.000000000 +0100
+++ kdesdk/umbrello/umbrello/classifier.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -11,6 +11,7 @@
 // qt/kde includes
 #include <kdebug.h>
 #include <klocale.h>
+#include <kmessagebox.h>
 // app includes
 #include "association.h"
 #include "umlassociationlist.h"
@@ -18,10 +19,12 @@
 #include "attribute.h"
 #include "template.h"
 #include "stereotype.h"
-#include "clipboard/idchangelog.h"
 #include "umldoc.h"
 #include "uml.h"
 #include "model_utils.h"
+#include "clipboard/idchangelog.h"
+#include "dialogs/umloperationdialog.h"
+#include "dialogs/umltemplatedialog.h"
 
 using namespace Uml;
 
@@ -80,6 +83,89 @@
 	return NULL;
 }
 
+UMLOperation* UMLClassifier::findOperation(QString name, Umbrello::NameAndType_List params) {
+	UMLObjectList list = findChildObject(Uml::ot_Operation, name);
+	if (list.count() == 0)
+		return NULL;
+	// If there are operation(s) with the same name then compare the parameter list
+	const int inputParmCount = params.count();
+	UMLOperation* test = NULL;
+	for (UMLObjectListIt oit(list);
+	     (test = static_cast<UMLOperation*>(oit.current())) != NULL; ++oit) {
+		UMLAttributeList *testParams = test->getParmList();
+		const int pCount = testParams->count();
+		if (inputParmCount == 0 && pCount == 0)
+			break;
+		if (inputParmCount != pCount)
+			continue;
+		int i = 0;
+		for (; i < pCount; ++i) {
+			Umbrello::NameAndType_ListIt nt(params.at(i));
+			UMLObject *c = (*nt).second;
+			QString typeName = testParams->at(i)->getTypeName();
+			if (c == NULL) {       //template parameter
+				if (typeName != "class")
+					break;
+			} else if (typeName != c->getName())
+				break;
+		}
+		if (i == pCount)
+			break;  // all parameters matched
+	}
+	return test;
+}
+
+UMLOperation* UMLClassifier::createOperation(const QString &name /*=null*/,
+					     bool *isExistingOp  /*=NULL*/,
+					     Umbrello::NameAndType_List *params  /*=NULL*/)
+{
+	bool nameNotSet = (name.isNull() || name.isEmpty());
+	if (! nameNotSet) {
+		Umbrello::NameAndType_List parList;
+		if (params)
+			parList = *params;
+		UMLOperation* existingOp = findOperation(name, parList);
+		if (existingOp != NULL) {
+			if (isExistingOp != NULL)
+				*isExistingOp = true;
+			return existingOp;
+		}
+	}
+	// we did not find an exact match, so the signature is unique
+	UMLOperation *op = new UMLOperation(this, name);
+	if (params) {
+		for (Umbrello::NameAndType_ListIt it = params->begin(); it != params->end(); ++it ) {
+			const Umbrello::NameAndType &nt = *it;
+			UMLAttribute *par = new UMLAttribute(op, nt.first);
+			par->setType(nt.second);
+			op->addParm(par);
+		}
+	}
+	if (nameNotSet || params == NULL) {
+		if (nameNotSet)
+			op->setName( uniqChildName(Uml::ot_Operation) );
+		do {
+			UMLOperationDialog operationDialogue(0, op);
+			if( operationDialogue.exec() != QDialog::Accepted ) {
+				delete op;
+				return NULL;
+			} else if (checkOperationSignature(op->getName(), op->getParmList())) {
+				KMessageBox::information(0,
+				 i18n("An operation with the same name and signature already exists. You can not add it again."));
+			} else {
+				break;
+			}
+		} while(1);
+	}
+
+	// operation name is ok, formally add it to the classifier
+	addOperation( op );
+
+	UMLDoc *umldoc = UMLApp::app()->getDocument();
+	umldoc->signalUMLObjectCreated(op);
+	return op;
+}
+
 bool UMLClassifier::addOperation(UMLOperation* op, int position )
 {
 	if (m_List.findRef(op) != -1) {
@@ -141,6 +227,39 @@
 	return 0;
 }
 
+UMLObject* UMLClassifier::createTemplate(QString currentName /*= QString::null*/) {
+	bool goodName = !currentName.isEmpty();
+	if (!goodName)
+		currentName = uniqChildName(Uml::ot_Template);
+	UMLTemplate* newTemplate = new UMLTemplate(this, currentName);
+
+	int button = QDialog::Accepted;
+
+	while (button==QDialog::Accepted && !goodName) {
+		UMLTemplateDialog templateDialogue(0, newTemplate);
+		button = templateDialogue.exec();
+		QString name = newTemplate->getName();
+
+		if(name.length() == 0) {
+			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
+		} else if ( findChildObject(Uml::ot_Template, name).count() > 0 ) {
+			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
+		} else {
+			goodName = true;
+		}
+	}
+
+	if (button != QDialog::Accepted) {
+		return NULL;
+	}
+
+	addTemplate(newTemplate);
+
+	UMLDoc *umldoc = UMLApp::app()->getDocument();
+	umldoc->signalUMLObjectCreated(newTemplate);
+	return newTemplate;
+}
+
 UMLObjectList UMLClassifier::findChildObject(Object_Type t , const QString &n) {
 	if (t == ot_Association) {
 		return UMLCanvasObject::findChildObject(t, n);
@@ -156,13 +275,21 @@
 	return list;
 }
 
-UMLObject* UMLClassifier::findChildObject(Uml::IDType id) {
+UMLObject* UMLClassifier::findChildObject(Uml::IDType id, bool considerAncestors /* =false */) {
 	for (UMLClassifierListItemListIt lit(m_List); lit.current(); ++lit) {
 		UMLClassifierListItem* o = lit.current();
 		if (o->getID() == id)
 			return o;
 	}
-	return UMLCanvasObject::findChildObject(id);
+	if (considerAncestors) {
+		UMLClassifierList ancestors = findSuperClassConcepts();
+		for (UMLClassifier *anc = ancestors.first(); anc; anc = ancestors.next()) {
+			UMLObject *o = anc->findChildObject(id);
+			if (o)
+				return o;
+		}
+	}
+	return UMLCanvasObject::findAssoc(id);
 }
 
 UMLClassifierList UMLClassifier::findSubClassConcepts (ClassifierType type) {
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/classifier.h kdesdk/umbrello/umbrello/classifier.h
--- kdesdk.orig/umbrello/umbrello/classifier.h	2005-01-09 00:32:32.000000000 +0100
+++ kdesdk/umbrello/umbrello/classifier.h	2005-03-26 00:09:07.000000000 +0100
@@ -16,6 +16,7 @@
 #include "umlclassifierlistitemlist.h"
 #include "classifierlistitem.h"
 #include "umltemplatelist.h"
+#include "model_utils.h"
 
 class IDChangeLog;
 
@@ -77,6 +78,31 @@
 	virtual UMLObject* clone() const = 0;
 
 	/**
+	 * Creates an operation in the current document.
+	 * The new operation is initialized with name, id, etc.
+	 * If a method with the given profile already exists in the classifier,
+	 * no new method is created and the existing operation is returned.
+	 * If no name is provided, or if the params are NULL, an Operation
+	 * Dialog is shown to ask the user for a name and parameters.
+	 * The operation's signature is checked for validity within the parent
+	 * classifier.
+	 *
+	 * @param name		The operation name (will be chosen internally if
+	 *			none given.)
+	 * @param isExistingOp	Optional pointer to bool. If supplied, the bool is
+	 *			set to true if an existing operation is returned.
+	 * @param params	Optional list of parameter names and types.
+	 *			If supplied, new operation parameters are
+	 *			constructed using this list.
+	 * @return The new operation, or NULL if the operation could not be
+	 *         created because for example, the user canceled the dialog
+	 *         or no appropriate name can be found.
+	*/
+	UMLOperation* createOperation( const QString &name = QString::null,
+				       bool *isExistingOp = NULL,
+				       Umbrello::NameAndType_List *params = NULL);
+
+	/**
 	 * Adds an operation to the classifier, at the given position.
 	 * If position is negative or too large, the attribute is added
 	 * to the end of the list.
@@ -152,6 +178,13 @@
 	UMLOperationList getOpList(bool includeInherited = false);
 
 	/**
+	 * Creates a template for the concept.
+	 *
+	 * @return	The UMLTemplate created
+	 */
+	UMLObject* createTemplate(QString name = QString::null);
+
+	/**
 	 * Adds a template to the class if it is not there yet.
 	 *
 	 * @param name		The name of the template.
@@ -258,7 +291,17 @@
 	 *
 	 * @return	The object found.  Will return 0 if none found.
 	 */
-	virtual UMLObject* findChildObject(Uml::IDType id);
+	virtual UMLObject* findChildObject(Uml::IDType id, bool considerAncestors = false);
+
+	/**
+	 * Find an operation of the given name and parameter signature.
+	 *
+	 * @param name		The name of the operation to find.
+	 * @param params	The parameter descriptors of the operation to find.
+	 *
+	 * @return	The operation found.  Will return 0 if none found.
+	 */
+	UMLOperation* findOperation(QString name, Umbrello::NameAndType_List params);
 
 	/**
 	 * Returns a list of concepts which this concept inherits from.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/classifierlistitem.cpp kdesdk/umbrello/umbrello/classifierlistitem.cpp
--- kdesdk.orig/umbrello/umbrello/classifierlistitem.cpp	2005-02-09 20:06:47.000000000 +0100
+++ kdesdk/umbrello/umbrello/classifierlistitem.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -54,9 +54,12 @@
 }
 
 QString UMLClassifierListItem::getTypeName() {
-	if (m_pSecondary != NULL)
-		return m_pSecondary->getName();
-	return m_SecondaryId;
+	if (m_pSecondary == NULL)
+		return m_SecondaryId;
+	const UMLPackage *typePkg = m_pSecondary->getUMLPackage();
+	if (typePkg != NULL && typePkg != m_pUMLPackage)
+		return m_pSecondary->getFullyQualifiedName();
+	return m_pSecondary->getName();
 }
 
 void UMLClassifierListItem::setType(UMLObject *type) {
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/classifierwidget.cpp kdesdk/umbrello/umbrello/classifierwidget.cpp
--- kdesdk.orig/umbrello/umbrello/classifierwidget.cpp	2005-01-27 20:25:39.000000000 +0100
+++ kdesdk/umbrello/umbrello/classifierwidget.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -325,7 +325,7 @@
 		// set width to name to start with
 		QString displayName = getName();
 		if (m_bShowPackage)
-			displayName.prepend( m_pObject->getPackage() + "::" );
+			displayName.prepend( m_pObject->getPackage() + "." );
 
 		UMLClassifier *uc = static_cast<UMLClassifier*>(m_pObject);
 		const UMLWidget::FontType f(uc->getAbstract() ? FT_BOLD_ITALIC : FT_BOLD);
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/codegenerators/idlwriter.cpp kdesdk/umbrello/umbrello/codegenerators/idlwriter.cpp
--- kdesdk.orig/umbrello/umbrello/codegenerators/idlwriter.cpp	2004-12-29 21:55:54.000000000 +0100
+++ kdesdk/umbrello/umbrello/codegenerators/idlwriter.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -57,19 +57,6 @@
 		at == Uml::at_Composition || at == Uml::at_UniAssociation);
 }
 
-QString IDLWriter::qualifiedName(UMLClassifier *c) {
-	UMLPackage *umlPkg = c->getUMLPackage();
-	QString className = cleanName(c->getName());
-	QString retval;
-
-	if (umlPkg) {
-		retval = umlPkg->getFullyQualifiedName();
-		retval.append("::");
-	}
-	retval.append(className);
-	return retval;
-}
-
 /**
  * returns "IDL"
  */
@@ -309,7 +296,7 @@
 		UMLClassifier *parent = superclasses.first();
 		int n_parents = superclasses.count();
 		while (n_parents--) {
-			idl << qualifiedName(parent);
+			idl << parent->getFullyQualifiedName("::");
 			if (n_parents)
 				idl << ", ";
 			parent = superclasses.next();
@@ -334,8 +321,8 @@
 		}
 		UMLClassifier* other = (UMLClassifier*)m_doc->findObjectById(a->getRoleId(Uml::A));
 		QString bareName = cleanName(other->getName());
-		idl << getIndent() << "typedef sequence<" << qualifiedName(other) << "> "
-		    << bareName << "Vector;" << m_endl << m_endl;
+		idl << getIndent() << "typedef sequence<" << other->getFullyQualifiedName("::")
+		    << "> " << bareName << "Vector;" << m_endl << m_endl;
 	}
 
 	// Generate public attributes.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/codegenerators/idlwriter.h kdesdk/umbrello/umbrello/codegenerators/idlwriter.h
--- kdesdk.orig/umbrello/umbrello/codegenerators/idlwriter.h	2004-12-28 23:11:24.000000000 +0100
+++ kdesdk/umbrello/umbrello/codegenerators/idlwriter.h	2005-03-05 10:08:23.000000000 +0100
@@ -77,8 +77,6 @@
 
 	static bool assocTypeIsMappableToAttribute(Uml::Association_Type at);
 
-	QString qualifiedName(UMLClassifier* c);
-
 };
 
 #endif // IDLWRITER_H
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/datatypewidget.cpp kdesdk/umbrello/umbrello/datatypewidget.cpp
--- kdesdk.orig/umbrello/umbrello/datatypewidget.cpp	2004-11-09 17:30:55.000000000 +0100
+++ kdesdk/umbrello/umbrello/datatypewidget.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -92,7 +92,7 @@
 	//now set the width of the concept
 	//set width to name to start with
 	//set width to name to start with
-	width = getFontMetrics(FT_BOLD_ITALIC).boundingRect(m_pObject->getPackage() + "::" + getName()).width();
+	width = getFontMetrics(FT_BOLD_ITALIC).boundingRect(m_pObject->getPackage() + "." + getName()).width();
 	int w = getFontMetrics(FT_BOLD).boundingRect(m_pObject->getStereotype()).width();
 
 	width = w > width?w:width;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/classoptionspage.cpp kdesdk/umbrello/umbrello/dialogs/classoptionspage.cpp
--- kdesdk.orig/umbrello/umbrello/dialogs/classoptionspage.cpp	2004-11-02 21:10:12.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/classoptionspage.cpp	2005-03-11 23:17:24.000000000 +0100
@@ -1,5 +1,5 @@
  /*
-  *  copyright (C) 2002-2004
+  *  copyright (C) 2002-2005
   *  Umbrello UML Modeller Authors <uml-devel@ uml.sf.net>
   */
 
@@ -21,34 +21,35 @@
 #include "../interfacewidget.h"
 #include "classoptionspage.h"
 
-ClassOptionsPage::ClassOptionsPage(QWidget* pParent, UMLWidget* pWidget, Uml::Widget_Type type)
+ClassOptionsPage::ClassOptionsPage(QWidget* pParent, ClassifierWidget* pWidget)
   : QWidget( pParent ) {
-	if (type == Uml::wt_Class) {
-		m_pClassWidget = static_cast<ClassWidget*>(pWidget);
-		m_pInterfaceWidget = 0;
-		setupClassPage();
-	} else if (type == Uml::wt_Interface) {
-		m_pInterfaceWidget = static_cast<InterfaceWidget*>(pWidget);
-		m_pClassWidget = 0;
-		setupInterfacePage();
-	}
-	m_options = 0;
-
+	init();
+	Uml::Widget_Type type = pWidget->getBaseType();
+	m_pWidget = pWidget;
+	setupPage();
 }
 
 ClassOptionsPage::ClassOptionsPage(QWidget* pParent, Settings::OptionState *options) : QWidget( pParent )
 {
+	init();
 	m_options = options;
-	m_pClassWidget = 0;
-	m_pInterfaceWidget = 0;
 	setupClassPageOption();
 }
 
+void ClassOptionsPage::init() {
+	m_options = NULL;
+	m_pWidget = NULL;
+	m_pShowStereotypeCB = NULL;
+	m_pShowAttsCB = NULL;
+	m_pShowAttSigCB = NULL;
+	m_pDrawAsCircleCB = NULL;
+}
+
 ClassOptionsPage::~ClassOptionsPage() {}
 
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 
-void ClassOptionsPage::setupClassPage() {
+void ClassOptionsPage::setupPage() {
 	int margin = fontMetrics().height();
 
 	bool sig = false;
@@ -61,12 +62,17 @@
 	QGridLayout * visibilityLayout = new QGridLayout(m_pVisibilityGB);
 	visibilityLayout -> setSpacing(10);
 	visibilityLayout -> setMargin(margin);
+	visibilityLayout -> setRowStretch(3, 1);
 
 	m_pShowOpsCB = new QCheckBox(i18n("Operatio&ns"), m_pVisibilityGB);
-	m_pShowOpsCB -> setChecked(m_pClassWidget -> getShowOps());
+	m_pShowOpsCB -> setChecked(m_pWidget -> getShowOps());
 	visibilityLayout -> addWidget(m_pShowOpsCB, 0, 0);
 
-	sigtype = m_pClassWidget -> getShowOpSigs();
+	m_pShowScopeCB = new QCheckBox(i18n("&Visibility"), m_pVisibilityGB);
+	m_pShowScopeCB -> setChecked(m_pWidget -> getShowScope());
+	visibilityLayout -> addWidget(m_pShowScopeCB, 0, 1);
+
+	sigtype = m_pWidget -> getShowOpSigs();
 	if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
 		sig = false;
 	else
@@ -74,42 +80,46 @@
 	m_pShowOpSigCB = new QCheckBox(i18n("O&peration signature"), m_pVisibilityGB);
 	m_pShowOpSigCB -> setChecked(sig);
 	visibilityLayout -> addWidget(m_pShowOpSigCB, 1, 0);
-	visibilityLayout -> setRowStretch(3, 1);
 
-	m_pShowAttsCB = new QCheckBox(i18n("Att&ributes"), m_pVisibilityGB);
-	m_pShowAttsCB -> setChecked(m_pClassWidget -> getShowAtts());
-	visibilityLayout -> addWidget(m_pShowAttsCB, 2, 0);
+	m_pShowPackageCB = new QCheckBox(i18n("Pac&kage"), m_pVisibilityGB);
+	m_pShowPackageCB -> setChecked(m_pWidget -> getShowPackage());
+	visibilityLayout -> addWidget(m_pShowPackageCB, 1, 1);
 
-	m_pShowAttSigCB = new QCheckBox(i18n("Attr&ibute signature"), m_pVisibilityGB);
-	sigtype = m_pClassWidget -> getShowAttSigs();
-	if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
-		sig = false;
-	else
-		sig = true;
-	m_pShowAttSigCB -> setChecked(sig);
-	visibilityLayout -> addWidget(m_pShowAttSigCB, 3, 0);
+	Uml::Widget_Type type = m_pWidget->getBaseType();
 
-	m_pShowScopeCB = new QCheckBox(i18n("&Visibility"), m_pVisibilityGB);
-	m_pShowScopeCB -> setChecked(m_pClassWidget -> getShowScope());
-	visibilityLayout -> addWidget(m_pShowScopeCB, 0, 1);
+	if (type == Uml::wt_Class) {
+		ClassWidget *pClassWidget = static_cast<ClassWidget*>(m_pWidget);
 
-	m_pShowPackageCB = new QCheckBox(i18n("Pac&kage"), m_pVisibilityGB);
-	m_pShowPackageCB -> setChecked(m_pClassWidget -> getShowPackage());
-	visibilityLayout -> addWidget(m_pShowPackageCB, 1, 1);
+		m_pShowAttsCB = new QCheckBox(i18n("Att&ributes"), m_pVisibilityGB);
+		m_pShowAttsCB->setChecked(pClassWidget->getShowAtts());
+		visibilityLayout->addWidget(m_pShowAttsCB, 2, 0);
+
+		m_pShowStereotypeCB = new QCheckBox(i18n("Stereot&ype"), m_pVisibilityGB);
+		m_pShowStereotypeCB->setChecked(pClassWidget->getShowStereotype());
+		visibilityLayout->addWidget(m_pShowStereotypeCB, 2, 1);
+
+		m_pShowAttSigCB = new QCheckBox(i18n("Attr&ibute signature"), m_pVisibilityGB);
+		sigtype = pClassWidget->getShowAttSigs();
+		if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
+			sig = false;
+		else
+			sig = true;
+		m_pShowAttSigCB->setChecked(sig);
+		visibilityLayout->addWidget(m_pShowAttSigCB, 3, 0);
 
-	m_pShowStereotypeCB = new QCheckBox(i18n("Stereot&ype"), m_pVisibilityGB);
-	m_pShowStereotypeCB -> setChecked(m_pClassWidget -> getShowStereotype());
-	visibilityLayout -> addWidget(m_pShowStereotypeCB, 2, 1);
+	} else if (type == Uml::wt_Interface) {
+		InterfaceWidget *pInterfaceWidget = static_cast<InterfaceWidget*>(m_pWidget);
 
+		m_pDrawAsCircleCB = new QCheckBox(i18n("Draw as circle"), m_pVisibilityGB);
+		m_pDrawAsCircleCB->setChecked( pInterfaceWidget->getDrawAsCircle() );
+		visibilityLayout->addWidget(m_pDrawAsCircleCB, 2, 0);
+	}
 }
 
 void ClassOptionsPage::setupClassPageOption() {
 
 	int margin = fontMetrics().height();
 
-// 	bool sig = false;
-// 	Uml::Signature_Type sigtype;
-
 	QVBoxLayout * topLayout = new QVBoxLayout(this);
 	topLayout -> setSpacing(6);
 	m_pVisibilityGB = new QGroupBox(i18n("Show"), this);
@@ -121,35 +131,7 @@
 	m_pShowOpsCB = new QCheckBox(i18n("Operatio&ns"), m_pVisibilityGB);
 	m_pShowOpsCB -> setChecked( m_options->classState.showOps );
 	visibilityLayout -> addWidget(m_pShowOpsCB, 0, 0);
-/*###
-	if (m_) {
-		if (m_ShowOpSigs == Uml::st_NoSigNoScope)
-			m_ShowOpSigs = Uml::st_NoSig;
-		else if (m_ShowOpSigs == Uml::st_SigNoScope)
-			m_ShowOpSigs = Uml::st_ShowSig;
-
-		if (m_ShowAttSigs == Uml::st_NoSigNoScope)
-			m_ShowAttSigs = Uml::st_NoSig;
-		else if (m_ShowAttSigs == Uml::st_SigNoScope)
-			m_ShowAttSigs = Uml::st_ShowSig;
-	} else {
-		if (m_ShowOpSigs == Uml::st_ShowSig)
-			m_ShowOpSigs = Uml::st_SigNoScope;
-		else if (m_ShowOpSigs == Uml::st_NoSig)
-			m_ShowOpSigs = Uml::st_NoSigNoScope;
-
-		if (m_ShowAttSigs == Uml::st_ShowSig)
-			m_ShowAttSigs = Uml::st_SigNoScope;
-		else if(m_ShowAttSigs == Uml::st_NoSig)
-			m_ShowAttSigs = Uml::st_NoSigNoScope;
-	}
 
-###
-	sigtype = m_options->classState.showOpSig;*/
-/*	if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
-		sig = false;
-	else
-		sig = true;*/
 	m_pShowOpSigCB = new QCheckBox(i18n("O&peration signature"), m_pVisibilityGB);
 	m_pShowOpSigCB -> setChecked(m_options->classState.showOpSig);
 	visibilityLayout -> addWidget(m_pShowOpSigCB, 1, 0);
@@ -160,11 +142,6 @@
 	visibilityLayout -> addWidget(m_pShowAttsCB, 2, 0);
 
 	m_pShowAttSigCB = new QCheckBox(i18n("Attr&ibute signature"), m_pVisibilityGB);
-/*	sigtype = m_options->classState.showAttSig;
-	if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
-		sig = false;
-	else
-		sig = true;*/
 	m_pShowAttSigCB -> setChecked(m_options->classState.showAttSig);
 	visibilityLayout -> addWidget(m_pShowAttSigCB, 3, 0);
 
@@ -182,85 +159,43 @@
 
 }
 
-void ClassOptionsPage::setupInterfacePage() {
-	int margin = fontMetrics().height();
-
-	bool sig = false;
-	Uml::Signature_Type sigtype;
-
-	QVBoxLayout * topLayout = new QVBoxLayout(this);
-	topLayout -> setSpacing(6);
-	m_pVisibilityGB = new QGroupBox(i18n("Show"), this);
-	topLayout -> addWidget(m_pVisibilityGB);
-	QGridLayout * visibilityLayout = new QGridLayout(m_pVisibilityGB);
-	visibilityLayout -> setSpacing(10);
-	visibilityLayout -> setMargin(margin);
-
-	m_pShowOpsCB = new QCheckBox(i18n("Operatio&ns"), m_pVisibilityGB);
-	m_pShowOpsCB -> setChecked(m_pInterfaceWidget -> getShowOps());
-	visibilityLayout -> addWidget(m_pShowOpsCB, 0, 0);
-
-	sigtype = m_pInterfaceWidget -> getShowOpSigs();
-	if(sigtype == Uml::st_NoSig || sigtype == Uml::st_NoSigNoScope)
-		sig = false;
-	else
-		sig = true;
-	m_pShowOpSigCB = new QCheckBox(i18n("O&peration signature"), m_pVisibilityGB);
-	m_pShowOpSigCB -> setChecked(sig);
-	visibilityLayout -> addWidget(m_pShowOpSigCB, 1, 0);
-	visibilityLayout -> setRowStretch(3, 1);
-
-	m_pShowScopeCB = new QCheckBox(i18n("&Visibility"), m_pVisibilityGB);
-	m_pShowScopeCB -> setChecked(m_pInterfaceWidget -> getShowScope());
-	visibilityLayout -> addWidget(m_pShowScopeCB, 0, 1);
-
-	m_pShowPackageCB = new QCheckBox(i18n("Pac&kage"), m_pVisibilityGB);
-	m_pShowPackageCB -> setChecked(m_pInterfaceWidget -> getShowPackage());
-	visibilityLayout -> addWidget(m_pShowPackageCB, 1, 1);
-
-	m_pDrawAsCircleCB = new QCheckBox(i18n("Draw as circle"), m_pVisibilityGB);
-	m_pDrawAsCircleCB->setChecked( m_pInterfaceWidget->getDrawAsCircle() );
-	visibilityLayout->addWidget(m_pDrawAsCircleCB, 2, 0);
-
-}
-
-////////////////////////////////////////////////////////////////////////////////////////////////////
 void ClassOptionsPage::updateUMLWidget() {
-	if (m_pClassWidget) {
-		updateClassWidget();
-	} else if (m_pInterfaceWidget) {
-		updateInterfaceWidget();
+	if (m_pWidget) {
+		updateWidget();
 	} else if (m_options) {
 		updateOptionState();
 	}
 }
 
-void ClassOptionsPage::updateClassWidget() {
-	m_pClassWidget->setShowScope( m_pShowScopeCB->isChecked() );
-	m_pClassWidget->setShowAtts( m_pShowAttsCB->isChecked() );
-	m_pClassWidget->setShowOps( m_pShowOpsCB->isChecked() );
-	m_pClassWidget->setShowStereotype( m_pShowStereotypeCB->isChecked() );
-	m_pClassWidget->setShowPackage( m_pShowPackageCB->isChecked() );
-	m_pClassWidget->setShowAttSigs( m_pShowAttSigCB->isChecked() );
-	m_pClassWidget->setShowOpSigs( m_pShowOpSigCB->isChecked() );
-}
-
-void ClassOptionsPage::updateInterfaceWidget() {
-	m_pInterfaceWidget->setShowScope( m_pShowScopeCB->isChecked() );
-	m_pInterfaceWidget->setShowOps( m_pShowOpsCB->isChecked() );
-	m_pInterfaceWidget->setShowPackage( m_pShowPackageCB->isChecked() );
-	m_pInterfaceWidget->setShowOpSigs( m_pShowOpSigCB->isChecked() );
-	m_pInterfaceWidget->setDrawAsCircle( m_pDrawAsCircleCB->isChecked() );
+void ClassOptionsPage::updateWidget() {
+	m_pWidget->setShowPackage( m_pShowPackageCB->isChecked() );
+	m_pWidget->setShowScope( m_pShowScopeCB->isChecked() );
+	m_pWidget->setShowOps( m_pShowOpsCB->isChecked() );
+	m_pWidget->setShowOpSigs( m_pShowOpSigCB->isChecked() );
+	Uml::Widget_Type type = m_pWidget->getBaseType();
+	if (type == Uml::wt_Class) {
+		ClassWidget *pClassWidget = static_cast<ClassWidget*>(m_pWidget);
+		pClassWidget->setShowStereotype( m_pShowStereotypeCB->isChecked() );
+		pClassWidget->setShowAtts( m_pShowAttsCB->isChecked() );
+		pClassWidget->setShowAttSigs( m_pShowAttSigCB->isChecked() );
+	} else if (type == Uml::wt_Interface) {
+		InterfaceWidget *pInterfaceWidget = static_cast<InterfaceWidget*>(m_pWidget);
+		if (m_pDrawAsCircleCB)
+			pInterfaceWidget->setDrawAsCircle( m_pDrawAsCircleCB->isChecked() );
+	}
 }
 
 void ClassOptionsPage::updateOptionState() {
-	m_options->classState.showScope =    m_pShowScopeCB->isChecked();
-	m_options->classState.showAtts  =    m_pShowAttsCB->isChecked();
-	m_options->classState.showOps   =    m_pShowOpsCB->isChecked();
-	m_options->classState.showStereoType = m_pShowStereotypeCB->isChecked();
-	m_options->classState.showPackage    = m_pShowPackageCB->isChecked();
-	m_options->classState.showAttSig     = m_pShowAttSigCB->isChecked();
-	m_options->classState.showOpSig      = m_pShowOpSigCB->isChecked();
+	m_options->classState.showScope = m_pShowScopeCB->isChecked();
+	if (m_pShowAttsCB)
+		m_options->classState.showAtts = m_pShowAttsCB->isChecked();
+	m_options->classState.showOps = m_pShowOpsCB->isChecked();
+	if (m_pShowStereotypeCB)
+		m_options->classState.showStereoType = m_pShowStereotypeCB->isChecked();
+	m_options->classState.showPackage = m_pShowPackageCB->isChecked();
+	if (m_pShowAttSigCB)
+		m_options->classState.showAttSig = m_pShowAttSigCB->isChecked();
+	m_options->classState.showOpSig = m_pShowOpSigCB->isChecked();
 }
 
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/classoptionspage.h kdesdk/umbrello/umbrello/dialogs/classoptionspage.h
--- kdesdk.orig/umbrello/umbrello/dialogs/classoptionspage.h	2004-11-02 21:10:12.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/classoptionspage.h	2005-03-11 23:17:24.000000000 +0100
@@ -20,79 +20,72 @@
 #include <qgroupbox.h>
 #include <qcheckbox.h>
 
-#include "../classwidget.h"
 #include "../optionstate.h"
 
-class ClassWidget;
-class InterfaceWidget;
+class ClassifierWidget;
 
 /**
- *	A dialog page to display options for a @ref UMLWidget and it's
- *	children.  This is not normally called by you.  It is used by
- *	the @ref ClassPropDlg.
+ * A dialog page to display options for a @ref UMLWidget and its
+ * children.  This is not normally called by you.  It is used by
+ * the @ref ClassPropDlg.
  *
- *	@short	A dialog page to display the options for a UMLWidget.
- *	@author Paul Hensgen <phensgen@techie.com>
- *	@see	ClassPropDlg
+ * @short A dialog page to display the options for a UMLWidget.
+ * @author Paul Hensgen <phensgen@techie.com>
+ * @see	ClassPropDlg
  * Bugs and comments to uml-devel@lists.sf.net or http://bugs.kde.org
  */
 class ClassOptionsPage : public QWidget {
 public:
 	/**
-	*	Constructor - observe and modify a Widget
-	*/
-	ClassOptionsPage(QWidget* pParent, UMLWidget* pWidget, Uml::Widget_Type type);
+	 * Constructor - observe and modify a Widget
+	 */
+	ClassOptionsPage(QWidget* pParent, ClassifierWidget* pWidget);
 	
 	/**
-	*	Constructor - observe and modify an OptionState structure
-	*/
+	 * Constructor - observe and modify an OptionState structure
+	 */
 	ClassOptionsPage(QWidget* pParent, Settings::OptionState *options );
 
 	/**
-	*	destructor
-	*/
+	 * destructor
+	 */
 	virtual ~ClassOptionsPage();
 
 	/**
-	*	Updates the widget with the dialog page properties.
-	*/
+	 * Updates the widget with the dialog page properties.
+	 */
 	void updateUMLWidget();
 
 	/**
-	*	Sets the widget to be used.  Only used by @ref UMLView to set
-	*	settings of a widget.
-	*/
-	void setWidget( ClassWidget * pWidget ) {
-		m_pClassWidget = pWidget;
+	 * Sets the widget to be used.  Only used by @ref UMLView to set
+	 * settings of a widget.
+	 */
+	void setWidget( ClassifierWidget * pWidget ) {
+		m_pWidget = pWidget;
 	}
-protected:
 
+protected:
 	/**
-	 * Creates the page with the correct options for a class/concept
+	 * Initialize optional items
 	 */
-	void setupClassPage();
+	void init();
 
 	/**
-	 * Creates the page with the correct options for an interface
+	 * Creates the page with the correct options for the class/interface
 	 */
-	void setupInterfacePage();
-	
+	void setupPage();
+
 	/**
-	 * Creates the page base on de OptionState
+	 * Creates the page based on the OptionState
 	 */
 	void setupClassPageOption();
 
 	/**
-	 * Sets the class's properties to those selected in this dialogue page.
+	 * Sets the ClassifierWidget's properties to those selected in this dialogue page.
 	 */
-	void updateClassWidget();
+	void updateWidget();
 
 	/**
-	 * Sets the interface's properties to those selected in this dialogue page.
-	 */
-	void updateInterfaceWidget();
-	
-	/**
 	 * Sets the OptionState to the values selected in this dialogue page.
 	 */
 	void updateOptionState();
@@ -105,16 +98,12 @@
 	QCheckBox* m_pDrawAsCircleCB;
 
 	/**
-	*	The class widget to represent in the dialog page.
-	*/
-	ClassWidget* m_pClassWidget;
-	/**
-	*	The interface widget to represent in the dialog page.
-	*/
-	InterfaceWidget* m_pInterfaceWidget;
+	 * The classifier widget to represent in the dialog page.
+	 */
+	ClassifierWidget* m_pWidget;
 	/**
-	*	The OptionState structure to represent in the dialog page.
-	*/
+	 * The OptionState structure to represent in the dialog page.
+	 */
 	Settings::OptionState *m_options;
 };
 #endif
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/classpropdlg.cpp kdesdk/umbrello/umbrello/dialogs/classpropdlg.cpp
--- kdesdk.orig/umbrello/umbrello/dialogs/classpropdlg.cpp	2005-01-28 07:26:46.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/classpropdlg.cpp	2005-03-11 23:17:24.000000000 +0100
@@ -25,6 +25,7 @@
 #include "umlwidgetcolorpage.h"
 #include "../umlobject.h"
 #include "../umldoc.h"
+#include "../classifierwidget.h"
 #include "../objectwidget.h"
 #include "../componentwidget.h"
 #include "../uml.h"
@@ -96,8 +97,7 @@
 
 	if (w->getBaseType() == Uml::wt_Class
 		|| w->getBaseType() == Uml::wt_Interface
-		|| w->getBaseType() == Uml::wt_Package
-	) {
+		|| w->getBaseType() == Uml::wt_Package) {
 		setupPages(m_pObject, true);
 	} else if (w->getBaseType() == Uml::wt_Component) {
 		if ( w->getIsInstance() ) {
@@ -115,7 +115,8 @@
 	if (w->getBaseType() == Uml::wt_Class || w->getBaseType() == Uml::wt_Interface) {
 		QFrame* newPage = addPage( i18n("Display"), i18n("Display Options"), DesktopIcon("info") );
 		QHBoxLayout* m_pOptionsLayout = new QHBoxLayout(newPage);
-		m_pOptionsPage = new ClassOptionsPage( newPage, w, w->getBaseType() );
+		ClassifierWidget *cw = static_cast<ClassifierWidget*>(w);
+		m_pOptionsPage = new ClassOptionsPage( newPage, cw );
 		m_pOptionsLayout -> addWidget(m_pOptionsPage);
 	}
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/parmpropdlg.cpp kdesdk/umbrello/umbrello/dialogs/parmpropdlg.cpp
--- kdesdk.orig/umbrello/umbrello/dialogs/parmpropdlg.cpp	2004-12-30 13:46:46.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/parmpropdlg.cpp	2005-03-05 10:08:24.000000000 +0100
@@ -138,7 +138,7 @@
 	UMLClassifierList namesList( m_pUmldoc->getConcepts() );
 	UMLClassifier * obj;
 	for(obj=namesList.first(); obj!=0 ;obj=namesList.next()) {
-		m_pTypeCB->insertItem( obj->getName() );
+		m_pTypeCB->insertItem( obj->getFullyQualifiedName() );
 	}
 
 	//work out which one to select
@@ -199,7 +199,7 @@
 		UMLClassifierList namesList( m_pUmldoc->getConcepts() );
 		UMLClassifier * obj;
 		for (obj = namesList.first(); obj; obj = namesList.next()) {
-			if (obj->getName() == typeName) {
+			if (obj->getFullyQualifiedName() == typeName) {
 				m_pAtt->setType( obj );
 				break;
 			}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/umlattributedialog.cpp kdesdk/umbrello/umbrello/dialogs/umlattributedialog.cpp
--- kdesdk.orig/umbrello/umbrello/dialogs/umlattributedialog.cpp	2005-02-28 00:07:46.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/umlattributedialog.cpp	2005-03-05 10:08:24.000000000 +0100
@@ -113,7 +113,7 @@
 	UMLClassifierList namesList( pDoc->getConcepts() );
 	UMLClassifier* obj;
 	for (obj=namesList.first(); obj!=0; obj=namesList.next()) {
-		insertType( obj->getFullyQualifiedName(".") );
+		insertType( obj->getFullyQualifiedName() );
 	}
 
 	//work out which one to select
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/dialogs/umloperationdialog.cpp kdesdk/umbrello/umbrello/dialogs/umloperationdialog.cpp
--- kdesdk.orig/umbrello/umbrello/dialogs/umloperationdialog.cpp	2004-12-29 21:49:21.000000000 +0100
+++ kdesdk/umbrello/umbrello/dialogs/umloperationdialog.cpp	2005-03-05 10:08:24.000000000 +0100
@@ -161,7 +161,7 @@
 	UMLClassifierList namesList( m_doc->getConcepts() );
 	UMLClassifier* pConcept = 0;
 	for(pConcept=namesList.first(); pConcept!=0 ;pConcept=namesList.next()) {
-		insertType( pConcept->getName() );
+		insertType( pConcept->getFullyQualifiedName() );
 	}
 
 	//work out which one to select
@@ -352,7 +352,7 @@
 				UMLClassifierList namesList( m_doc->getConcepts() );
 				UMLClassifier* obj = NULL;
 				for (obj=namesList.first(); obj!=0; obj=namesList.next()) {
-					if (typeName == obj->getName()) {
+					if (typeName == obj->getFullyQualifiedName()) {
 						pOldAtt->setType( obj );
 						break;
 					}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/entity.cpp kdesdk/umbrello/umbrello/entity.cpp
--- kdesdk.orig/umbrello/umbrello/entity.cpp	2004-12-17 09:42:28.000000000 +0100
+++ kdesdk/umbrello/umbrello/entity.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -12,21 +12,27 @@
  *                                                                         *
  ***************************************************************************/
 
+// own header
 #include "entity.h"
-#include "entityattribute.h"
-#include "stereotype.h"
-#include "clipboard/idchangelog.h"
+// qt/kde includes
 #include <kdebug.h>
 #include <klocale.h>
+#include <kmessagebox.h>
+// app includes
+#include "entityattribute.h"
+#include "umldoc.h"
+#include "uml.h"
+#include "clipboard/idchangelog.h"
+#include "dialogs/umlentityattributedialog.h"
 
 UMLEntity::UMLEntity(const QString& name, Uml::IDType id) : UMLClassifier(name, id) {
 	init();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 UMLEntity::~UMLEntity() {
 	m_List.clear();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEntity::operator==( UMLEntity& rhs ) {
 	return UMLClassifier::operator==(rhs);
 }
@@ -44,48 +50,52 @@
 	return clone;
 }
 
+void UMLEntity::init() {
+	m_BaseType = Uml::ot_Entity;
+}
 
-void UMLEntity::saveToXMI(QDomDocument& qDoc, QDomElement& qElement) {
-	QDomElement entityElement = UMLObject::save("UML:Entity", qDoc);
-	//save operations
-	UMLClassifierListItem* pEntityAttribute = 0;
-	for ( pEntityAttribute = m_List.first(); pEntityAttribute != 0;
-	      pEntityAttribute = m_List.next() ) {
-		pEntityAttribute->saveToXMI(qDoc, entityElement);
+UMLObject* UMLEntity::createEntityAttribute(const QString &name /*=null*/) {
+	UMLDoc *umldoc = UMLApp::app()->getDocument();
+	Uml::IDType id = umldoc->getUniqueID();
+	QString currentName;
+	if (name.isNull())  {
+		currentName = uniqChildName(Uml::ot_EntityAttribute);
+	} else {
+		currentName = name;
 	}
-	qElement.appendChild(entityElement);
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
-bool UMLEntity::load(QDomElement& element) {
-	QDomNode node = element.firstChild();
-	while( !node.isNull() ) {
-		if (node.isComment()) {
-			node = node.nextSibling();
-			continue;
-		}
-		QDomElement tempElement = node.toElement();
-		QString tag = tempElement.tagName();
-		if (Uml::tagEq(tag, "EntityAttribute")) {   // for backward compatibility
-			UMLEntityAttribute* pEntityAttribute = new UMLEntityAttribute(this);
-			if( !pEntityAttribute->loadFromXMI(tempElement) ) {
-				return false;
-			}
-			m_List.append(pEntityAttribute);
-		} else if (tag == "stereotype") {
-			kdDebug() << "UMLEntity::load(" << m_Name
-				  << "): losing old-format stereotype." << endl;
+	const Settings::OptionState optionState = UMLApp::app()->getOptionState();
+	Uml::Scope scope = optionState.classState.defaultAttributeScope;
+	UMLEntityAttribute* newAttribute = new UMLEntityAttribute(this, currentName, id, scope);
+
+	int button = QDialog::Accepted;
+	bool goodName = false;
+
+	//check for name.isNull() stops dialogue being shown
+	//when creating attribute via list view
+	while (button==QDialog::Accepted && !goodName && name.isNull()) {
+		UMLEntityAttributeDialog attributeDialogue(0, newAttribute);
+		button = attributeDialogue.exec();
+		QString name = newAttribute->getName();
+
+		if(name.length() == 0) {
+			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
+		} else if ( findChildObject(Uml::ot_EntityAttribute, name).count() > 0 ) {
+			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
 		} else {
-			kdWarning() << "unknown child type in UMLEntity::load" << endl;
+			goodName = true;
 		}
-		node = node.nextSibling();
-	}//end while
-	return true;
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
-void UMLEntity::init() {
-	m_BaseType = Uml::ot_Entity;
+	}
+
+	if (button != QDialog::Accepted) {
+		return NULL;
+	}
+
+	addEntityAttribute(newAttribute);
+
+	umldoc->signalUMLObjectCreated(newAttribute);
+	return newAttribute;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 UMLObject* UMLEntity::addEntityAttribute(const QString& name, Uml::IDType id) {
 	UMLEntityAttribute* literal = new UMLEntityAttribute(this, name, id);
 	m_List.append(literal);
@@ -94,7 +104,7 @@
 	emit entityAttributeAdded(literal);
 	return literal;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEntity::addEntityAttribute(UMLEntityAttribute* attribute, IDChangeLog* Log /* = 0*/) {
 	QString name = (QString)attribute->getName();
 	if (findChildObject(Uml::ot_EntityAttribute, name).count() == 0) {
@@ -111,7 +121,7 @@
 	}
 	return false;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEntity::addEntityAttribute(UMLEntityAttribute* attribute, int position) {
 	QString name = (QString)attribute->getName();
 	if (findChildObject( Uml::ot_EntityAttribute, name).count() == 0) {
@@ -129,7 +139,7 @@
 	}
 	return false;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 int UMLEntity::removeEntityAttribute(UMLObject* literal) {
 	if (!m_List.remove((UMLEntityAttribute*)literal)) {
 		kdDebug() << "can't find att given in list" << endl;
@@ -143,7 +153,7 @@
 	delete literal;
 	return m_List.count();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 UMLEntityAttribute* UMLEntity::takeEntityAttribute(UMLEntityAttribute* el) {
 	int index = m_List.findRef( el );
 	el = (index == -1 ? 0 : dynamic_cast<UMLEntityAttribute*>(m_List.take( )));
@@ -172,10 +182,48 @@
 
 	return list;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 int UMLEntity::entityAttributes() {
 	return m_List.count();
 }
 
 
+void UMLEntity::saveToXMI(QDomDocument& qDoc, QDomElement& qElement) {
+	QDomElement entityElement = UMLObject::save("UML:Entity", qDoc);
+	//save operations
+	UMLClassifierListItem* pEntityAttribute = 0;
+	for ( pEntityAttribute = m_List.first(); pEntityAttribute != 0;
+	      pEntityAttribute = m_List.next() ) {
+		pEntityAttribute->saveToXMI(qDoc, entityElement);
+	}
+	qElement.appendChild(entityElement);
+}
+
+bool UMLEntity::load(QDomElement& element) {
+	QDomNode node = element.firstChild();
+	while( !node.isNull() ) {
+		if (node.isComment()) {
+			node = node.nextSibling();
+			continue;
+		}
+		QDomElement tempElement = node.toElement();
+		QString tag = tempElement.tagName();
+		if (Uml::tagEq(tag, "EntityAttribute")) {   // for backward compatibility
+			UMLEntityAttribute* pEntityAttribute = new UMLEntityAttribute(this);
+			if( !pEntityAttribute->loadFromXMI(tempElement) ) {
+				return false;
+			}
+			m_List.append(pEntityAttribute);
+		} else if (tag == "stereotype") {
+			kdDebug() << "UMLEntity::load(" << m_Name
+				  << "): losing old-format stereotype." << endl;
+		} else {
+			kdWarning() << "unknown child type in UMLEntity::load" << endl;
+		}
+		node = node.nextSibling();
+	}//end while
+	return true;
+}
+
+
 #include "entity.moc"
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/entity.h kdesdk/umbrello/umbrello/entity.h
--- kdesdk.orig/umbrello/umbrello/entity.h	2004-12-17 09:42:28.000000000 +0100
+++ kdesdk/umbrello/umbrello/entity.h	2005-03-26 00:09:07.000000000 +0100
@@ -66,12 +66,16 @@
 	 */
 	virtual UMLObject* clone() const;
 
+	virtual bool isInterface() { return false; }
+
 	/**
-	 * Creates the <UML:Entity> element including its entityliterals.
+	 * Creates an entity attribute for the parent concept.
+	 *
+	 * @param o	The parent concept
+	 * @param name  An optional name, used by when creating through UMLListView
+	 * @return	The UMLEntityAttribute created
 	 */
-	virtual void saveToXMI(QDomDocument& qDoc, QDomElement& qElement);
-
-	virtual bool isInterface() { return false; }
+	UMLObject* createEntityAttribute(const QString &name = QString::null);
 
  	/**
   	 * Adds an entityAttribute to the entity.
@@ -140,6 +144,11 @@
 	 */
 	 virtual UMLObjectList findChildObject(Uml::Object_Type t, const QString &n);
 
+	/**
+	 * Creates the <UML:Entity> element including its entityliterals.
+	 */
+	virtual void saveToXMI(QDomDocument& qDoc, QDomElement& qElement);
+
 signals:
 	void entityAttributeAdded(UMLObject*);
 	void entityAttributeRemoved(UMLObject*);
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/enum.cpp kdesdk/umbrello/umbrello/enum.cpp
--- kdesdk.orig/umbrello/umbrello/enum.cpp	2004-11-09 02:48:27.000000000 +0100
+++ kdesdk/umbrello/umbrello/enum.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -12,21 +12,26 @@
  *                                                                         *
  ***************************************************************************/
 
+// own header
 #include "enum.h"
-#include "enumliteral.h"
-#include "stereotype.h"
-#include "clipboard/idchangelog.h"
+// qt/kde includes
 #include <kdebug.h>
 #include <klocale.h>
+#include <kmessagebox.h>
+// app includes
+#include "enumliteral.h"
+#include "umldoc.h"
+#include "uml.h"
+#include "clipboard/idchangelog.h"
 
 UMLEnum::UMLEnum(const QString& name, Uml::IDType id) : UMLClassifier(name, id) {
 	init();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 UMLEnum::~UMLEnum() {
 	m_List.clear();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEnum::operator==( UMLEnum & rhs ) {
 	return UMLClassifier::operator==(rhs);
 }
@@ -44,50 +49,40 @@
 	return clone;
 }
 
-
-void UMLEnum::saveToXMI(QDomDocument& qDoc, QDomElement& qElement) {
-	QDomElement enumElement = UMLObject::save("UML:Enumeration", qDoc);
-	//save operations
-	UMLClassifierListItem* pEnumLiteral = 0;
-	for ( pEnumLiteral = m_List.first(); pEnumLiteral != 0;
-	      pEnumLiteral = m_List.next() ) {
-		pEnumLiteral->saveToXMI(qDoc, enumElement);
-	}
-	qElement.appendChild(enumElement);
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
-bool UMLEnum::load(QDomElement& element) {
-	QDomNode node = element.firstChild();
-	while( !node.isNull() ) {
-		if (node.isComment()) {
-			node = node.nextSibling();
-			continue;
-		}
-		QDomElement tempElement = node.toElement();
-		QString tag = tempElement.tagName();
-		if (Uml::tagEq(tag, "EnumerationLiteral") ||
-		    Uml::tagEq(tag, "EnumLiteral")) {   // for backward compatibility
-			UMLEnumLiteral* pEnumLiteral = new UMLEnumLiteral(this);
-			if( !pEnumLiteral->loadFromXMI(tempElement) ) {
-				return false;
-			}
-			m_List.append(pEnumLiteral);
-		} else if (tag == "stereotype") {
-			kdDebug() << "UMLEnum::load(" << m_Name
-				  << "): losing old-format stereotype." << endl;
-		} else {
-			kdWarning() << "unknown child type in UMLEnum::load" << endl;
-		}
-		node = node.nextSibling();
-	}//end while
-	return true;
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
 void UMLEnum::init() {
 	m_BaseType = Uml::ot_Enum;
 	setStereotype( i18n("enum") );
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
+UMLObject* UMLEnum::createEnumLiteral() {
+	QString currentName = uniqChildName(Uml::ot_EnumLiteral);
+	UMLEnumLiteral* newEnumLiteral = new UMLEnumLiteral(this, currentName);
+
+	bool ok = true;
+	bool goodName = false;
+
+	while (ok && !goodName) {
+		ok = newEnumLiteral->showPropertiesDialogue( UMLApp::app() );
+		QString name = newEnumLiteral->getName();
+
+		if(name.length() == 0) {
+			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
+		} else {
+			goodName = true;
+		}
+	}
+
+	if (!ok) {
+		return NULL;
+	}
+
+	addEnumLiteral(newEnumLiteral);
+
+	UMLDoc *umldoc = UMLApp::app()->getDocument();
+	umldoc->signalUMLObjectCreated(newEnumLiteral);
+	return newEnumLiteral;
+}
+
 UMLObject* UMLEnum::addEnumLiteral(const QString &name, Uml::IDType id) {
 	UMLEnumLiteral* literal = new UMLEnumLiteral(this, name, id);
 	m_List.append(literal);
@@ -96,7 +91,7 @@
 	emit enumLiteralAdded(literal);
 	return literal;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEnum::addEnumLiteral(UMLEnumLiteral* literal, IDChangeLog* Log /* = 0*/) {
 	QString name = (QString)literal->getName();
 	if (findChildObject(Uml::ot_EnumLiteral, name).count() == 0) {
@@ -113,7 +108,7 @@
 	}
 	return false;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLEnum::addEnumLiteral(UMLEnumLiteral* literal, int position) {
 	QString name = (QString)literal->getName();
 	if (findChildObject( Uml::ot_EnumLiteral, name).count() == 0) {
@@ -131,7 +126,7 @@
 	}
 	return false;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 int UMLEnum::removeEnumLiteral(UMLObject* literal) {
 	if (!m_List.remove((UMLEnumLiteral*)literal)) {
 		kdDebug() << "can't find att given in list" << endl;
@@ -145,7 +140,7 @@
 	delete literal;
 	return m_List.count();
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 UMLEnumLiteral* UMLEnum::takeEnumLiteral(UMLEnumLiteral* el) {
 	int index = m_List.findRef( el );
 	el = (index == -1 ? 0 : dynamic_cast<UMLEnumLiteral*>(m_List.take( )));
@@ -174,10 +169,49 @@
 
 	return list;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 int UMLEnum::enumLiterals() {
 	return m_List.count();
 }
 
 
+void UMLEnum::saveToXMI(QDomDocument& qDoc, QDomElement& qElement) {
+	QDomElement enumElement = UMLObject::save("UML:Enumeration", qDoc);
+	//save operations
+	UMLClassifierListItem* pEnumLiteral = 0;
+	for ( pEnumLiteral = m_List.first(); pEnumLiteral != 0;
+	      pEnumLiteral = m_List.next() ) {
+		pEnumLiteral->saveToXMI(qDoc, enumElement);
+	}
+	qElement.appendChild(enumElement);
+}
+
+bool UMLEnum::load(QDomElement& element) {
+	QDomNode node = element.firstChild();
+	while( !node.isNull() ) {
+		if (node.isComment()) {
+			node = node.nextSibling();
+			continue;
+		}
+		QDomElement tempElement = node.toElement();
+		QString tag = tempElement.tagName();
+		if (Uml::tagEq(tag, "EnumerationLiteral") ||
+		    Uml::tagEq(tag, "EnumLiteral")) {   // for backward compatibility
+			UMLEnumLiteral* pEnumLiteral = new UMLEnumLiteral(this);
+			if( !pEnumLiteral->loadFromXMI(tempElement) ) {
+				return false;
+			}
+			m_List.append(pEnumLiteral);
+		} else if (tag == "stereotype") {
+			kdDebug() << "UMLEnum::load(" << m_Name
+				  << "): losing old-format stereotype." << endl;
+		} else {
+			kdWarning() << "unknown child type in UMLEnum::load" << endl;
+		}
+		node = node.nextSibling();
+	}//end while
+	return true;
+}
+
+
 #include "enum.moc"
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/enum.h kdesdk/umbrello/umbrello/enum.h
--- kdesdk.orig/umbrello/umbrello/enum.h	2004-11-09 02:48:27.000000000 +0100
+++ kdesdk/umbrello/umbrello/enum.h	2005-03-26 00:09:07.000000000 +0100
@@ -66,12 +66,14 @@
 	 */
 	virtual UMLObject* clone() const;
 
+	virtual bool isInterface () { return false; }
+
 	/**
-	 * Creates the <UML:Enum> element including its enumliterals.
+	 * Creates a literal for the enum.
+	 *
+	 * @return	The UMLEnum created
 	 */
-	virtual void saveToXMI( QDomDocument & qDoc, QDomElement & qElement );
-
-	virtual bool isInterface () { return false; }
+	UMLObject* createEnumLiteral();
 
  	/**
   	 * Adds an enumliteral to the enum.
@@ -139,6 +141,11 @@
 	 */
 	 virtual UMLObjectList findChildObject(Uml::Object_Type t, const QString &n);
 
+	/**
+	 * Creates the <UML:Enum> element including its enumliterals.
+	 */
+	virtual void saveToXMI( QDomDocument & qDoc, QDomElement & qElement );
+
 signals:
 	void enumLiteralAdded(UMLObject*);
 	void enumLiteralRemoved(UMLObject*);
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/enumwidget.cpp kdesdk/umbrello/umbrello/enumwidget.cpp
--- kdesdk.orig/umbrello/umbrello/enumwidget.cpp	2004-11-02 21:10:04.000000000 +0100
+++ kdesdk/umbrello/umbrello/enumwidget.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -66,7 +66,7 @@
 	int fontHeight  = fm.lineSpacing();
 	QString name;
 	if ( m_bShowPackage ) {
-		name = m_pObject -> getPackage() + "::" + this -> getName();
+		name = m_pObject -> getPackage() + "." + this -> getName();
 	} else {
 		name = this -> getName();
 	}
@@ -144,7 +144,7 @@
 	//now set the width of the concept
 	//set width to name to start with
 	if (m_bShowPackage)  {
-		width = getFontMetrics(FT_BOLD_ITALIC).boundingRect(m_pObject->getPackage() + "::" + getName()).width();
+		width = getFontMetrics(FT_BOLD_ITALIC).boundingRect(m_pObject->getPackage() + "." + getName()).width();
 	} else {
 		width = getFontMetrics(FT_BOLD_ITALIC).boundingRect(getName()).width();
 	}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/floatingtext.cpp kdesdk/umbrello/umbrello/floatingtext.cpp
--- kdesdk.orig/umbrello/umbrello/floatingtext.cpp	2005-02-09 18:51:30.000000000 +0100
+++ kdesdk/umbrello/umbrello/floatingtext.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -27,6 +27,7 @@
 #include "classifier.h"
 #include "listpopupmenu.h"
 #include "operation.h"
+#include "model_utils.h"
 #include "inputdialog.h"
 #include "dialogs/assocpropdlg.h"
 #include "dialogs/selectopdlg.h"
@@ -97,26 +98,20 @@
 					  << "m_pLink is NULL" << endl;
 				return;
 			}
-			UMLClassifier* c = m_pLink->getOperationOwner(this);
+			UMLClassifier* c = m_pLink->getOperationOwner();
 			if (c == NULL) {
 				bool ok = false;
 				QString opText = KInputDialog::getText(i18n("Name"),
 								       i18n("Enter operation name:"),
 								       getText(), &ok, m_pView);
 				if (ok)
-					m_pLink->setOperationText(this, opText);
+					m_pLink->setCustomOpText(opText);
 				return;
 			}
 			UMLObject* umlObj = UMLApp::app()->getDocument()->createChildObject(c, Uml::ot_Operation);
 			if (umlObj) {
 				UMLOperation* newOperation = static_cast<UMLOperation*>( umlObj );
-				Uml::Signature_Type sigType;
-				if (m_pView->getShowOpSig())
-					sigType = Uml::st_SigNoScope;
-				else
-					sigType = Uml::st_NoSigNoScope;
-				QString opText = newOperation->toString(sigType);
-				m_pLink->setOperationText(this, opText);
+				m_pLink->setOperation(newOperation);
 			}
 		}
 		break;
@@ -254,8 +249,8 @@
 		kdError() << "FloatingText::showOpDlg: m_pLink is NULL" << endl;
 		return;
 	}
-	QString seqNum, op;
-	UMLClassifier* c = m_pLink->getSeqNumAndOp(this, seqNum, op);
+	QString seqNum, opText;
+	UMLClassifier* c = m_pLink->getSeqNumAndOp(this, seqNum, opText);
 	if (c == NULL) {
 		kdError() << "FloatingText::showOpDlg: "
 			  << "m_pLink->getSeqNumAndOp() returns a NULL classifier"
@@ -265,14 +260,38 @@
 
 	SelectOpDlg selectDlg(m_pView, c);
 	selectDlg.setSeqNumber( seqNum );
-	selectDlg.setCustomOp( op );
+	if (m_pLink->getOperation() == NULL)
+		selectDlg.setCustomOp( opText );
 	int result = selectDlg.exec();
 	if(!result) {
 		return;
 	}
 	seqNum = selectDlg.getSeqNumber();
-	op = selectDlg.getOpText();
-	m_pLink->setSeqNumAndOp(seqNum, op);
+	opText = selectDlg.getOpText();
+	Umbrello::OpDescriptor od;
+	Umbrello::Parse_Status st = Umbrello::parseOperation(opText, od, c);
+	if (st == Umbrello::PS_OK) {
+		UMLClassifierList selfAndAncestors = c->findSuperClassConcepts();
+		selfAndAncestors.prepend(c);
+		UMLOperation *op = NULL;
+		for (UMLClassifier *cl = selfAndAncestors.first(); cl; cl = selfAndAncestors.next()) {
+			op = cl->findOperation(od.m_name, od.m_args);
+			if (op != NULL)
+				break;
+		}
+		if (op == NULL) {
+			// The op does not yet exist. Create a new one.
+			UMLObject *o = c->createOperation(od.m_name, NULL, &od.m_args);
+			op = static_cast<UMLOperation*>(o);
+		}
+		if (od.m_pReturnType)
+			op->setType(od.m_pReturnType);
+		m_pLink->setOperation(op);
+		opText = QString::null;
+	} else {
+		m_pLink->setOperation(NULL);
+	}
+	m_pLink->setSeqNumAndOp(seqNum, opText);
 	setMessageText();
 }
 
@@ -407,3 +426,6 @@
 	calculateSize();
 }
 
+
+#include "floatingtext.moc"
+
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/floatingtext.h kdesdk/umbrello/umbrello/floatingtext.h
--- kdesdk.orig/umbrello/umbrello/floatingtext.h	2004-11-09 02:48:27.000000000 +0100
+++ kdesdk/umbrello/umbrello/floatingtext.h	2005-03-26 00:09:07.000000000 +0100
@@ -37,6 +37,7 @@
  */
 
 class FloatingText : public UMLWidget {
+	Q_OBJECT
 public:
 	/** sometimes the x/y values get numbers of <0 and >10000 - which is
 	    probably due to a bug somewhere in calculating the position.
@@ -105,12 +106,6 @@
 	void setOperation(const QString &op);
 
 	/**
-	 * Sets the text for this label if it is acting as a sequence
-	 * diagram message or a collaboration diagram message.
-	 */
-	void setMessageText();
-
-	/**
 	 * Return the operation that is displayed.
 	 *
 	 * @return	The operation that is displayed.
@@ -258,6 +253,12 @@
 	 */
 	void slotMenuSelection(int sel);	
 
+	/**
+	 * Sets the text for this label if it is acting as a sequence
+	 * diagram message or a collaboration diagram message.
+	 */
+	void setMessageText();
+
 private:
 	/**
 	 * Initializes key variables of the class.
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/interfacewidget.cpp kdesdk/umbrello/umbrello/interfacewidget.cpp
--- kdesdk.orig/umbrello/umbrello/interfacewidget.cpp	2005-01-27 20:25:39.000000000 +0100
+++ kdesdk/umbrello/umbrello/interfacewidget.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -73,7 +73,7 @@
 	int fontHeight  = fm.lineSpacing();
 	QString name;
 	if ( m_bShowPackage ) {
-		name = m_pObject -> getPackage() + "::" + this -> getName();
+		name = m_pObject -> getPackage() + "." + this -> getName();
 	} else {
 		name = this -> getName();
 	}
@@ -102,7 +102,7 @@
 	int fontHeight = fontMetrics.lineSpacing();
 	QString name;
 	if ( m_bShowPackage ) {
-		name = m_pObject -> getPackage() + "::" + this -> getName();
+		name = m_pObject -> getPackage() + "." + this -> getName();
 	} else {
 		name = this -> getName();
 	}
@@ -162,7 +162,7 @@
 
 	int width;
 	if ( m_bShowPackage ) {
-		width = fm.width(m_pObject->getPackage() + "::" + getName());
+		width = fm.width(m_pObject->getPackage() + "." + getName());
 	} else {
 		width = fm.width(getName());
 	}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/linepath.cpp kdesdk/umbrello/umbrello/linepath.cpp
--- kdesdk.orig/umbrello/umbrello/linepath.cpp	2004-12-17 09:42:28.000000000 +0100
+++ kdesdk/umbrello/umbrello/linepath.cpp	2005-03-11 23:17:24.000000000 +0100
@@ -576,14 +576,21 @@
 			if (count < 2) {
 				return;
 			}
-			//FIXME fix for when association is on top/bottom of widget
-			line = m_HeadList.at( 0 );
-			line->setPoints( m_PointArray[2].x(), m_PointArray[2].y(),
-					 m_PointArray[0].x(), m_PointArray[0].y()-8 );
-
-			line = m_HeadList.at( 1 );
-			line->setPoints( m_PointArray[2].x(), m_PointArray[2].y(),
-					 m_PointArray[0].x(), m_PointArray[0].y()+8 );
+			{
+				int xoffset = 0;
+				int yoffset = 0;
+				if( m_DockRegion == TopBottom )
+					xoffset = 8;
+				else
+					yoffset = 8;
+				line = m_HeadList.at( 0 );
+				line->setPoints( m_PointArray[2].x(), m_PointArray[2].y(),
+						 m_PointArray[0].x()-xoffset, m_PointArray[0].y()-yoffset );
+
+				line = m_HeadList.at( 1 );
+				line->setPoints( m_PointArray[2].x(), m_PointArray[2].y(),
+						 m_PointArray[0].x()+xoffset, m_PointArray[0].y()+yoffset );
+			}
 
 		case Uml::at_Generalization:
 		case Uml::at_Realization:
@@ -852,6 +859,10 @@
 	}
 }
 
+void LinePath::setDockRegion( Region region ) {
+	m_DockRegion = region;
+}
+
 bool LinePath::hasPoints () {
 	int count = m_LineList.count();
 	if (count>1)
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/linepath.h kdesdk/umbrello/umbrello/linepath.h
--- kdesdk.orig/umbrello/umbrello/linepath.h	2004-11-29 21:52:14.000000000 +0100
+++ kdesdk/umbrello/umbrello/linepath.h	2005-03-11 23:17:24.000000000 +0100
@@ -68,6 +68,18 @@
 	*/
 	LinePath & operator=( LinePath & rhs );
 
+	/**
+	*   Enum to tell whether the line docks top/bottom or left/right
+	*/
+	enum Region {
+		TopBottom, LeftRight
+	};
+
+	/**
+	*   Tell the line where the line docks
+	*/
+	void setDockRegion( Region region );
+
 	bool hasPoints ();
 	void dumpPoints ();
 
@@ -336,6 +348,11 @@
 	*/
 	QPointArray m_ParallelLines;
 
+	/**
+	*   Region where the line docks
+	*/
+	Region m_DockRegion;
+
 	bool m_bHeadCreated;
 
 	bool m_bParallelLineCreated;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/linkwidget.cpp kdesdk/umbrello/umbrello/linkwidget.cpp
--- kdesdk.orig/umbrello/umbrello/linkwidget.cpp	2004-11-09 02:55:32.000000000 +0100
+++ kdesdk/umbrello/umbrello/linkwidget.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -16,50 +16,51 @@
 #include <kdebug.h>
 #include "umlview.h"
 #include "umlobject.h"
-
-UMLClassifier *LinkWidget::getOperationOwner(FloatingText *) {
-	// Only applicable to MessageWidget and AssociationWidget.
-	return NULL;
-}
-
-void LinkWidget::setOperationText(FloatingText *, const QString &) {
-	// Only applicable to MessageWidget and AssociationWidget.
+#include "classifier.h"
+#include "operation.h"
+#include "uml.h"
+
+LinkWidget::LinkWidget() {
+}
+
+LinkWidget::~LinkWidget() {
+}
+
+UMLClassifier *LinkWidget::getOperationOwner() {
+	UMLOperation *op = getOperation();
+	if (op == NULL)
+		return NULL;
+	return static_cast<UMLClassifier*>(op->parent());
+}
+
+QString LinkWidget::getOperationText(UMLView *view /* = NULL */) {
+	UMLOperation *op = getOperation();
+	if (op == NULL)
+		return getCustomOpText();
+	if (view == NULL)
+		view = UMLApp::app()->getCurrentView();
+	Uml::Signature_Type sigType;
+	if (view && view->getShowOpSig())
+		sigType = Uml::st_SigNoScope;
+	else
+		sigType = Uml::st_NoSigNoScope;
+	QString opText = op->toString(sigType);
+	return opText;
 }
 
 void LinkWidget::resetTextPositions() {
-	// Only applicable to MessageWidget and AssociationWidget.
-}
-
-void LinkWidget::setMessageText(FloatingText *) {
-	// Only applicable to MessageWidget and AssociationWidget.
-}
-
-void LinkWidget::setText(FloatingText *, const QString &) {
-	// Only applicable to MessageWidget and AssociationWidget.
 }
 
 bool LinkWidget::showDialog() {
-	// Only applicable to MessageWidget and AssociationWidget.
 	return true;
 }
 
-UMLClassifier *LinkWidget::getSeqNumAndOp(FloatingText *, QString&, QString&) {
-	// Only applicable to MessageWidget and AssociationWidget.
-	return NULL;
-}
-
-void LinkWidget::setSeqNumAndOp(const QString &/*seqNum*/, const QString &/*op*/) {
-	// Only applicable to MessageWidget and AssociationWidget.
-}
-
 void LinkWidget::constrainTextPos(int & /*textX*/, int & /*textY*/,
 				  int /*textWidth*/, int /*textHeight*/,
 				  Uml::Text_Role /*tr*/) {
-	// Only applicable to MessageWidget.
 }
 
 void LinkWidget::calculateNameTextSegment() {
-	// Only applicable to MessageWidget and AssociationWidget.
 }
 
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/linkwidget.h kdesdk/umbrello/umbrello/linkwidget.h
--- kdesdk.orig/umbrello/umbrello/linkwidget.h	2004-11-09 02:48:27.000000000 +0100
+++ kdesdk/umbrello/umbrello/linkwidget.h	2005-03-26 00:09:07.000000000 +0100
@@ -21,7 +21,9 @@
 
 // forward declarations
 class UMLClassifier;
+class UMLOperation;
 class FloatingText;
+class UMLView;
 
 /**
  * This is an interface realized by AssociationWidget and MessageWidget.
@@ -36,7 +38,8 @@
  */
 class LinkWidget {
 public:
-	// FIXME: Improve documentation.
+	LinkWidget();
+	virtual ~LinkWidget();
 
 	/**
 	 * Sets the font the widget is to use.
@@ -50,51 +53,75 @@
 	/**
 	 * Motivated by FloatingText::slotMenuSelection(mt_Operation)
 	 */
-	virtual UMLClassifier *getOperationOwner(FloatingText *ft);
+	virtual UMLClassifier *getOperationOwner();
 
 	/**
 	 * Motivated by FloatingText::slotMenuSelection(mt_Operation)
 	 */
-	virtual void setOperationText(FloatingText *ft, const QString &opText);
+	virtual UMLOperation *getOperation() = 0;
+
+	/**
+	 * Motivated by FloatingText::slotMenuSelection(mt_Operation)
+	 */
+	virtual void setOperation(UMLOperation *op) = 0;
+
+	/**
+	 * Motivated by getOperationText()
+	 */
+	virtual QString getCustomOpText() = 0;
+
+	/**
+	 * Motivated by FloatingText::slotMenuSelection(mt_Operation)
+	 */
+	virtual void setCustomOpText(const QString &opText) = 0;
+
+	/**
+	 * Uses getOperation() if set, else calls getCustomOpText().
+	 */
+	QString getOperationText(UMLView *view = NULL);
 
 	/**
 	 * Motivated by FloatingText::slotMenuSelection(mt_Reset_Label_Positions)
+	 * Only applies to AssociationWidget.
 	 */
 	virtual void resetTextPositions();
 
 	/**
 	 * Motivated by FloatingText::setMessageText()
 	 */
-	virtual void setMessageText(FloatingText *ft);
+	virtual void setMessageText(FloatingText *ft) = 0;
 
 	/**
 	 * Motivated by FloatingText::handleRename()
 	 */
-	virtual void setText(FloatingText *ft, const QString &newText);
+	virtual void setText(FloatingText *ft, const QString &newText) = 0;
 
 	/**
 	 * Motivated by FloatingText::mouseDoubleClickEvent()
+	 * Only applies to AssociationWidget.
 	 */
 	virtual bool showDialog();
 
 	/**
 	 * Motivated by FloatingText::showOpDlg()
 	 */
-	virtual UMLClassifier *getSeqNumAndOp(FloatingText *ft, QString& seqNum, QString& op);
+	virtual UMLClassifier *getSeqNumAndOp(FloatingText *ft, QString& seqNum, QString& op) = 0;
 
 	/**
 	 * Motivated by FloatingText::showOpDlg()
 	 */
-	virtual void setSeqNumAndOp(const QString &seqNum, const QString &op);
+	virtual void setSeqNumAndOp(const QString &seqNum, const QString &op) = 0;
 
 	/**
 	 * Motivated by FloatingText::mouseMoveEvent()
+	 * Only applies to MessageWidget.
 	 */
 	virtual void constrainTextPos(int &textX, int &textY, int textWidth, int textHeight,
 				      Uml::Text_Role tr);
  
 	/**
-	 * Motivated by FloatingText::setLink(). Bad.
+	 * Motivated by FloatingText::setLink().
+	 * Only applies to AssociationWidget.
 	 */
 	virtual void calculateNameTextSegment();
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/listpopupmenu.cpp kdesdk/umbrello/umbrello/listpopupmenu.cpp
--- kdesdk.orig/umbrello/umbrello/listpopupmenu.cpp	2005-01-27 20:25:39.000000000 +0100
+++ kdesdk/umbrello/umbrello/listpopupmenu.cpp	2005-03-11 23:17:24.000000000 +0100
@@ -53,6 +53,10 @@
 			mt = mt_Component_View;
 			break;
 
+		case Uml::lvt_EntityRelationship_Model:
+			mt = mt_EntityRelationship_Model;
+			break;
+
 		case Uml::lvt_Deployment_View:
 			mt = mt_Deployment_View;
 			break;
@@ -474,6 +478,9 @@
 		m_pInsert->insertItem(Umbrello::iconSet(Uml::dt_Deployment), i18n("Deployment Diagram..."),
 				      mt_Deployment_Diagram);
 		break;
+	case mt_Deployment_Folder:
+		m_pInsert->insertItem(BarIcon("folder_new"), i18n("Folder"), mt_Deployment_Folder);
+		break;
 	case mt_Entity:
 		m_pInsert->insertItem(m_pixmap[pm_Entity], i18n("Entity"), mt_Entity);
 		break;
@@ -779,7 +786,7 @@
 
 		case mt_Deployment_View:
 			m_pInsert = new KPopupMenu(this, "New");
-			insertStdItem(mt_Component_Folder);
+			insertStdItem(mt_Deployment_Folder);
 			insertStdItem(mt_Node);
 			insertStdItem(mt_Deployment_Diagram);
 			insertFileNew();
@@ -792,7 +799,9 @@
 
 		case mt_EntityRelationship_Model:
 			m_pInsert = new KPopupMenu(this, "New");
+			insertStdItem(mt_EntityRelationship_Folder);
 			insertStdItem(mt_Entity);
+			insertStdItem(mt_EntityRelationship_Diagram);
 			insertFileNew();
 			insertSeparator();
 			insertStdItem(mt_Paste);
@@ -842,7 +851,7 @@
 
 		case mt_Deployment_Folder:
 			m_pInsert = new KPopupMenu(this, "New");
-			insertStdItem(mt_Component_Folder);
+			insertStdItem(mt_Deployment_Folder);
 			insertStdItem(mt_Node);
 			insertStdItem(mt_Deployment_Diagram);
 			insertFileNew();
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/messagewidget.cpp kdesdk/umbrello/umbrello/messagewidget.cpp
--- kdesdk.orig/umbrello/umbrello/messagewidget.cpp	2004-11-27 18:34:06.000000000 +0100
+++ kdesdk/umbrello/umbrello/messagewidget.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -23,20 +23,19 @@
 #include "floatingtext.h"
 #include "objectwidget.h"
 #include "classifier.h"
+#include "operation.h"
 #include "umlview.h"
 #include "umldoc.h"
 #include "uml.h"
 #include "listpopupmenu.h"
 
 MessageWidget::MessageWidget(UMLView * view, ObjectWidget* a, ObjectWidget* b,
-			     FloatingText* ft, int y,
-			     Uml::Sequence_Message_Type sequenceMessageType,
+			     int y, Uml::Sequence_Message_Type sequenceMessageType,
 			     Uml::IDType id /* = Uml::id_None */)
   : UMLWidget(view, id) {
 	init();
 	m_pOw[Uml::A] = a;
 	m_pOw[Uml::B] = b;
-	m_pFText = ft;
 	m_nY = y;
 	m_sequenceMessageType = sequenceMessageType;
 	if (m_sequenceMessageType == Uml::sequence_message_creation) {
@@ -44,12 +43,6 @@
 		m_pOw[Uml::B]->setY(y);
 	}
 
-	//CHECK: This is contorted - it should be in the caller's responsibility:
-	if (ft) {
-		ft->setUMLObject(b->getUMLObject());
-		setLinkAndTextPos();
-	}
-
 	connect(m_pOw[Uml::A], SIGNAL(sigWidgetMoved(Uml::IDType)), this, SLOT(slotWidgetMoved(Uml::IDType)));
 	connect(m_pOw[Uml::B], SIGNAL(sigWidgetMoved(Uml::IDType)), this, SLOT(slotWidgetMoved(Uml::IDType)));
 	calculateWidget();
@@ -340,6 +333,7 @@
 }
 
 void MessageWidget::calculateWidget() {
+	setMessageText(m_pFText);
 	calculateDimensions();
 
 	setVisible(true);
@@ -383,6 +377,8 @@
 			setLinkAndTextPos();
 			m_pFText->setText("");
 			m_pFText->setActivated();
+
+			//CHECK: Do we need this?
 			m_pFText->setUMLObject( m_pOw[Uml::B]->getUMLObject() );
 		}
 		m_pFText -> slotMenuSelection(sel);
@@ -415,7 +411,10 @@
 	m_pFText->setActivated();
 	QString messageText = m_pFText->getText();
 	m_pFText->setVisible( messageText.length() > 1 );
+
+	//CHECK: Do we need this?
 	m_pFText -> setUMLObject( m_pOw[Uml::B] -> getUMLObject() );
+
 	connect(m_pOw[Uml::A], SIGNAL(sigWidgetMoved(Uml::IDType)), this, SLOT(slotWidgetMoved(Uml::IDType)));
 	connect(m_pOw[Uml::B], SIGNAL(sigWidgetMoved(Uml::IDType)), this, SLOT(slotWidgetMoved(Uml::IDType)));
 	if ( ! UMLApp::app()->getDocument()->loading() )
@@ -437,7 +436,9 @@
 }
 
 void MessageWidget::setMessageText(FloatingText *ft) {
-	QString displayText = m_SequenceNumber + ": " + m_Operation;
+	if (ft == NULL)
+		return;
+	QString displayText = m_SequenceNumber + ": " + getOperationText(m_pView);
 	ft->setText(displayText);
 	setTextPosition();
 }
@@ -449,7 +450,7 @@
 
 void MessageWidget::setSeqNumAndOp(const QString &seqNum, const QString &op) {
 	setSequenceNumber( seqNum );
-	setOperation( op );
+	m_CustomOp = op;   ///FIXME m_pOperation
 }
 
 void MessageWidget::setSequenceNumber( const QString &sequenceNumber ) {
@@ -460,35 +461,50 @@
 	return m_SequenceNumber;
 }
 
-void MessageWidget::setOperation( const QString &operation ) {
-	m_Operation = operation;
-}
-
-QString MessageWidget::getOperation() const {
-	return m_Operation;
-}
-
 void MessageWidget::lwSetFont (QFont font) {
 	UMLWidget::setFont( font );
 }
 
-UMLClassifier *MessageWidget::getOperationOwner(FloatingText *ft) {
-	UMLObject *pObject = ft->getUMLObject();
+UMLClassifier *MessageWidget::getOperationOwner() {
+	UMLObject *pObject = m_pOw[Uml::B]->getUMLObject();
 	if (pObject == NULL)
 		return NULL;
 	UMLClassifier *c = dynamic_cast<UMLClassifier*>(pObject);
 	return c;
 }
 
-void MessageWidget::setOperationText(FloatingText *ft, const QString &opText) {
-	setOperation(opText);
-	ft->setMessageText();
+UMLOperation *MessageWidget::getOperation() {
+	return static_cast<UMLOperation*>(m_pObject);
+}
+
+void MessageWidget::setOperation(UMLOperation *op) {
+	m_pObject = op;
+}
+
+QString MessageWidget::getCustomOpText() {
+	return m_CustomOp;
+}
+
+void MessageWidget::setCustomOpText(const QString &opText) {
+	m_CustomOp = opText;
+	m_pFText->setMessageText();
 }
 
 UMLClassifier * MessageWidget::getSeqNumAndOp(FloatingText *ft, QString& seqNum,
 							        QString& op) {
 	seqNum = m_SequenceNumber;
-	op = m_Operation;
+	UMLOperation *pOperation = getOperation();
+	if (pOperation != NULL) {
+		Uml::Signature_Type sigType;
+		if (m_pView->getShowOpSig())
+			sigType = Uml::st_SigNoScope;
+		else
+			sigType = Uml::st_NoSigNoScope;
+		op = pOperation->toString(sigType);
+	} else {
+		op = m_CustomOp;
+	}
+	//CHECK: I believe we should retrieve the UMLObject from m_pOw[A|B]
 	UMLObject *o = ft->getUMLObject();
 	UMLClassifier *c = dynamic_cast<UMLClassifier*>(o);
 	return c;
@@ -768,7 +784,11 @@
 	UMLWidget::saveToXMI( qDoc, messageElement );
 	messageElement.setAttribute( "widgetaid", ID2STR(m_pOw[Uml::A]->getLocalID()) );
 	messageElement.setAttribute( "widgetbid", ID2STR(m_pOw[Uml::B]->getLocalID()) );
-	messageElement.setAttribute( "operation", m_Operation );
+	UMLOperation *pOperation = getOperation();
+	if (pOperation)
+		messageElement.setAttribute( "operation", ID2STR(pOperation->getID()) );
+	else
+		messageElement.setAttribute( "operation", m_CustomOp );
 	messageElement.setAttribute( "seqnum", m_SequenceNumber );
 	messageElement.setAttribute( "sequencemessagetype", m_sequenceMessageType );
 
@@ -788,7 +808,7 @@
 	QString textid = qElement.attribute( "textid", "-1" );
 	QString widgetaid = qElement.attribute( "widgetaid", "-1" );
 	QString widgetbid = qElement.attribute( "widgetbid", "-1" );
-	m_Operation = qElement.attribute( "operation", "" );
+	m_CustomOp = qElement.attribute( "operation", "" );
 	m_SequenceNumber = qElement.attribute( "seqnum", "" );
 	QString sequenceMessageType = qElement.attribute( "sequencemessagetype", "1001" );
 	m_sequenceMessageType = (Uml::Sequence_Message_Type)sequenceMessageType.toInt();
@@ -821,6 +841,34 @@
 		return false;
 	}
 
+	UMLClassifier *c = dynamic_cast<UMLClassifier*>( pWB->getUMLObject() );
+	if (c) {
+		Uml::IDType opId = STR2ID(m_CustomOp);
+		UMLOperation *op = dynamic_cast<UMLOperation*>( c->findChildObject(opId, true) );
+		if (op) {
+			// If the UMLOperation is set, m_CustomOp isn't used anyway.
+			// Just setting it empty for the sake of sanity.
+			m_CustomOp = QString::null;
+		} else {
+			// Previous umbrello versions saved the operation text
+			// instead of the xmi.id of the operation.
+			// For backward compatibility, attempt to determine the
+			// m_pOperation from the operation text:
+			Umbrello::OpDescriptor od;
+			Umbrello::Parse_Status st = Umbrello::parseOperation(m_CustomOp, od, c);
+			if (st == Umbrello::PS_OK) {
+				bool isExistingOp = false;
+				UMLObject *o = c->createOperation(od.m_name, &isExistingOp, &od.m_args);
+				op = static_cast<UMLOperation*>(o);
+				if (od.m_pReturnType) {
+					op->setType(od.m_pReturnType);
+				}
+				m_CustomOp = QString::null;
+			}
+		}
+		setOperation(op);
+	}
+
 	Uml::IDType textId = STR2ID(textid);
 	if (textId != Uml::id_None) {
 		UMLWidget *flotext = m_pView -> findWidget( textId );
@@ -846,7 +894,7 @@
 	if ( !element.isNull() ) {
 		QString tag = element.tagName();
 		if (tag == "floatingtext") {
-			m_pFText = new FloatingText( m_pView, tr, m_Operation, textId );
+			m_pFText = new FloatingText( m_pView, tr, getOperationText(m_pView), textId );
 			if( ! m_pFText->loadFromXMI(element) ) {
 				// Most likely cause: The FloatingText is empty.
 				delete m_pFText;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/messagewidget.h kdesdk/umbrello/umbrello/messagewidget.h
--- kdesdk.orig/umbrello/umbrello/messagewidget.h	2004-11-16 08:00:24.000000000 +0100
+++ kdesdk/umbrello/umbrello/messagewidget.h	2005-03-26 00:09:07.000000000 +0100
@@ -21,6 +21,8 @@
 // forward declarations
 class FloatingText;
 class ObjectWidget;
+class UMLOperation;
+
 /**
  * Used to display a message on a sequence diagram.  The message
  * could be between two objects or a message that calls itself on
@@ -48,13 +50,12 @@
 	 * @param view	The parent to this class.
 	 * @param a	The role A widget for this message.
 	 * @param b	The role B widget for this message.
-	 * @param ft	The FloatingText widget that is needed to display text.
 	 * @param y	The vertical position to display this message.
 	 * @param sequenceMessageType Whether synchronous or asynchronous
 	 * @param id	A unique id used for deleting this object cleanly.
 	 *              The default (-1) will prompt generation of a new ID.
 	 */
-	MessageWidget(UMLView * view, ObjectWidget* a, ObjectWidget* b, FloatingText* ft, 
+	MessageWidget(UMLView * view, ObjectWidget* a, ObjectWidget* b,
 		      int y, Uml::Sequence_Message_Type sequenceMessageType,
 		      Uml::IDType id = Uml::id_None);
 
@@ -87,16 +88,6 @@
 	QString getSequenceNumber() const;
 
 	/**
-	 * Write property of QString m_Operation.
-	 */
-	void setOperation( const QString &operation );
-
-	/**
-	 * Read property of QString m_Operation.
-	 */
-	QString getOperation() const;
-
-	/**
 	 * Returns whether the message is synchronous or asynchronous
 	 */
 	Uml::Sequence_Message_Type getSequenceMessageType() const {
@@ -152,14 +143,33 @@
 	/**
 	 * Overrides operation from LinkWidget.
 	 * Required by FloatingText.
+	 * @todo Move to LinkWidget.
+	 */
+	UMLClassifier *getOperationOwner();
+
+	/**
+	 * Implements operation from LinkWidget.
+	 * Motivated by FloatingText.
+	 */
+	UMLOperation *getOperation();
+
+	/**
+	 * Implements operation from LinkWidget.
+	 * Motivated by FloatingText.
+	 */
+	void setOperation(UMLOperation *op);
+
+	/**
+	 * Overrides operation from LinkWidget.
+	 * Required by FloatingText.
 	 */
-	UMLClassifier *getOperationOwner(FloatingText *ft);
+	QString getCustomOpText();
 
 	/**
 	 * Overrides operation from LinkWidget.
 	 * Required by FloatingText.
 	 */
-	void setOperationText(FloatingText *ft, const QString &opText);
+	void setCustomOpText(const QString &opText);
 
 	/**
 	 * Overrides operation from LinkWidget.
@@ -349,7 +359,7 @@
 
 	// Data loaded/saved
 	QString m_SequenceNumber;
-	QString m_Operation;
+	QString m_CustomOp;
 	/**
 	 * Whether the message is synchronous or asynchronous
 	 */
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/operation.cpp kdesdk/umbrello/umbrello/operation.cpp
--- kdesdk.orig/umbrello/umbrello/operation.cpp	2005-02-13 13:44:58.000000000 +0100
+++ kdesdk/umbrello/umbrello/operation.cpp	2005-03-05 10:08:23.000000000 +0100
@@ -159,7 +159,7 @@
 	if (retType) {
 		UMLPackage *retScope = retType->getUMLPackage();
 		if (retScope != ownParent && retScope != ownParent->getUMLPackage())
-			returnType = retType->getFullyQualifiedName(".");
+			returnType = retType->getFullyQualifiedName();
 		else
 			returnType = retType->getName();
 	}
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/operation.h kdesdk/umbrello/umbrello/operation.h
--- kdesdk.orig/umbrello/umbrello/operation.h	2004-12-06 05:32:51.000000000 +0100
+++ kdesdk/umbrello/umbrello/operation.h	2005-03-26 00:09:07.000000000 +0100
@@ -15,7 +15,7 @@
 #ifndef OPERATION_H
 #define OPERATION_H
 
-#include "umldoc.h"
+#include "umlattributelist.h"
 #include "classifierlistitem.h"
 
 class UMLClassifier;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/refactoring/refactoringassistant.cpp kdesdk/umbrello/umbrello/refactoring/refactoringassistant.cpp
--- kdesdk.orig/umbrello/umbrello/refactoring/refactoringassistant.cpp	2004-12-29 21:55:55.000000000 +0100
+++ kdesdk/umbrello/umbrello/refactoring/refactoringassistant.cpp	2005-03-26 00:09:08.000000000 +0100
@@ -426,7 +426,7 @@
 	UMLClassifier *c = dynamic_cast<UMLClassifier*>(findUMLObject( item ));
 	if( !c )
 		return;
-	m_doc->createOperation( c );
+	c->createOperation();
 }
 
 void RefactoringAssistant::createAttribute()
@@ -441,7 +441,7 @@
 	UMLClass *c = dynamic_cast<UMLClass*>(findUMLObject( item ));
 	if( !c )
 		return;
-	m_doc->createAttribute( c );
+	c->createAttribute();
 }
 
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/toolbarstatemessages.cpp kdesdk/umbrello/umbrello/toolbarstatemessages.cpp
--- kdesdk.orig/umbrello/umbrello/toolbarstatemessages.cpp	2005-01-29 18:44:21.000000000 +0100
+++ kdesdk/umbrello/umbrello/toolbarstatemessages.cpp	2005-03-19 12:24:29.000000000 +0100
@@ -112,8 +112,7 @@
 				y = m_FirstMousePos.y();
 			}
 			MessageWidget* message = new MessageWidget(m_pUMLView, pFirstSelectedObj,
-								   clickedOnWidget, NULL,
-								   y, msgType);
+								   clickedOnWidget, y, msgType);
 
 			// TODO Do we really need a connect? It makes the code so hard to read.
 			m_pUMLView->connect(m_pUMLView, SIGNAL(sigColorChanged(Uml::IDType)), message, SLOT(slotColorChanged(Uml::IDType)));
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umbrello.desktop kdesdk/umbrello/umbrello/umbrello.desktop
--- kdesdk.orig/umbrello/umbrello/umbrello.desktop	2005-02-13 05:30:45.000000000 +0100
+++ kdesdk/umbrello/umbrello/umbrello.desktop	2005-03-07 15:20:12.000000000 +0100
@@ -9,7 +9,6 @@
 Name=Umbrello
 Name[hi]=अम्बरैलो
 Name[ta]=  அம்ரல்லோ
-Name[xx]=xxUmbrelloxx
 GenericName=UML Modeller
 GenericName[bs]=UML modeler
 GenericName[ca]=Modelador UML
@@ -39,7 +38,6 @@
 GenericName[ta]=UML மோடெல்லார்
 GenericName[tg]=Воситаи UML моделкунонӣ
 GenericName[uk]=Засіб моделювання UML
-GenericName[xx]=xxUML Modellerxx
 GenericName[zh_CN]=UML 建模工具
 MimeType=application/x-uml
 Categories=Qt;KDE;Development;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlcanvasobject.cpp kdesdk/umbrello/umbrello/umlcanvasobject.cpp
--- kdesdk.orig/umbrello/umbrello/umlcanvasobject.cpp	2005-02-26 12:19:40.000000000 +0100
+++ kdesdk/umbrello/umbrello/umlcanvasobject.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -132,7 +132,7 @@
 	return list;
 }
 
-UMLObject* UMLCanvasObject::findChildObject(Uml::IDType id) {
+UMLObject* UMLCanvasObject::findAssoc(Uml::IDType id) {
 	for (UMLAssociationListIt ait(m_AssocsList); ait.current(); ++ait) {
 		UMLAssociation *asso = ait.current();
 		if (asso->getID() == id)
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlcanvasobject.h kdesdk/umbrello/umbrello/umlcanvasobject.h
--- kdesdk.orig/umbrello/umbrello/umlcanvasobject.h	2005-02-26 12:19:40.000000000 +0100
+++ kdesdk/umbrello/umbrello/umlcanvasobject.h	2005-03-26 00:09:07.000000000 +0100
@@ -174,7 +174,7 @@
 	 * @param id		The id of the object to find.
 	 * @return	Pointer to the object found (NULL if not found.)
 	 */
-	virtual UMLObject* findChildObject(Uml::IDType id);
+	UMLObject* findAssoc(Uml::IDType id);
 
 	/**
 	 * Returns a name for the new association, operation, template
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umldoc.cpp kdesdk/umbrello/umbrello/umldoc.cpp
--- kdesdk.orig/umbrello/umbrello/umldoc.cpp	2005-02-13 13:46:54.000000000 +0100
+++ kdesdk/umbrello/umbrello/umldoc.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -75,10 +75,6 @@
 #include "usecase.h"
 #include "clipboard/idchangelog.h"
 #include "dialogs/classpropdlg.h"
-#include "dialogs/umlattributedialog.h"
-#include "dialogs/umlentityattributedialog.h"
-#include "dialogs/umltemplatedialog.h"
-#include "dialogs/umloperationdialog.h"
 #include "inputdialog.h"
 #include "listpopupmenu.h"
 #include "version.h"
@@ -597,7 +593,7 @@
 		file.close(); // ...and close it
 
 		// now add this file to the archive, but without the extension
-		QString tmpQString = url.filename();
+		QString tmpQString = url.fileName();
 		if (fileFormat == "tgz")
 		{
 			tmpQString.replace(QRegExp("\\.tgz$"), "");
@@ -899,7 +895,7 @@
 void UMLDoc::slotRemoveUMLObject(UMLObject* object)  {
 	m_objectList.remove(object);
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
+
 bool UMLDoc::isUnique(const QString &name)
 {
 	UMLListView *listView = UMLApp::app()->getListView();
@@ -1057,178 +1053,35 @@
 	return o;
 }
 
-////////////////////////////////////////////////////////////////////////////////////////////////////
 UMLObject* UMLDoc::createChildObject(UMLObject* umlobject, Object_Type type) {
 	UMLObject* returnObject = NULL;
 	if(type == ot_Attribute) {
 		UMLClass *umlclass = dynamic_cast<UMLClass *>(umlobject);
 		if (umlclass)
-			returnObject = createAttribute(umlclass);
+			returnObject = umlclass->createAttribute();
 	} else if(type == ot_Operation) {
 		UMLClassifier *umlclassifier = dynamic_cast<UMLClassifier *>(umlobject);
 		if (umlclassifier)
-			returnObject = createOperation(umlclassifier);
+			returnObject = umlclassifier->createOperation();
 	} else if(type == ot_Template) {
 		UMLClassifier *umlclass = dynamic_cast<UMLClassifier *>(umlobject);
 		if (umlclass)
-			returnObject = createTemplate(umlclass);
+			returnObject = umlclass->createTemplate();
 	} else if(type == ot_EnumLiteral) {
 		UMLEnum* umlenum = dynamic_cast<UMLEnum*>(umlobject);
 		if (umlenum) {
-			returnObject = createEnumLiteral(umlenum);
+			returnObject = umlenum->createEnumLiteral();
 		}
 	} else if(type == ot_EntityAttribute) {
 		UMLEntity* umlentity = dynamic_cast<UMLEntity*>(umlobject);
 		if (umlentity) {
-			returnObject = createEntityAttribute(umlentity);
+			returnObject = umlentity->createEntityAttribute();
 		}
 	} else {
 		kdDebug() << "ERROR UMLDoc::createChildObject type:" << type << endl;
 	}
 	return returnObject;
 }
-////////////////////////////////////////////////////////////////////////////////////////////////////
-UMLObject* UMLDoc::createAttribute(UMLClass* umlclass, const QString &name /*=null*/) {
-	Uml::IDType id = getUniqueID();
-	QString currentName;
-	if (name.isNull())  {
-		currentName = umlclass->uniqChildName(Uml::ot_Attribute);
-	} else {
-		currentName = name;
-	}
-	const Settings::OptionState optionState = UMLApp::app()->getOptionState();
-	Uml::Scope scope = optionState.classState.defaultAttributeScope;
-	UMLAttribute* newAttribute = new UMLAttribute(umlclass, currentName, id, scope);
-
-	int button = QDialog::Accepted;
-	bool goodName = false;
-
-	//check for name.isNull() stops dialogue being shown
-	//when creating attribute via list view
-	while (button==QDialog::Accepted && !goodName && name.isNull()) {
-		UMLAttributeDialog attributeDialogue(0, newAttribute);
-		button = attributeDialogue.exec();
-		QString name = newAttribute->getName();
-
-		if(name.length() == 0) {
-			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
-		} else if ( umlclass->findChildObject(Uml::ot_Attribute, name).count() > 0 ) {
-			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
-		} else {
-			goodName = true;
-		}
-	}
-
-	if (button != QDialog::Accepted) {
-		return NULL;
-	}
-
-	umlclass->addAttribute(newAttribute);
-
-	emit sigObjectCreated(newAttribute);
-	return newAttribute;
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
-UMLObject* UMLDoc::createTemplate(UMLClassifier* o, QString currentName /*= QString::null*/) {
-	bool goodName = !currentName.isEmpty();
-	if (!goodName)
-		currentName = o->uniqChildName(Uml::ot_Template);
-	UMLTemplate* newTemplate = new UMLTemplate(o, currentName);
-
-	int button = QDialog::Accepted;
-
-	while (button==QDialog::Accepted && !goodName) {
-		UMLTemplateDialog templateDialogue(0, newTemplate);
-		button = templateDialogue.exec();
-		QString name = newTemplate->getName();
-
-		if(name.length() == 0) {
-			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
-		} else if ( o->findChildObject(Uml::ot_Template, name).count() > 0 ) {
-			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
-		} else {
-			goodName = true;
-		}
-	}
-
-	if (button != QDialog::Accepted) {
-		return NULL;
-	}
-
-	o->addTemplate(newTemplate);
-
-	emit sigObjectCreated(newTemplate);
-	return newTemplate;
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
-UMLObject* UMLDoc::createEnumLiteral(UMLEnum* umlenum) {
-	QString currentName = umlenum->uniqChildName(Uml::ot_EnumLiteral);
-	UMLEnumLiteral* newEnumLiteral = new UMLEnumLiteral(umlenum, currentName);
-
-	bool ok = true;
-	bool goodName = false;
-
-	while (ok && !goodName) {
-		ok = newEnumLiteral->showPropertiesDialogue( UMLApp::app() );
-		QString name = newEnumLiteral->getName();
-
-		if(name.length() == 0) {
-			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
-		} else {
-			goodName = true;
-		}
-	}
-
-	if (!ok) {
-		return NULL;
-	}
-
-	umlenum->addEnumLiteral(newEnumLiteral);
-
-	emit sigObjectCreated(newEnumLiteral);
-	return newEnumLiteral;
-}
-
-UMLObject* UMLDoc::createEntityAttribute(UMLEntity* umlentity, const QString &name /*=null*/) {
-	Uml::IDType id = getUniqueID();
-	QString currentName;
-	if (name.isNull())  {
-		currentName = umlentity->uniqChildName(Uml::ot_EntityAttribute);
-	} else {
-		currentName = name;
-	}
-	const Settings::OptionState optionState = UMLApp::app()->getOptionState();
-	Uml::Scope scope = optionState.classState.defaultAttributeScope;
-	UMLEntityAttribute* newAttribute = new UMLEntityAttribute(umlentity, currentName, id, scope);
-
-	int button = QDialog::Accepted;
-	bool goodName = false;
-
-	//check for name.isNull() stops dialogue being shown
-	//when creating attribute via list view
-	while (button==QDialog::Accepted && !goodName && name.isNull()) {
-		UMLEntityAttributeDialog attributeDialogue(0, newAttribute);
-		button = attributeDialogue.exec();
-		QString name = newAttribute->getName();
-
-		if(name.length() == 0) {
-			KMessageBox::error(0, i18n("That is an invalid name."), i18n("Invalid Name"));
-		} else if ( umlentity->findChildObject(Uml::ot_EntityAttribute, name).count() > 0 ) {
-			KMessageBox::error(0, i18n("That name is already being used."), i18n("Not a Unique Name"));
-		} else {
-			goodName = true;
-		}
-	}
-
-	if (button != QDialog::Accepted) {
-		return NULL;
-	}
-
-	umlentity->addEntityAttribute(newAttribute);
-
-	emit sigObjectCreated(newAttribute);
-	return newAttribute;
-}
 
 UMLStereotype* UMLDoc::findStereotype(const QString &name) {
 	for (UMLStereotype *s = m_stereoList.first(); s; s = m_stereoList.next() ) {
@@ -1249,94 +1102,6 @@
 	return s;
 }
 
-UMLOperation* UMLDoc::createOperation(UMLClassifier* classifier,
-				      const QString &name /*=null*/,
-				      bool *isExistingOp  /*=NULL*/,
-				      Umbrello::NameAndType_List *params  /*=NULL*/)
-{
-	if(!classifier)
-	{
-		kdWarning() << "UMLDoc::createOperation called with classifier == NULL"
-			    << endl;
-		return NULL;
-	}
-	bool nameNotSet = (name.isNull() || name.isEmpty());
-	if (! nameNotSet) {
-		UMLObjectList list = classifier->findChildObject(Uml::ot_Operation, name);
-		// If there are operation(s) with the same name then compare the parameter list
-		if (list.count()) {
-			const int inputParmCount = (params ? params->count() : 0);
-			for (UMLObjectListIt oit(list); oit.current(); ++oit) {
-				UMLOperation* test = dynamic_cast<UMLOperation*>(oit.current());
-				if (test == NULL)
-					continue;
-				UMLAttributeList *testParams = test->getParmList();
-				if (params == NULL) {
-					if (testParams->count() == 0) {
-						if (isExistingOp != NULL)
-							*isExistingOp = true;
-						return test;
-					}
-					continue;
-				}
-				const int pCount = testParams->count();
-				if (pCount != inputParmCount)
-					continue;
-				int i = 0;
-				for (; i < pCount; ++i) {
-					Umbrello::NameAndType_ListIt nt(params->at(i));
-					UMLObject *c = (*nt).second;
-					QString typeName = testParams->at(i)->getTypeName();
-					if (c == NULL) {       //template parameter
-						if (typeName != "class")
-							break;
-					} else if (typeName != c->getName())
-						break;
-				}
-				if (i == pCount) {
-					//all parameters matched -> the signature is not unique
-					if (isExistingOp != NULL)
-						*isExistingOp = true;
-					return test;
-				}
-			}
-			// we did not find an exact match, so the signature is unique ( acceptable )
-		}
-	}
-	UMLOperation *op = new UMLOperation(classifier, name);
-	if (params)
-	{
-		for (Umbrello::NameAndType_ListIt it = params->begin(); it != params->end(); ++it ) {
-			const Umbrello::NameAndType &nt = *it;
-			UMLAttribute *par = new UMLAttribute(op, nt.first);
-			par->setType(nt.second);
-			op->addParm(par);
-		}
-	}
-	if (nameNotSet || params == NULL) {
-		if (nameNotSet)
-			op->setName( classifier->uniqChildName(Uml::ot_Operation) );
-		do {
-			UMLOperationDialog operationDialogue(0, op);
-			if( operationDialogue.exec() != QDialog::Accepted ) {
-				delete op;
-				return NULL;
-			} else if (classifier->checkOperationSignature(op->getName(), op->getParmList())) {
-				KMessageBox::information(0,
-				 i18n("An operation with the same name and signature already exists. You can not add it again."));
-			} else {
-				break;
-			}
-		} while(1);
-	}
-
-	// operation name is ok, formally add it to the classifier
-	classifier->addOperation( op );
-
-	sigObjectCreated(op);
-	return op;
-}
-////////////////////////////////////////////////////////////////////////////////////////////////////
 void UMLDoc::removeAssociation (UMLAssociation * assoc) {
 	if(!assoc)
 		return;
@@ -1633,7 +1398,7 @@
 
 	umlobject->setUMLStereotype(NULL);  // triggers possible cleanup of UMLStereotype
 	if (dynamic_cast<UMLClassifierListItem*>(umlobject))  {
-		UMLClassifier* parent = (UMLClassifier*)umlobject->parent();
+		UMLClassifier* parent = dynamic_cast<UMLClassifier*>(umlobject->parent());
 		if (parent == NULL) {
 			kdError() << "UMLDoc::removeUMLObject: parent of umlobject is NULL"
 				  << endl;
@@ -1737,7 +1502,8 @@
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 void UMLDoc::signalUMLObjectCreated(UMLObject * o) {
 	emit sigObjectCreated(o);
-	setModified(true);
+	if (!m_bLoading)
+		setModified(true);
 }
 ////////////////////////////////////////////////////////////////////////////////////////////////////
 void UMLDoc::saveToXMI(QIODevice& file) {
@@ -2211,19 +1977,11 @@
 		UMLObject *obj = oit.current();
 #ifdef VERBOSE_DEBUGGING
 		kdDebug() << "UMLDoc: invoking resolveRef() for " << obj->getName()
-			  << " (id=" << obj->getID() << ")" << endl;
+			  << " (id=" << ID2STR(obj->getID()) << ")" << endl;
 #endif
 		obj->resolveRef();
 	}
 	kapp->processEvents();  // give UI events a chance
-#ifdef VERBOSE_DEBUGGING
-	kdDebug() << "UMLDoc object list after resolveRef():" << endl;
-	for (UMLObjectListIt it(m_objectList); it.current(); ++it) {
-		UMLObject *obj = it.current();
-		kdDebug() << obj->getName() << "  (id " << obj->getID()
-			  << ")" << endl;
-	}
-#endif
 }
 
 bool UMLDoc::validateXMIHeader(QDomNode& headerNode) {
@@ -2836,7 +2594,6 @@
         	UMLApp::app()->tabWidget()->setTabLabel( pView, pView->getName() );
 #endif
 	emit sigDiagramRenamed( pView -> getID() );
-	return;
 }
 
 void UMLDoc::addToUndoStack() {
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umldoc.h kdesdk/umbrello/umbrello/umldoc.h
--- kdesdk.orig/umbrello/umbrello/umldoc.h	2005-02-12 08:04:22.000000000 +0100
+++ kdesdk/umbrello/umbrello/umldoc.h	2005-03-26 00:09:07.000000000 +0100
@@ -38,9 +38,7 @@
 #include "umlinterfacelist.h"
 #include "umldatatypelist.h"
 #include "umlviewlist.h"
-#include "umlattributelist.h"
 #include "umlstereotypelist.h"
-#include "model_utils.h"
 
 #define ENC_UNKNOWN 0
 #define ENC_UNICODE 1
@@ -59,11 +57,7 @@
 class IDChangeLog;
 class ObjectWidget;
 class UMLWidget;
-class UMLOperation;
 class UMLPackage;
-class UMLEnum;
-class UMLEntity;
-class UMLApp;
 
 /**
   * UMLDoc provides a document object for a document-view model.
@@ -245,67 +239,6 @@
 	UMLObject* createChildObject(UMLObject* o, Uml::Object_Type type);
 
 	/**
-	 * Creates an operation in the current document.
-	 * The new operation is initialized with name, id, etc.
-	 * If a method with the given profile already exists in the classifier,
-	 * no new method is created and the existing operation is returned.
-	 * If no name is provided, or if the params are NULL, an Operation
-	 * Dialog is shown to ask the user for a name and parameters.
-	 * The operation's signature is checked for validity within the parent
-	 * classifier.
-	 *
-	 * @param parent	The parent classifier.
-	 * @param name		The operation name (will be chosen internally if
-	 *			none given.)
-	 * @param isExistingOp	Optional pointer to bool. If supplied, the bool is
-	 *			set to true if an existing operation is returned.
-	 * @param params	Optional list of parameter names and types.
-	 *			If supplied, new operation parameters are
-	 *			constructed using this list.
-	 * @return The new operation, or NULL if the operation could not be
-	 *         created because for example, the user canceled the dialog
-	 *         or no appropriate name can be found.
-	*/
-	UMLOperation* createOperation( UMLClassifier *parent,
-				       const QString &name = QString::null,
-				       bool *isExistingOp = NULL,
-				       Umbrello::NameAndType_List *params = NULL);
-
-	/**
-	 * Creates an attribute for the parent concept.
-	 *
-	 * @param o	The parent concept
-	 * @param name  An optional name, used by when creating through UMLListView
-	 * @return	The UMLAttribute created
-	 */
-	UMLObject* createAttribute(UMLClass* umlclass, const QString &name = QString::null);
-
-	/**
-	 * Creates a template for the parent concept.
-	 *
-	 * @param o	The parent concept
-	 * @return	The UMLTemplate created
-	 */
-	UMLObject* createTemplate(UMLClassifier* o, QString name = QString::null);
-
-	/**
-	 * Creates an enum literal for the parent enum.
-	 *
-	 * @param o	The parent enum
-	 * @return	The UMLEnum created
-	 */
-	UMLObject* createEnumLiteral(UMLEnum* umlenum);
-
-	/**
-	 * Creates an entity attribute for the parent concept.
-	 *
-	 * @param o	The parent concept
-	 * @param name  An optional name, used by when creating through UMLListView
-	 * @return	The UMLEntityAttribute created
-	 */
-	UMLObject* createEntityAttribute(UMLEntity* umlentity, const QString &name = QString::null);
-
-	/**
 	 * Finds or creates a stereotype for the parent object.
 	 */
 	UMLStereotype* findOrCreateStereotype(const QString &name);
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umllistview.cpp kdesdk/umbrello/umbrello/umllistview.cpp
--- kdesdk.orig/umbrello/umbrello/umllistview.cpp	2005-02-26 12:19:40.000000000 +0100
+++ kdesdk/umbrello/umbrello/umllistview.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -328,10 +328,7 @@
 		break;
 
 	case ListPopupMenu::mt_Import_Classes:
-		UMLApp::app()->classImport()->importCPP(
-			KFileDialog::getOpenFileNames(":import-classes",
-						      i18n("*.h|Header Files (*.h)\n*|All Files"),
-						      this, i18n("Select Classes to Import") ));
+		UMLApp::app()->slotImportClasses();
 		break;
 
 	case ListPopupMenu::mt_Expand_All:
@@ -375,7 +372,6 @@
 					moveObject(obj->getID(), convert_OT_LVT(obj->getBaseType()), m_lv);
 				}
 			}
-			m_doc->removeUMLObject(object);
 			UMLCanvasObject *canvasObj = dynamic_cast<UMLCanvasObject*>(object);
 			if (canvasObj) {
 				/**
@@ -388,6 +384,7 @@
 			         */
 				canvasObj->removeAllAssociations();
 			}
+			m_doc->removeUMLObject(object);
 		} else {
 			kdWarning() << "umllistview::listpopupmenu::mt_Delete called with unknown type"
 				    << endl;
@@ -599,6 +596,8 @@
 
 	connectNewObjectsSlots(object);
 	newItem = new UMLListViewItem(parentItem, object->getName(), convert_OT_LVT(type), object);
+	if (m_doc->loading())
+		return;
 	ensureItemVisible(newItem);
 	newItem->setOpen(true);
 	clearSelection();
@@ -688,9 +687,11 @@
 		QString text = child->toString(Uml::st_SigNoScope);
 		UMLListViewItem *newItem = new UMLListViewItem(parentItem, text,
 							       convert_OT_LVT(obj->getBaseType()), obj);
-		ensureItemVisible(newItem);
-		clearSelection();
-		setSelected(newItem, true);
+		if (! m_doc->loading()) {
+			ensureItemVisible(newItem);
+			clearSelection();
+			setSelected(newItem, true);
+		}
 	}
 	connectNewObjectsSlots(obj);
 }
@@ -1181,10 +1182,11 @@
 }
 
 void UMLListView::slotDropped(QDropEvent* de, QListViewItem* /* parent */, QListViewItem* item) {
+	item = (UMLListViewItem *)currentItem();
 	if(!item) {
-		//kdDebug() << "UMLListView::slotDropped: item is NULL - setting to currentItem()"
-		//	  << endl;
-		item = currentItem();
+		kdDebug() << "UMLListView::slotDropped: item is NULL - doing nothing"
+			  << endl;
+		return;
 	}
 	UMLDrag::LvTypeAndID_List srcList;
 	if (! UMLDrag::getClip3TypeAndID(de, srcList)) {
@@ -2197,7 +2199,7 @@
 			m_bCreatingChildObject = false;
 			return false;
 		}
-		newObject = m_doc->createTemplate( owningClassifier, nt.first );
+		newObject = owningClassifier->createTemplate(nt.first);
 		UMLTemplate *tmplParm = static_cast<UMLTemplate*>(newObject);
 		tmplParm->setType(nt.second);
 		text = tmplParm->toString(Uml::st_SigNoScope);
@@ -2213,7 +2215,7 @@
 			m_bCreatingChildObject = false;
 			return false;
 		}
-		newObject = m_doc->createAttribute( owningClass, nt.first );
+		newObject = owningClass->createAttribute(nt.first);
 		UMLAttribute *att = static_cast<UMLAttribute*>(newObject);
                 if (nt.second)
 		        att->setType(nt.second);
@@ -2231,8 +2233,7 @@
 			return false;
 		}
 		bool isExistingOp = false;
-		newObject = m_doc->createOperation(owningClassifier, od.m_name,
-						   &isExistingOp, &od.m_args);
+		newObject = owningClassifier->createOperation(od.m_name, &isExistingOp, &od.m_args);
 		if (isExistingOp) {
 			KMessageBox::error(
 			    kapp -> mainWidget(),
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlobject.cpp kdesdk/umbrello/umbrello/umlobject.cpp
--- kdesdk.orig/umbrello/umbrello/umlobject.cpp	2005-02-13 13:51:53.000000000 +0100
+++ kdesdk/umbrello/umbrello/umlobject.cpp	2005-03-19 02:18:31.000000000 +0100
@@ -62,6 +62,7 @@
 	m_bAbstract = false;
 	m_bStatic = false;
 	m_bInPaste = false;
+	m_bCreationWasSignalled = false;
 	m_pSecondary = NULL;
 }
 
@@ -85,7 +86,7 @@
 	return m_Name;
 }
 
-QString UMLObject::getFullyQualifiedName(const QString &separator /* = "::" */) const {
+QString UMLObject::getFullyQualifiedName(const QString &separator /* = "." */) const {
 	QString fqn;
 	if (m_pUMLPackage) {
 		fqn = m_pUMLPackage->getFullyQualifiedName(separator);
@@ -296,7 +297,7 @@
 	return name;
 }
 
-QString UMLObject::getPackage(const QString &separator /* ="::" */) {
+QString UMLObject::getPackage(const QString &separator /* ="." */) {
 	if (m_pUMLPackage == NULL)
 		return "";
 	QStringList pkgList;
@@ -327,11 +328,13 @@
 }
 
 void UMLObject::maybeSignalObjectCreated() {
-	if (m_BaseType != Uml::ot_Stereotype &&
+	if (!m_bCreationWasSignalled &&
+	    m_BaseType != Uml::ot_Stereotype &&
 	    m_BaseType != Uml::ot_Association &&
 	    m_BaseType != Uml::ot_Role) {
 		UMLDoc* umldoc = UMLApp::app()->getDocument();
 		umldoc->signalUMLObjectCreated(this);
+		m_bCreationWasSignalled = true;
 	}
 }
 
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlobject.h kdesdk/umbrello/umbrello/umlobject.h
--- kdesdk.orig/umbrello/umbrello/umlobject.h	2005-02-09 18:52:36.000000000 +0100
+++ kdesdk/umbrello/umbrello/umlobject.h	2005-03-19 02:18:31.000000000 +0100
@@ -188,7 +188,7 @@
 	 *			individual package prefixes (optional.)
 	 * @return	The UMLObject's enclosing package(s) as a text.
 	 */
-	QString getPackage(const QString &separator = "::");
+	QString getPackage(const QString &separator = ".");
 
 	/**
 	 * Return a list of the packages in which this class is embedded.
@@ -226,7 +226,7 @@
 	 * @param separator	The separator string to use.
 	 * @return	The fully qualified name of this UMLObject.
 	 */
-	virtual QString getFullyQualifiedName(const QString &separator = "::") const;
+	virtual QString getFullyQualifiedName(const QString &separator = ".") const;
 
 	/**
 	 * Returns the abstract state of the object.
@@ -413,6 +413,11 @@
 	bool m_bInPaste;
 
 	/**
+	 * Auxiliary to maybeSignalObjectCreated().
+	 */
+	bool m_bCreationWasSignalled;
+
+	/**
 	 * Pointer to an associated object.
 	 * Only a few of the classes inheriting from UMLObject use this.
 	 * However, it needs to be here because of inheritance graph
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/umlview.cpp kdesdk/umbrello/umbrello/umlview.cpp
--- kdesdk.orig/umbrello/umbrello/umlview.cpp	2005-02-23 00:22:07.000000000 +0100
+++ kdesdk/umbrello/umbrello/umlview.cpp	2005-03-26 00:09:07.000000000 +0100
@@ -175,7 +175,7 @@
 	//setup signals
 	connect( this, SIGNAL(sigRemovePopupMenu()), this, SLOT(slotRemovePopupMenu() ) );
 	connect( UMLApp::app(), SIGNAL( sigCutSuccessful() ),
-	         this, SLOT( slotCutSuccessful() ) );
+		 this, SLOT( slotCutSuccessful() ) );
 
 	// Create the ToolBarState factory. This class is not a singleton, because it
 	// needs a pointer to this object.
@@ -456,7 +456,9 @@
 	int y = m_Pos.y();
 
 	UMLWidget* newWidget = 0;
-	if(type == ot_Actor) {
+	switch (type)
+	{
+	case ot_Actor:
 		if (getType() == dt_Sequence) {
 			ObjectWidget *ow = new ObjectWidget(this, o, getLocalID() );
 			ow->setDrawAsActor(true);
@@ -466,43 +468,53 @@
 			newWidget = ow;
 		} else
 			newWidget = new ActorWidget(this, static_cast<UMLActor*>(o));
-	} else if(type == ot_UseCase) {
+		break;
+	case ot_UseCase:
 		newWidget = new UseCaseWidget(this, static_cast<UMLUseCase*>(o));
-	} else if(type == ot_Package) {
+		break;
+	case ot_Package:
 		newWidget = new PackageWidget(this, static_cast<UMLPackage*>(o));
-	} else if(type == ot_Component) {
+		break;
+	case ot_Component:
 		newWidget = new ComponentWidget(this, static_cast<UMLComponent*>(o));
 		if (getType() == dt_Deployment) {
 			newWidget->setIsInstance(true);
 		}
-	} else if(type == ot_Node) {
+		break;
+	case ot_Node:
 		newWidget = new NodeWidget(this,static_cast<UMLNode*>(o));
-	} else if(type == ot_Artifact) {
+		break;
+	case ot_Artifact:
 		newWidget = new ArtifactWidget(this, static_cast<UMLArtifact*>(o));
-	} else if(type == ot_Node) {
-		newWidget = new NodeWidget(this, static_cast<UMLNode*>(o));
-	} else if(type == ot_Datatype) {
+		break;
+	case ot_Datatype:
 		newWidget = new DatatypeWidget(this, static_cast<UMLDatatype*>(o));
-	} else if(type == ot_Enum) {
+		break;
+	case ot_Enum:
 		newWidget = new EnumWidget(this, static_cast<UMLEnum*>(o));
-	} else if(type == ot_Entity) {
+		break;
+	case ot_Entity:
 		newWidget = new EntityWidget(this, static_cast<UMLEntity*>(o));
-	} else if(type == ot_Interface) {
-		Diagram_Type diagramType = getType();
-		if (diagramType == dt_Sequence || diagramType == dt_Collaboration) {
-			ObjectWidget *ow = new ObjectWidget(this, o, getLocalID() );
-			if (m_Type == dt_Sequence) {
-				y = ow->topMargin();
-			}
-			newWidget = ow;
-		} else {
-			InterfaceWidget* interfaceWidget = new InterfaceWidget(this, static_cast<UMLInterface*>(o));
-			if (diagramType == dt_Component || diagramType == dt_Deployment) {
-				interfaceWidget->setDrawAsCircle(true);
+		break;
+	case ot_Interface:
+		{
+			Diagram_Type diagramType = getType();
+			if (diagramType == dt_Sequence || diagramType == dt_Collaboration) {
+				ObjectWidget *ow = new ObjectWidget(this, o, getLocalID() );
+				if (m_Type == dt_Sequence) {
+					y = ow->topMargin();
+				}
+				newWidget = ow;
+			} else {
+				InterfaceWidget* interfaceWidget = new InterfaceWidget(this, static_cast<UMLInterface*>(o));
+				if (diagramType == dt_Component || diagramType == dt_Deployment) {
+					interfaceWidget->setDrawAsCircle(true);
+				}
+				newWidget = interfaceWidget;
 			}
-			newWidget = interfaceWidget;
 		}
-	} else if(type == ot_Class ) { // CORRECT?
+		break;
+	case ot_Class: // CORRECT?
 		//see if we really want an object widget or class widget
 		if(getType() == dt_Class) {
 			newWidget = new ClassWidget(this, static_cast<UMLClass*>(o));
@@ -513,7 +525,8 @@
 			}
 			newWidget = ow;
 		}
-	} else {
+		break;
+	default:
 		kdWarning() << "trying to create an invalid widget" << endl;
 		return;
 	}
@@ -1245,8 +1258,8 @@
 	MessageWidget *w = 0;
 	while ( (w = itw.current()) != 0 ) {
 		++itw;
-		if( w -> getWidget(A) -> getSelected() &&
-		        w -> getWidget(B) -> getSelected() ) {
+		if ( w -> getWidget(A) -> getSelected() &&
+		     w -> getWidget(B) -> getSelected() ) {
 			makeSelected( w );
 		}//end if
 	}//end while
@@ -1459,7 +1472,7 @@
 	QRect rect = getDiagramRect();
 	if (rect.isEmpty()) {
 		KMessageBox::sorry(0, i18n("Can not save an empty diagram"),
-		                   i18n("Diagram Save Error."));
+				   i18n("Diagram Save Error."));
 	} else {
 		//  eps requested
 		if (imageMimetype == "image/x-eps") {
@@ -1500,8 +1513,8 @@
 #endif
 						    )) {
 				KMessageBox::error(0,
-				                   i18n("There was a problem saving file: %1").arg(m_ImageURL.path()),
-				                   i18n("Save Error"));
+						   i18n("There was a problem saving file: %1").arg(m_ImageURL.path()),
+						   i18n("Save Error"));
 			}
 			tmpfile.unlink();
 		} //!isLocalFile
@@ -2106,8 +2119,8 @@
 	AssociationWidgetListIt assoc_it(m_AssociationList);
 	AssociationWidget * assocwidget;
 	while((assocwidget = assoc_it.current())) {
-		if(assocwidget->getWidget(A)->getUMLObject() == Obj
-		        || assocwidget->getWidget(B)->getUMLObject() == Obj)
+		if (assocwidget->getWidget(A)->getUMLObject() == Obj ||
+		    assocwidget->getWidget(B)->getUMLObject() == Obj)
 			Associations.append(assocwidget);
 		++assoc_it;
 	}//end while
@@ -2209,7 +2222,7 @@
 			at = at_Activity;
 			break;
 
-	        default:
+		default:
 			break;
 	}
 	return at;
@@ -2498,10 +2511,12 @@
 		}
 		Uml::Association_Type assocType = Uml::at_Composition;
 		UMLWidget *w = findWidget( attrType->getID() );
+		AssociationWidget *aw = NULL;
 		// if the attribute type has a widget representation on this view
 		if (w &&
 		    // if the AssocWidget does not already exist then
-		    findAssocWidget(assocType, widget, w) == NULL &&
+		    ((aw = findAssocWidget(assocType, widget, w)) == NULL ||
+		      aw->getRoleName(Uml::B) != attr->getName()) &&
 		    // if the current diagram type permits compositions
 		    AssocRules::allowAssociation(assocType, widget, w, false)) {
 			// Create a composition AssocWidget, or, if the attribute type is
@@ -2527,7 +2542,7 @@
 			// if the UMLDatatype is a reference (pointer) type
 			if (dt->isReference()) {
 				UMLClassifier *c = dt->originType();
-				UMLWidget *w = findWidget( c->getID() );
+				UMLWidget *w = c ? findWidget( c->getID() ) : 0;
 				// if the referenced type has a widget representation on this view
 				if (w &&
 				    // if the AssocWidget does not already exist then
@@ -2632,8 +2647,8 @@
 	}//end while
 
 	QRect imageRect;  //area with respect to getDiagramRect()
-	                  //i.e. all widgets on the canvas.  Was previously with
-	                  //repect to whole canvas
+			  //i.e. all widgets on the canvas.  Was previously with
+			  //respect to whole canvas
 
 	imageRect.setLeft( px - rect.left() );
 	imageRect.setTop( py - rect.top() );
@@ -2707,12 +2722,6 @@
 }
 
 void UMLView::slotMenuSelection(int sel) {
-	FloatingText * ft = 0;
-	StateWidget * state = 0;
-	ActivityWidget * activity = 0;
-	bool ok = false;
-	QString name = "";
-
 	switch( (ListPopupMenu::Menu_Type)sel ) {
 		case ListPopupMenu::mt_Undo:
 			m_pDoc->loadUndoData();
@@ -2731,19 +2740,16 @@
 			break;
 
 		case ListPopupMenu::mt_FloatText:
-			ft = new FloatingText(this);
-			ft -> changeTextDlg();
-			//if no text entered delete
-			if(!FloatingText::isTextValid(ft -> getText()))
-
-				delete ft;
-			else {
-				ft->setX( m_Pos.x() );
-				ft->setY( m_Pos.y() );
-				ft->setVisible( true );
-				ft->setID(m_pDoc -> getUniqueID());
-				ft->setActivated();
+			{
+			    FloatingText* ft = new FloatingText(this);
+			    ft->changeTextDlg();
+			    //if no text entered delete
+			    if(!FloatingText::isTextValid(ft->getText())) {
+			 	delete ft;
+			    } else {
+				ft->setID(m_pDoc->getUniqueID());
 				setupNewWidget(ft);
+			    }
 			}
 			break;
 
@@ -2821,82 +2827,73 @@
 			m_PastePoint = m_Pos;
 			m_Pos.setX( 2000 );
 			m_Pos.setY( 2000 );
-			UMLApp::app() -> slotEditPaste();
+			UMLApp::app()->slotEditPaste();
 
 			m_PastePoint.setX( 0 );
 			m_PastePoint.setY( 0 );
 			break;
 
 		case ListPopupMenu::mt_Initial_State:
-			state = new StateWidget( this, StateWidget::Initial );
-			state -> setX( m_Pos.x() );
-			state -> setY ( m_Pos.y() );
-			state -> setVisible( true );
-			state -> setActivated();
-			setupNewWidget( state );
+			{
+			    StateWidget* state = new StateWidget( this, StateWidget::Initial );
+			    setupNewWidget( state );
+			}
 			break;
 
 		case ListPopupMenu::mt_End_State:
-			state = new StateWidget( this, StateWidget::End );
-			state -> setX( m_Pos.x() );
-			state -> setY ( m_Pos.y() );
-			state -> setVisible( true );
-			state -> setActivated();
-			setupNewWidget( state );
+			{
+			    StateWidget* state = new StateWidget( this, StateWidget::End );
+			    setupNewWidget( state );
+			}
 			break;
 
 		case ListPopupMenu::mt_State:
-			name = KInputDialog::getText( i18n("Enter State Name"), i18n("Enter the name of the new state:"), i18n("new state"), &ok, UMLApp::app() );
-			if( ok ) {
-				state = new StateWidget( this );
-				state -> setName( name );
-				state -> setX( m_Pos.x() );
-				state -> setY ( m_Pos.y() );
-				state -> setVisible( true );
-				state -> setActivated();
+			{
+			    bool ok = false;
+			    QString name = KInputDialog::getText( i18n("Enter State Name"),
+								  i18n("Enter the name of the new state:"),
+								  i18n("new state"), &ok, UMLApp::app() );
+			    if ( ok ) {
+				StateWidget* state = new StateWidget( this );
+				state->setName( name );
 				setupNewWidget( state );
+			    }
 			}
 			break;
 
 		case ListPopupMenu::mt_Initial_Activity:
-			activity = new ActivityWidget( this, ActivityWidget::Initial );
-			activity -> setX( m_Pos.x() );
-			activity -> setY ( m_Pos.y() );
-			activity -> setVisible( true );
-			activity -> setActivated();
-			setupNewWidget(activity);
+			{
+			    ActivityWidget* activity = new ActivityWidget( this, ActivityWidget::Initial );
+			    setupNewWidget(activity);
+			}
 			break;
 
 
 		case ListPopupMenu::mt_End_Activity:
-			activity = new ActivityWidget( this, ActivityWidget::End );
-			activity -> setX( m_Pos.x() );
-			activity -> setY ( m_Pos.y() );
-			activity -> setVisible( true );
-			activity -> setActivated();
-			setupNewWidget(activity);
+			{
+			    ActivityWidget* activity = new ActivityWidget( this, ActivityWidget::End );
+			    setupNewWidget(activity);
+			}
 			break;
 
 		case ListPopupMenu::mt_Branch:
-			activity = new ActivityWidget( this, ActivityWidget::Branch );
-			activity -> setX( m_Pos.x() );
-			activity -> setY ( m_Pos.y() );
-			activity -> setVisible( true );
-			activity -> setActivated();
-			setupNewWidget(activity);
+			{
+			    ActivityWidget* activity = new ActivityWidget( this, ActivityWidget::Branch );
+			    setupNewWidget(activity);
+			}
 			break;
 
 		case ListPopupMenu::mt_Activity:
-			name = KInputDialog::getText( i18n("Enter Activity Name"), i18n("Enter the name of the new activity:"),
-						      i18n("new activity"), &ok, UMLApp::app() );
-			if( ok ) {
-				activity = new ActivityWidget( this, ActivityWidget::Normal );
-				activity -> setName( name );
-				activity -> setX( m_Pos.x() );
-				activity -> setY ( m_Pos.y() );
-				activity -> setVisible( true );
-				activity -> setActivated();
+			{
+			    bool ok = false;
+			    QString name = KInputDialog::getText( i18n("Enter Activity Name"),
+								  i18n("Enter the name of the new activity:"),
+								  i18n("new activity"), &ok, UMLApp::app() );
+			    if ( ok ) {
+				ActivityWidget* activity = new ActivityWidget( this, ActivityWidget::Normal );
+				activity->setName( name );
 				setupNewWidget(activity);
+			    }
 			}
 			break;
 
@@ -2920,11 +2917,15 @@
 			break;
 
 		case ListPopupMenu::mt_Rename:
-			ok = false;
-			name = KInputDialog::getText( i18n("Enter Diagram Name"), i18n("Enter the new name of the diagram:"), getName(), &ok, UMLApp::app() );
-			if (ok) {
+			{
+			    bool ok = false;
+			    QString name = KInputDialog::getText( i18n("Enter Diagram Name"),
+								  i18n("Enter the new name of the diagram:"),
+								  getName(), &ok, UMLApp::app() );
+			    if (ok) {
 				setName(name);
 				m_pDoc->signalDiagramRenamed(this);
+			    }
 			}
 			break;
 
@@ -2995,8 +2996,9 @@
 	UMLWidgetListIt wit( m_WidgetList );
 	while ( (pWidget = wit.current()) != 0 ) {
 		++wit;
-		if( pWidget -> getBaseType() == Uml::wt_Class ) {
-			page -> setWidget( static_cast<ClassWidget *>( pWidget ) );
+		Uml::Widget_Type wt = pWidget->getBaseType();
+		if (wt == Uml::wt_Class || wt == Uml::wt_Interface) {
+			page -> setWidget( static_cast<ClassifierWidget *>(pWidget) );
 			page -> updateUMLWidget();
 		}
 	}
@@ -3530,8 +3532,8 @@
 			FloatingText *ft = message->getFloatingText();
 			if (ft)
 				m_WidgetList.append( ft );
-			else
-				kdError() << "UMLView::loadMessagesFromXMI: ft is NULL"
+			else if (message->getSequenceMessageType() != sequence_message_creation)
+				kdDebug() << "UMLView::loadMessagesFromXMI: ft is NULL"
 					  << " for message " << ID2STR(message->getID())
 					  << endl;
 		}
@@ -3553,7 +3555,7 @@
 			AssociationWidget *assoc = new AssociationWidget(this);
 			if( !assoc->loadFromXMI( assocElement ) ) {
 				kdError() << "couldn't loadFromXMI association widget:"
-				          << assoc << ", bad XMI file? Deleting from umlview."
+					  << assoc << ", bad XMI file? Deleting from umlview."
 					  << endl;
 				delete assoc;
 				/* return false;
diff -urN -x CVS kdesdk.orig/umbrello/umbrello/x-umbrello.desktop kdesdk/umbrello/umbrello/x-umbrello.desktop
--- kdesdk.orig/umbrello/umbrello/x-umbrello.desktop	2005-02-13 05:30:45.000000000 +0100
+++ kdesdk/umbrello/umbrello/x-umbrello.desktop	2005-03-07 15:20:12.000000000 +0100
@@ -36,5 +36,4 @@
 Comment[ta]=  அம்ரல்லோ UML மாடுலர் கோப்பு
 Comment[tg]=Файли моделкунонии UML Umbrello
 Comment[uk]=Файл моделювання UML Umbrello
-Comment[xx]=xxUmbrello UML Modeller Filexx
 Comment[zh_CN]=Umbrello UML 建模工具文件
